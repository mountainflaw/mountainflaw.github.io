<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Super Mario 64 Source: src/game/envfx_snow.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Super Mario 64 Source
   </div>
   <div id="projectbrief">A Super Mario 64 decompilation, brought to you by a bunch of clever folks.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_1699be727a800b1d059c6f7f2b91d2ee.html">game</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">envfx_snow.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="../../dd/d2f/ultra64_8h_source.html">ultra64.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dd8/sm64_8h_source.html">sm64.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d68/display_8h_source.html">display.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/dec/ingame__menu_8h_source.html">ingame_menu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d55/envfx__snow_8h_source.html">envfx_snow.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/ddb/envfx__bubbles_8h_source.html">envfx_bubbles.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/da4/surface__collision_8h_source.html">engine/surface_collision.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d11/math__util_8h_source.html">engine/math_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d69/behavior__script_8h_source.html">engine/behavior_script.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/de9/interface__2_8h_source.html">audio/interface_2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/da0/obj__behaviors_8h_source.html">obj_behaviors.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d4d/structSnowFlakeVertex.html">SnowFlakeVertex</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file contains the function that handles 'environment effects', which are particle effects related to the level type that, unlike object-based particle effects, are rendered more efficiently by manually generating display lists instead of drawing each particle separately.  <a href="../../d4/d4d/structSnowFlakeVertex.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af698c946b5c62b23fa170890ed8be9f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#af698c946b5c62b23fa170890ed8be9f8">envfx_init_snow</a> (<a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> mode)</td></tr>
<tr class="memdesc:af698c946b5c62b23fa170890ed8be9f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize snow particles by allocating a buffer for storing their state and setting a start amount.  <a href="#af698c946b5c62b23fa170890ed8be9f8">More...</a><br /></td></tr>
<tr class="separator:af698c946b5c62b23fa170890ed8be9f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05dc0952fdc9d996a21ba203d61553ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a05dc0952fdc9d996a21ba203d61553ca">envfx_update_snowflake_count</a> (<a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> mode, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> marioPos)</td></tr>
<tr class="memdesc:a05dc0952fdc9d996a21ba203d61553ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the amount of snow particles on screen.  <a href="#a05dc0952fdc9d996a21ba203d61553ca">More...</a><br /></td></tr>
<tr class="separator:a05dc0952fdc9d996a21ba203d61553ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbced1b6f7715990ac0bd90fc2e28ab4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#acbced1b6f7715990ac0bd90fc2e28ab4">envfx_cleanup_snow</a> (<a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> *snowParticleArray)</td></tr>
<tr class="memdesc:acbced1b6f7715990ac0bd90fc2e28ab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate the buffer storing snow particles and set the environment effect to none.  <a href="#acbced1b6f7715990ac0bd90fc2e28ab4">More...</a><br /></td></tr>
<tr class="separator:acbced1b6f7715990ac0bd90fc2e28ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3767f57de2e0823fa128150d030bd6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#ab3767f57de2e0823fa128150d030bd6a">orbit_from_positions</a> (<a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> from, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> to, <a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> *radius, <a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> *pitch, <a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> *yaw)</td></tr>
<tr class="memdesc:ab3767f57de2e0823fa128150d030bd6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given two points, return the vector from one to the other represented as euler angles and a length.  <a href="#ab3767f57de2e0823fa128150d030bd6a">More...</a><br /></td></tr>
<tr class="separator:ab3767f57de2e0823fa128150d030bd6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3d69b5848adcf5e6648e1ce59246349"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#ad3d69b5848adcf5e6648e1ce59246349">pos_from_orbit</a> (<a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> origin, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> result, <a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> radius, <a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> pitch, <a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> yaw)</td></tr>
<tr class="memdesc:ad3d69b5848adcf5e6648e1ce59246349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the 'result' vector as the position of the 'origin' vector with a vector added represented by radius, pitch and yaw.  <a href="#ad3d69b5848adcf5e6648e1ce59246349">More...</a><br /></td></tr>
<tr class="separator:ad3d69b5848adcf5e6648e1ce59246349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a9ef202e3b7cbaefcf18be6aada656"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#ab3a9ef202e3b7cbaefcf18be6aada656">envfx_is_snowflake_alive</a> (<a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> index, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderX, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderY, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderZ)</td></tr>
<tr class="memdesc:ab3a9ef202e3b7cbaefcf18be6aada656"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the snowflake with the given index is inside view, where 'view' is a cylinder of radius 300 and height 400 centered at the input x, y and z.  <a href="#ab3a9ef202e3b7cbaefcf18be6aada656">More...</a><br /></td></tr>
<tr class="separator:ab3a9ef202e3b7cbaefcf18be6aada656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c9ba0fb528cf6367e9c5d171d374fc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a2c9ba0fb528cf6367e9c5d171d374fc7">envfx_update_snow_normal</a> (<a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderX, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderY, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderZ)</td></tr>
<tr class="memdesc:a2c9ba0fb528cf6367e9c5d171d374fc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the position of each snowflake.  <a href="#a2c9ba0fb528cf6367e9c5d171d374fc7">More...</a><br /></td></tr>
<tr class="separator:a2c9ba0fb528cf6367e9c5d171d374fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d57a0f45684bb71735e5ef044078a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#ac5d57a0f45684bb71735e5ef044078a1">envfx_update_snow_blizzard</a> (<a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderX, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderY, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderZ)</td></tr>
<tr class="memdesc:ac5d57a0f45684bb71735e5ef044078a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unused function.  <a href="#ac5d57a0f45684bb71735e5ef044078a1">More...</a><br /></td></tr>
<tr class="separator:ac5d57a0f45684bb71735e5ef044078a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac54d52e3b662f27ebc951fc529c9a38b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#ac54d52e3b662f27ebc951fc529c9a38b">is_in_mystery_snow_area</a> (<a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> x, <a class="el" href="../../d8/d4b/unused_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> y, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> z)</td></tr>
<tr class="separator:ac54d52e3b662f27ebc951fc529c9a38b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b790a671271e7b44a508a3e6c4e697a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a6b790a671271e7b44a508a3e6c4e697a">envfx_update_snow_water</a> (<a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderX, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderY, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowCylinderZ)</td></tr>
<tr class="memdesc:a6b790a671271e7b44a508a3e6c4e697a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the position of underwater snow particles.  <a href="#a6b790a671271e7b44a508a3e6c4e697a">More...</a><br /></td></tr>
<tr class="separator:a6b790a671271e7b44a508a3e6c4e697a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7687b6a074d13d0af66a69bf8188098"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#ae7687b6a074d13d0af66a69bf8188098">rotate_triangle_vertices</a> (<a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> vertex1, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> vertex2, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> vertex3, <a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> pitch, <a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> yaw)</td></tr>
<tr class="memdesc:ae7687b6a074d13d0af66a69bf8188098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotates the input vertices according to the give pitch and yaw.  <a href="#ae7687b6a074d13d0af66a69bf8188098">More...</a><br /></td></tr>
<tr class="separator:ae7687b6a074d13d0af66a69bf8188098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fda3475329a9317df52cc5ed5420a35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a9fda3475329a9317df52cc5ed5420a35">append_snowflake_vertex_buffer</a> (<a class="el" href="../../d9/d0b/unionGfx.html">Gfx</a> *gfx, <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> index, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> vertex1, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> vertex2, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> vertex3)</td></tr>
<tr class="memdesc:a9fda3475329a9317df52cc5ed5420a35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append 15 vertices to 'gfx', which is enough for 5 snowflakes starting at 'index' in the buffer.  <a href="#a9fda3475329a9317df52cc5ed5420a35">More...</a><br /></td></tr>
<tr class="separator:a9fda3475329a9317df52cc5ed5420a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfcd28a954417f230964fa5f2ff5dd2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/unionGfx.html">Gfx</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a7dfcd28a954417f230964fa5f2ff5dd2">envfx_update_snow</a> (<a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> snowMode, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> marioPos, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> camFrom, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> camTo)</td></tr>
<tr class="memdesc:a7dfcd28a954417f230964fa5f2ff5dd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates positions of snow particles and returns a pointer to a display list drawing all snowflakes.  <a href="#a7dfcd28a954417f230964fa5f2ff5dd2">More...</a><br /></td></tr>
<tr class="separator:a7dfcd28a954417f230964fa5f2ff5dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa3dad7eb50ea5eef8c1530a098f251d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/unionGfx.html">Gfx</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#aaa3dad7eb50ea5eef8c1530a098f251d">envfx_update_particles</a> (<a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> mode, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> marioPos, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> camTo, <a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a> camFrom)</td></tr>
<tr class="memdesc:aaa3dad7eb50ea5eef8c1530a098f251d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the environment effects (snow, flowers, bubbles) and returns a display list drawing them.  <a href="#aaa3dad7eb50ea5eef8c1530a098f251d">More...</a><br /></td></tr>
<tr class="separator:aaa3dad7eb50ea5eef8c1530a098f251d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a44599492971b3dd411ea9c08c2f582e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#af4a03635eed55b742e4da098aa994408">struct</a> <a class="el" href="../../d7/d73/structEnvFxParticle.html">EnvFxParticle</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a44599492971b3dd411ea9c08c2f582e1">gEnvFxBuffer</a></td></tr>
<tr class="separator:a44599492971b3dd411ea9c08c2f582e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3baf85cdee71e25fdbcbb79ca5d6ebd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d49/types_8h.html#ac619d4a7b85db42ad4f454f2b8f369b6">Vec3i</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#ad3baf85cdee71e25fdbcbb79ca5d6ebd">gSnowCylinderLastPos</a></td></tr>
<tr class="separator:ad3baf85cdee71e25fdbcbb79ca5d6ebd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51f61807c6e51b34bad379b287d638a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a51f61807c6e51b34bad379b287d638a9">gSnowParticleCount</a></td></tr>
<tr class="separator:a51f61807c6e51b34bad379b287d638a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b88335d35e4b1e299228c09de48d59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a95b88335d35e4b1e299228c09de48d59">gSnowParticleMaxCount</a></td></tr>
<tr class="separator:a95b88335d35e4b1e299228c09de48d59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa608c12efb20fa94e9dcb4a699d6d0c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/da7/ultratypes_8h.html#a151f780fb455885061d3b77ec1c90c03">s8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#aa608c12efb20fa94e9dcb4a699d6d0c6">gEnvFxMode</a> = 0</td></tr>
<tr class="separator:aa608c12efb20fa94e9dcb4a699d6d0c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb4ecfa3fff9f1296d08da46f4df59ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d4b/unused_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#acb4ecfa3fff9f1296d08da46f4df59ab">D_80330644</a> = 0</td></tr>
<tr class="separator:acb4ecfa3fff9f1296d08da46f4df59ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a269b9407d67580f82425e28b6be56514"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d8e/structVtx__t.html">Vtx_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a269b9407d67580f82425e28b6be56514">gSnowTempVtx</a> [3]</td></tr>
<tr class="memdesc:a269b9407d67580f82425e28b6be56514"><td class="mdescLeft">&#160;</td><td class="mdescRight">Template for a snow particle triangle.  <a href="#a269b9407d67580f82425e28b6be56514">More...</a><br /></td></tr>
<tr class="separator:a269b9407d67580f82425e28b6be56514"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c8e428c1f4d1e7d263b3b5be0da0bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#af4a03635eed55b742e4da098aa994408">struct</a> <a class="el" href="../../d4/d4d/structSnowFlakeVertex.html">SnowFlakeVertex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a14c8e428c1f4d1e7d263b3b5be0da0bc">gSnowFlakeVertex1</a> = {-5, 5, 0}</td></tr>
<tr class="separator:a14c8e428c1f4d1e7d263b3b5be0da0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d51b9bc6302845d60d9c01f2b2c307"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#af4a03635eed55b742e4da098aa994408">struct</a> <a class="el" href="../../d4/d4d/structSnowFlakeVertex.html">SnowFlakeVertex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a95d51b9bc6302845d60d9c01f2b2c307">gSnowFlakeVertex2</a> = {-5, -5, 0}</td></tr>
<tr class="separator:a95d51b9bc6302845d60d9c01f2b2c307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b07b469cea7d2e92d8fd50c804a5f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#af4a03635eed55b742e4da098aa994408">struct</a> <a class="el" href="../../d4/d4d/structSnowFlakeVertex.html">SnowFlakeVertex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#af3b07b469cea7d2e92d8fd50c804a5f1">gSnowFlakeVertex3</a> = {5, 5, 0}</td></tr>
<tr class="separator:af3b07b469cea7d2e92d8fd50c804a5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cd19ee5782cbbab769c1b1235b3b617"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a5cd19ee5782cbbab769c1b1235b3b617">tiny_bubble_dl_0B006AB0</a></td></tr>
<tr class="separator:a5cd19ee5782cbbab769c1b1235b3b617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e98ea1457cf5b96e48aed970538577"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a62e98ea1457cf5b96e48aed970538577">tiny_bubble_dl_0B006A50</a></td></tr>
<tr class="separator:a62e98ea1457cf5b96e48aed970538577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16a6fc7b1168da4c9734fa2443963cfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/envfx__snow_8c.html#a16a6fc7b1168da4c9734fa2443963cfb">tiny_bubble_dl_0B006CD8</a></td></tr>
<tr class="separator:a16a6fc7b1168da4c9734fa2443963cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9fda3475329a9317df52cc5ed5420a35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fda3475329a9317df52cc5ed5420a35">&#9670;&nbsp;</a></span>append_snowflake_vertex_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> append_snowflake_vertex_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d0b/unionGfx.html">Gfx</a> *&#160;</td>
          <td class="paramname"><em>gfx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>vertex1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>vertex2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>vertex3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Append 15 vertices to 'gfx', which is enough for 5 snowflakes starting at 'index' in the buffer. </p>
<p>The 3 input vertices represent the roated triangle around (0,0,0) that will be translated to snowflake positions to draw the snowflake image. </p>

</div>
</div>
<a id="acbced1b6f7715990ac0bd90fc2e28ab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbced1b6f7715990ac0bd90fc2e28ab4">&#9670;&nbsp;</a></span>envfx_cleanup_snow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> envfx_cleanup_snow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> *&#160;</td>
          <td class="paramname"><em>snowParticleArray</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocate the buffer storing snow particles and set the environment effect to none. </p>

</div>
</div>
<a id="af698c946b5c62b23fa170890ed8be9f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af698c946b5c62b23fa170890ed8be9f8">&#9670;&nbsp;</a></span>envfx_init_snow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> envfx_init_snow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize snow particles by allocating a buffer for storing their state and setting a start amount. </p>

</div>
</div>
<a id="ab3a9ef202e3b7cbaefcf18be6aada656"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3a9ef202e3b7cbaefcf18be6aada656">&#9670;&nbsp;</a></span>envfx_is_snowflake_alive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> envfx_is_snowflake_alive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderZ</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the snowflake with the given index is inside view, where 'view' is a cylinder of radius 300 and height 400 centered at the input x, y and z. </p>

</div>
</div>
<a id="aaa3dad7eb50ea5eef8c1530a098f251d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa3dad7eb50ea5eef8c1530a098f251d">&#9670;&nbsp;</a></span>envfx_update_particles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/unionGfx.html">Gfx</a>* envfx_update_particles </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>marioPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>camTo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>camFrom</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the environment effects (snow, flowers, bubbles) and returns a display list drawing them. </p>

</div>
</div>
<a id="a7dfcd28a954417f230964fa5f2ff5dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dfcd28a954417f230964fa5f2ff5dd2">&#9670;&nbsp;</a></span>envfx_update_snow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/unionGfx.html">Gfx</a>* envfx_update_snow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>marioPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>camFrom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>camTo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates positions of snow particles and returns a pointer to a display list drawing all snowflakes. </p>

</div>
</div>
<a id="ac5d57a0f45684bb71735e5ef044078a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5d57a0f45684bb71735e5ef044078a1">&#9670;&nbsp;</a></span>envfx_update_snow_blizzard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> envfx_update_snow_blizzard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderZ</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unused function. </p>
<p>Basically a copy-paste of envfx_update_snow_normal, but an extra 20 units is added to each snowflake x and snowflakes can respawn in y-range [-200, 200] instead of [0, 200] relative to snowCylinderY They also fall a bit faster (with vertical speed -5 instead of -2). </p>

</div>
</div>
<a id="a2c9ba0fb528cf6367e9c5d171d374fc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c9ba0fb528cf6367e9c5d171d374fc7">&#9670;&nbsp;</a></span>envfx_update_snow_normal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> envfx_update_snow_normal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderZ</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the position of each snowflake. </p>
<p>Snowflakes wiggle by having a random value added to their position each frame. If snowflakes get out of view (where view = a small cylinder in front of the camera) their position is reset to somewhere in view. Since the cylinder of snow is so close to the camera, snow flakes would move out of view very quickly when the camera moves. To mitigate this, a portion of the difference between the previous and current snowCylinder position is added to snowflakes to keep them in view for longer. That's why the snow looks a bit off in 3d, it's a lot closer than you'd think but appears to be further by means of hacky position updates. This might have been done because larger, further away snowflakes are occluded easily by level geometry, wasting many particles. </p>

</div>
</div>
<a id="a6b790a671271e7b44a508a3e6c4e697a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b790a671271e7b44a508a3e6c4e697a">&#9670;&nbsp;</a></span>envfx_update_snow_water()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> envfx_update_snow_water </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>snowCylinderZ</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the position of underwater snow particles. </p>
<p>Since they are stationary, they merely jump back into view when they are out of view. </p>

</div>
</div>
<a id="a05dc0952fdc9d996a21ba203d61553ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05dc0952fdc9d996a21ba203d61553ca">&#9670;&nbsp;</a></span>envfx_update_snowflake_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> envfx_update_snowflake_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>marioPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the amount of snow particles on screen. </p>
<p>Normal snow starts with few flakes and slowly increases to the maximum. For water snow, this is dependent on how deep underwater you are. Blizzard snows starts at the maximum amount and doesn't change. </p>

</div>
</div>
<a id="ac54d52e3b662f27ebc951fc529c9a38b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac54d52e3b662f27ebc951fc529c9a38b">&#9670;&nbsp;</a></span>is_in_mystery_snow_area()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> is_in_mystery_snow_area </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d4b/unused_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a>&#160;</td>
          <td class="paramname"><em>z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unused function. Checks whether a position is laterally within 3000 units to the point (x: 3380, z: -520). Considering there is an unused blizzard snow mode, this could have been used to check whether Mario is in a 'blizzard area'. In Cool Cool Mountain and Snowman's Land the area lies near the starting point and doesn't seem meaningfull. Notably, the point is close to the entrance of SL, so maybe there were plans for an extra hint to find it. The radius of 3000 units is quite large for that though, covering more than half of the mirror room. Note that in geo_exec_level of <a class="el" href="../../d7/dce/level__geo_8c.html">level_geo.c</a> if a0 == 4, the environment effects are updated with mirror mario's position 3 times instead of mario, cam from and cam to positions, further suggesting that this had something to do with the mirror room. a0 is fixed to 1 so the meaning of that parameter is unclear as well. </p>

</div>
</div>
<a id="ab3767f57de2e0823fa128150d030bd6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3767f57de2e0823fa128150d030bd6a">&#9670;&nbsp;</a></span>orbit_from_positions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> orbit_from_positions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> *&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> *&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> *&#160;</td>
          <td class="paramname"><em>yaw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given two points, return the vector from one to the other represented as euler angles and a length. </p>

</div>
</div>
<a id="ad3d69b5848adcf5e6648e1ce59246349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3d69b5848adcf5e6648e1ce59246349">&#9670;&nbsp;</a></span>pos_from_orbit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> pos_from_orbit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a>&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a>&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a>&#160;</td>
          <td class="paramname"><em>yaw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the 'result' vector as the position of the 'origin' vector with a vector added represented by radius, pitch and yaw. </p>

</div>
</div>
<a id="ae7687b6a074d13d0af66a69bf8188098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7687b6a074d13d0af66a69bf8188098">&#9670;&nbsp;</a></span>rotate_triangle_vertices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a> rotate_triangle_vertices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>vertex1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>vertex2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a95eb48a2f3630571bea260858dd23e92">Vec3s</a>&#160;</td>
          <td class="paramname"><em>vertex3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a>&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a>&#160;</td>
          <td class="paramname"><em>yaw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rotates the input vertices according to the give pitch and yaw. </p>
<p>This is needed for billboarding of particles. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="acb4ecfa3fff9f1296d08da46f4df59ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb4ecfa3fff9f1296d08da46f4df59ab">&#9670;&nbsp;</a></span>D_80330644</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d4b/unused_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="../../dd/da7/ultratypes_8h.html#a0ce6887c26c1c49ad3be5710dd42bfd6">s32</a> D_80330644 = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a44599492971b3dd411ea9c08c2f582e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44599492971b3dd411ea9c08c2f582e1">&#9670;&nbsp;</a></span>gEnvFxBuffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#af4a03635eed55b742e4da098aa994408">struct</a> <a class="el" href="../../d7/d73/structEnvFxParticle.html">EnvFxParticle</a>* gEnvFxBuffer</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa608c12efb20fa94e9dcb4a699d6d0c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa608c12efb20fa94e9dcb4a699d6d0c6">&#9670;&nbsp;</a></span>gEnvFxMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/da7/ultratypes_8h.html#a151f780fb455885061d3b77ec1c90c03">s8</a> gEnvFxMode = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad3baf85cdee71e25fdbcbb79ca5d6ebd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3baf85cdee71e25fdbcbb79ca5d6ebd">&#9670;&nbsp;</a></span>gSnowCylinderLastPos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d49/types_8h.html#ac619d4a7b85db42ad4f454f2b8f369b6">Vec3i</a> gSnowCylinderLastPos</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a14c8e428c1f4d1e7d263b3b5be0da0bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c8e428c1f4d1e7d263b3b5be0da0bc">&#9670;&nbsp;</a></span>gSnowFlakeVertex1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#af4a03635eed55b742e4da098aa994408">struct</a> <a class="el" href="../../d4/d4d/structSnowFlakeVertex.html">SnowFlakeVertex</a> gSnowFlakeVertex1 = {-5, 5, 0}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a95d51b9bc6302845d60d9c01f2b2c307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95d51b9bc6302845d60d9c01f2b2c307">&#9670;&nbsp;</a></span>gSnowFlakeVertex2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#af4a03635eed55b742e4da098aa994408">struct</a> <a class="el" href="../../d4/d4d/structSnowFlakeVertex.html">SnowFlakeVertex</a> gSnowFlakeVertex2 = {-5, -5, 0}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af3b07b469cea7d2e92d8fd50c804a5f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3b07b469cea7d2e92d8fd50c804a5f1">&#9670;&nbsp;</a></span>gSnowFlakeVertex3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#af4a03635eed55b742e4da098aa994408">struct</a> <a class="el" href="../../d4/d4d/structSnowFlakeVertex.html">SnowFlakeVertex</a> gSnowFlakeVertex3 = {5, 5, 0}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a51f61807c6e51b34bad379b287d638a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51f61807c6e51b34bad379b287d638a9">&#9670;&nbsp;</a></span>gSnowParticleCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> gSnowParticleCount</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a95b88335d35e4b1e299228c09de48d59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b88335d35e4b1e299228c09de48d59">&#9670;&nbsp;</a></span>gSnowParticleMaxCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/da7/ultratypes_8h.html#a4cb19f4a3324cfe0938ddfbfabaa825b">s16</a> gSnowParticleMaxCount</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a269b9407d67580f82425e28b6be56514"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a269b9407d67580f82425e28b6be56514">&#9670;&nbsp;</a></span>gSnowTempVtx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d8e/structVtx__t.html">Vtx_t</a> gSnowTempVtx[3]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= </div><div class="line">{</div><div class="line">    {</div><div class="line">        {-5, 5, 0},</div><div class="line">        0,</div><div class="line">        {0, 0},</div><div class="line">        {0x7F, 0x7F, 0x7F, 0xFF}</div><div class="line">    },</div><div class="line">    {</div><div class="line">        {-5, -5, 0},</div><div class="line">        0,</div><div class="line">        {0, 960},</div><div class="line">        {0x7F, 0x7F, 0x7F, 0xFF}</div><div class="line">    },</div><div class="line">    {</div><div class="line">        {5, 5, 0},</div><div class="line">        0,</div><div class="line">        {960, 0},</div><div class="line">        {0x7F, 0x7F, 0x7F, 0xFF}</div><div class="line">    },</div><div class="line">}</div></div><!-- fragment -->
<p>Template for a snow particle triangle. </p>

</div>
</div>
<a id="a62e98ea1457cf5b96e48aed970538577"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62e98ea1457cf5b96e48aed970538577">&#9670;&nbsp;</a></span>tiny_bubble_dl_0B006A50</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>* tiny_bubble_dl_0B006A50</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5cd19ee5782cbbab769c1b1235b3b617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cd19ee5782cbbab769c1b1235b3b617">&#9670;&nbsp;</a></span>tiny_bubble_dl_0B006AB0</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>* tiny_bubble_dl_0B006AB0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a16a6fc7b1168da4c9734fa2443963cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16a6fc7b1168da4c9734fa2443963cfb">&#9670;&nbsp;</a></span>tiny_bubble_dl_0B006CD8</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d0b/err_8english_8cc.html#abb178ecd93afd9b8177853194c3c833c">void</a>* tiny_bubble_dl_0B006CD8</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
