<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.14"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>Super Mario 64 Source: include/PR/gbi.h Source File</title>
        <!--<link href="../../tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="../../dynsections.js"></script>
        <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
        <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
        <link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="../../doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">Super Mario 64 Source </a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_83efb4269fa89047a37e895c24f65331.html">PR</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">gbi.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d3/daf/gbi_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/**************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *                                    *</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *       Copyright (C) 1994, Silicon Graphics, Inc.       *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *                                    *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  These coded instructions, statements, and computer programs  contain  *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  unpublished  proprietary  information of Silicon Graphics, Inc., and  *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *  are protected by Federal copyright law.  They  may  not be disclosed  *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *  to  third  parties  or copied or duplicated in any form, in whole or  *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *  in part, without the prior written consent of Silicon Graphics, Inc.  *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *                                    *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> **************************************************************************/</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/**************************************************************************</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *  $Revision: 1.141 $</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *  $Date: 1999/09/03 03:43:08 $</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *  $Source: /exdisk2/cvs/N64OS/Master/cvsmdev2/PR/include/gbi.h,v $</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> **************************************************************************/</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef _GBI_H_</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#define _GBI_H_</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dd/da7/ultratypes_8h.html">PR/ultratypes.h</a>&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * To use the F3DEX ucodes, define F3DEX_GBI before include this file.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *     #define  F3DEX_GBI</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> *     #include &lt;ultra64.h&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *     or</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> *     cc -c -DF3DEX_GBI -I.... foo.c</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/**************************************************************************</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * Graphics Binary Interface</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> **************************************************************************/</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> * Graphics Commands, &#39;xxx&#39; parts may be generated from ucode</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * The command format is</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> *  |00xxxxxx| = DMA        0,..,127</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> *  |10xxxxxx| = Immediate Mode -65,..,-128</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> *  |11xxxxxx| = RDP cmds       -1,..,-64</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> * Note: in order for the RSP microcode to process RDP commands opaquely,</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> * we need to further identify those RDP commands that need DRAM address</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> * &quot;fixup&quot;. To do this, we have the dummy command G_RDP_ADDR_FIXUP, and</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> * all |RDP commands| less than this are commands with embedded DRAM</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> * addresses. Further, the format of these commands should be similar so</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> * only one fixup routine is needed.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> * Further explanation:</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> * The names of the commands are somewhat misleading. Here is clarification:</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> *  - a &#39;DMA&#39; type command has a pointer to additional data and</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *    causes a DMA transfer to bring that into DMEM.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> *  - an &#39;Immediate&#39; type command isn&#39;t really &#39;immediate&#39;, in the</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> *    traditional sense. This just means that the entire command fits</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> *    in the 64-bit word, and the ucode can execute it &#39;immediately&#39;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> *    without additional memory transfers.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> *  - an &#39;RDP&#39; command is identified as such because the RDP</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> *    commands can be passed-thru the RSP and sent to the RDP</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> *    directly. One further confusing thing, is that some &#39;DP&#39;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> *    macros below actually generate immediate commands, not</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> *    not direct DP commands.</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> * IMPLEMENTATION NOTE:</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> * There is another group of RDP commands that includes the triangle commands</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> * generated by the RSP code. These are the raw commands the rasterizer </span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> * hardware chews on, with slope info, etc. They will follow the RDP </span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> * ordering...</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> * IMPLEMENTATION NOTE:</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> * The RDP hardware has some of these bit patterns wired up. If the hardware </span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> * changes, we must adjust this table, likewise we can&#39;t change/add things </span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"> * once the hardware is frozen. (actually, the RDP hardware only looks at</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> * the lower 6 bits of the command byte)</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#ifdef    F3DEX_GBI_2</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor"># ifndef  F3DEX_GBI</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#  define F3DEX_GBI</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor"># endif</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#define G_NOOP          0x00</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#define G_RDPHALF_2     0xf1</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#define G_SETOTHERMODE_H    0xe3</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#define G_SETOTHERMODE_L    0xe2</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#define G_RDPHALF_1     0xe1</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#define G_SPNOOP        0xe0</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#define G_ENDDL         0xdf</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#define G_DL            0xde</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#define G_LOAD_UCODE        0xdd</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#define G_MOVEMEM       0xdc</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#define G_MOVEWORD      0xdb</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#define G_MTX           0xda</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#define G_GEOMETRYMODE      0xd9</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#define G_POPMTX        0xd8</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#define G_TEXTURE       0xd7</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#define G_DMA_IO        0xd6</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#define G_SPECIAL_1     0xd5</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#define G_SPECIAL_2     0xd4</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#define G_SPECIAL_3     0xd3</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#define G_VTX           0x01</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#define G_MODIFYVTX     0x02</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#define G_CULLDL        0x03</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#define G_BRANCH_Z      0x04</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#define G_TRI1          0x05</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#define G_TRI2          0x06</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#define G_QUAD          0x07</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#define G_LINE3D        0x08</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/* DMA commands: */</span></div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab25344a78270ed0970834d48e1b98c89">  125</a></span>&#160;<span class="preprocessor">#define G_SPNOOP        0   </span><span class="comment">/* handle 0 gracefully */</span><span class="preprocessor"></span></div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af39988b3766a5803f38960b9b48e0bcf">  126</a></span>&#160;<span class="preprocessor">#define G_MTX           1</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad768fc998e4a658f6c0a49d8272ac2c2">  127</a></span>&#160;<span class="preprocessor">#define G_RESERVED0     2   </span><span class="comment">/* not implemeted */</span><span class="preprocessor"></span></div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae0aeb89fac1fe117c93818b63bc2af25">  128</a></span>&#160;<span class="preprocessor">#define G_MOVEMEM       3   </span><span class="comment">/* move a block of memory (up to 4 words) to dmem */</span><span class="preprocessor"></span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a82bdd952a77e9d2b16aa599921f01841">  129</a></span>&#160;<span class="preprocessor">#define G_VTX           4</span></div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aaea76ff589bc8c1173db1b801549ed53">  130</a></span>&#160;<span class="preprocessor">#define G_RESERVED1     5   </span><span class="comment">/* not implemeted */</span><span class="preprocessor"></span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1f847320ae413fa9dcb1deb4e06bcf76">  131</a></span>&#160;<span class="preprocessor">#define G_DL            6</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5548549b410cf1dcf69f7f937992617e">  132</a></span>&#160;<span class="preprocessor">#define G_RESERVED2     7   </span><span class="comment">/* not implemeted */</span><span class="preprocessor"></span></div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a34ae0647408a899cc123f19e814ba93b">  133</a></span>&#160;<span class="preprocessor">#define G_RESERVED3     8   </span><span class="comment">/* not implemeted */</span><span class="preprocessor"></span></div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9447f9ec0c3590d5816bd5f6c40caf20">  134</a></span>&#160;<span class="preprocessor">#define G_SPRITE2D_BASE     9   </span><span class="comment">/* sprite command */</span><span class="preprocessor"></span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/* IMMEDIATE commands: */</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a4830e7b4f53ebe6b2fc7d52dc1cc37bd">  137</a></span>&#160;<span class="preprocessor">#define G_IMMFIRST      -65</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a104b9696ec80d017ebb7bbe67f115135">  138</a></span>&#160;<span class="preprocessor">#define G_TRI1          (G_IMMFIRST-0)</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1a1b5337222f6c5ddd4b5fe01b16c2e2">  139</a></span>&#160;<span class="preprocessor">#define G_CULLDL        (G_IMMFIRST-1)</span></div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abb178917fa520ecaedb1fcaf0c583beb">  140</a></span>&#160;<span class="preprocessor">#define G_POPMTX        (G_IMMFIRST-2)</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac2d3b2f951808feafc7408c860fdee26">  141</a></span>&#160;<span class="preprocessor">#define G_MOVEWORD      (G_IMMFIRST-3)</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6df1ce62bd5ac4c3177dccddc629008e">  142</a></span>&#160;<span class="preprocessor">#define G_TEXTURE       (G_IMMFIRST-4)</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a686c0fa47101974e40ae8e9dae240426">  143</a></span>&#160;<span class="preprocessor">#define G_SETOTHERMODE_H    (G_IMMFIRST-5)</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa17cd3b921d072c2844f1d43cb6c9378">  144</a></span>&#160;<span class="preprocessor">#define G_SETOTHERMODE_L    (G_IMMFIRST-6)</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2ff39dc87a1227f4c0715a8fd1333076">  145</a></span>&#160;<span class="preprocessor">#define G_ENDDL         (G_IMMFIRST-7)</span></div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2e8f16cd64b2d0fddd29c2fcf1c07b8a">  146</a></span>&#160;<span class="preprocessor">#define G_SETGEOMETRYMODE   (G_IMMFIRST-8)</span></div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a97a83c9ed6a784f7adb172c5de510ee4">  147</a></span>&#160;<span class="preprocessor">#define G_CLEARGEOMETRYMODE (G_IMMFIRST-9)</span></div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a496d9c1f100798d898702116616f99b1">  148</a></span>&#160;<span class="preprocessor">#define G_LINE3D        (G_IMMFIRST-10)</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0aebbc27f4c7b72d120c29fed275cf21">  149</a></span>&#160;<span class="preprocessor">#define G_RDPHALF_1     (G_IMMFIRST-11)</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a82ac88435e5306144b9efff2e98cca83">  150</a></span>&#160;<span class="preprocessor">#define G_RDPHALF_2     (G_IMMFIRST-12)</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#if (defined(F3DEX_GBI)||defined(F3DLP_GBI))</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#  define G_MODIFYVTX       (G_IMMFIRST-13)</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#  define G_TRI2        (G_IMMFIRST-14)</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#  define G_BRANCH_Z        (G_IMMFIRST-15)</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#  define G_LOAD_UCODE      (G_IMMFIRST-16)</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a48d0d4a93d945d360e928f1bef7187ae">  157</a></span>&#160;<span class="preprocessor">#  define G_RDPHALF_CONT    (G_IMMFIRST-13)</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">/* We are overloading 2 of the immediate commands</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">   to keep the byte alignment of dmem the same */</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#afc9dd2eec947a5fa7d52adf95389ffb7">  163</a></span>&#160;<span class="preprocessor">#define G_SPRITE2D_SCALEFLIP    (G_IMMFIRST-1)</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5f07fabaa404f273d7ccb3dc80a5fce7">  164</a></span>&#160;<span class="preprocessor">#define G_SPRITE2D_DRAW         (G_IMMFIRST-2)</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/* RDP commands: */</span></div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7100e25a8e77ef5f180cbcb92b6f238c">  167</a></span>&#160;<span class="preprocessor">#define G_NOOP          0xc0    </span><span class="comment">/*   0 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/* RDP commands: */</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a34e1234d6dfe391cd01e07e99f3311fc">  172</a></span>&#160;<span class="preprocessor">#define G_SETCIMG       0xff    </span><span class="comment">/*  -1 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a10bfe07b8fd982913cea501e69dcb520">  173</a></span>&#160;<span class="preprocessor">#define G_SETZIMG       0xfe    </span><span class="comment">/*  -2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0b93fbcb08ab4db83e721801c09d0f27">  174</a></span>&#160;<span class="preprocessor">#define G_SETTIMG       0xfd    </span><span class="comment">/*  -3 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a834fc99d75ed7048ecb6b53e998bb524">  175</a></span>&#160;<span class="preprocessor">#define G_SETCOMBINE        0xfc    </span><span class="comment">/*  -4 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a69b9b7c84601c929d4cbc30ce14430c8">  176</a></span>&#160;<span class="preprocessor">#define G_SETENVCOLOR       0xfb    </span><span class="comment">/*  -5 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1ec26b1755e6e745b0e82ef1d2645ad1">  177</a></span>&#160;<span class="preprocessor">#define G_SETPRIMCOLOR      0xfa    </span><span class="comment">/*  -6 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a74120648bbc544af283586396d08eca5">  178</a></span>&#160;<span class="preprocessor">#define G_SETBLENDCOLOR     0xf9    </span><span class="comment">/*  -7 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab46aaa99178380b3c0bc1b436ce33d47">  179</a></span>&#160;<span class="preprocessor">#define G_SETFOGCOLOR       0xf8    </span><span class="comment">/*  -8 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a99c852bc8ca309b9358651f82f5458ae">  180</a></span>&#160;<span class="preprocessor">#define G_SETFILLCOLOR      0xf7    </span><span class="comment">/*  -9 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a157be4edc1ac8d1ce218cf2536ec7baa">  181</a></span>&#160;<span class="preprocessor">#define G_FILLRECT      0xf6    </span><span class="comment">/* -10 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a275b49d84d345fd40a567313cfcb3593">  182</a></span>&#160;<span class="preprocessor">#define G_SETTILE       0xf5    </span><span class="comment">/* -11 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a099c98c4928beb20a9690004a8de8959">  183</a></span>&#160;<span class="preprocessor">#define G_LOADTILE      0xf4    </span><span class="comment">/* -12 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6e29d0873ee4b048bb3eb896691c31c3">  184</a></span>&#160;<span class="preprocessor">#define G_LOADBLOCK     0xf3    </span><span class="comment">/* -13 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7b35ceabc404f4291654f8679dfc0e07">  185</a></span>&#160;<span class="preprocessor">#define G_SETTILESIZE       0xf2    </span><span class="comment">/* -14 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9d3d9fe37acf57c95aadfb96dea4267e">  186</a></span>&#160;<span class="preprocessor">#define G_LOADTLUT      0xf0    </span><span class="comment">/* -16 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6582e6747b0468c503e6c555e20a312c">  187</a></span>&#160;<span class="preprocessor">#define G_RDPSETOTHERMODE   0xef    </span><span class="comment">/* -17 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a71a10cc4a2fe3e9fb2fcdb80894fb5b3">  188</a></span>&#160;<span class="preprocessor">#define G_SETPRIMDEPTH      0xee    </span><span class="comment">/* -18 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af0e1b2db9ec36b6ba6612ab1e82a7e47">  189</a></span>&#160;<span class="preprocessor">#define G_SETSCISSOR        0xed    </span><span class="comment">/* -19 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a07a110971ca83f6013e4cc869e2c6dcf">  190</a></span>&#160;<span class="preprocessor">#define G_SETCONVERT        0xec    </span><span class="comment">/* -20 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a99f9de2216874d4b94e6508d4558cc70">  191</a></span>&#160;<span class="preprocessor">#define G_SETKEYR       0xeb    </span><span class="comment">/* -21 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9a53dce12d59201273fe9c7143255226">  192</a></span>&#160;<span class="preprocessor">#define G_SETKEYGB      0xea    </span><span class="comment">/* -22 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aebda39b53383d24ce68b268aed04b2ee">  193</a></span>&#160;<span class="preprocessor">#define G_RDPFULLSYNC       0xe9    </span><span class="comment">/* -23 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#adc729bde85a0a2d425343de67644801e">  194</a></span>&#160;<span class="preprocessor">#define G_RDPTILESYNC       0xe8    </span><span class="comment">/* -24 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a17bd80627c3cb558f868cc09a7eb108c">  195</a></span>&#160;<span class="preprocessor">#define G_RDPPIPESYNC       0xe7    </span><span class="comment">/* -25 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0ce9de279bff3621c8146bfdae5ef668">  196</a></span>&#160;<span class="preprocessor">#define G_RDPLOADSYNC       0xe6    </span><span class="comment">/* -26 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a610f9578314a09ba40049c53c4cce7de">  197</a></span>&#160;<span class="preprocessor">#define G_TEXRECTFLIP       0xe5    </span><span class="comment">/* -27 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9f9d2a2491a25c6c4c19610051e1c5c4">  198</a></span>&#160;<span class="preprocessor">#define G_TEXRECT       0xe4    </span><span class="comment">/* -28 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/* </span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"> * The following commands are the &quot;generated&quot; RDP commands; the user</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"> * never sees them, the RSP microcode generates them.</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"> * The layout of the bits is magical, to save work in the ucode.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"> * These id&#39;s are -56, -52, -54, -50, -55, -51, -53, -49, ...</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"> *                                 edge, shade, texture, zbuff bits:  estz</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2d38cd1a7102291aefcfb07e36105c9e">  209</a></span>&#160;<span class="preprocessor">#define G_TRI_FILL      0xc8 </span><span class="comment">/* fill triangle:            11001000 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad8e89681bfa14a0d7159b8e1797a2bc6">  210</a></span>&#160;<span class="preprocessor">#define G_TRI_SHADE     0xcc </span><span class="comment">/* shade triangle:           11001100 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aafb3c6de9f77428632906934da1bd540">  211</a></span>&#160;<span class="preprocessor">#define G_TRI_TXTR      0xca </span><span class="comment">/* texture triangle:         11001010 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7e88edf8b598306c9a46a81ca1c332c1">  212</a></span>&#160;<span class="preprocessor">#define G_TRI_SHADE_TXTR    0xce </span><span class="comment">/* shade, texture triangle:  11001110 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7907da3e0b1c7237361dff830e33ace1">  213</a></span>&#160;<span class="preprocessor">#define G_TRI_FILL_ZBUFF    0xc9 </span><span class="comment">/* fill, zbuff triangle:     11001001 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a216aea2cdfaeaabcf8d422d3b30323fb">  214</a></span>&#160;<span class="preprocessor">#define G_TRI_SHADE_ZBUFF   0xcd </span><span class="comment">/* shade, zbuff triangle:    11001101 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a502edfb99cf74becf6d41a5f2ef62176">  215</a></span>&#160;<span class="preprocessor">#define G_TRI_TXTR_ZBUFF    0xcb </span><span class="comment">/* texture, zbuff triangle:  11001011 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a18243e8f39ec71fc38bc8228fe8cefaf">  216</a></span>&#160;<span class="preprocessor">#define G_TRI_SHADE_TXTR_ZBUFF  0xcf </span><span class="comment">/* shade, txtr, zbuff trngl: 11001111 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"> * A TRI_FILL triangle is just the edges. You need to set the DP</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"> * to use primcolor, in order to see anything. (it is NOT a triangle</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"> * that gets rendered in &#39;fill mode&#39;. Triangles can&#39;t be rendered</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"> * in &#39;fill mode&#39;)</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"> * A TRI_SHADE is a gouraud triangle that has colors interpolated.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"> * Flat-shaded triangles (from the software) are still gouraud shaded,</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"> * it&#39;s just the colors are all the same and the deltas are 0.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"> * Other triangle types, and combinations are more obvious.</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/* masks to build RDP triangle commands: */</span></div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a923288e3e6cd5fd538d32cc1a886466b">  232</a></span>&#160;<span class="preprocessor">#define G_RDP_TRI_FILL_MASK 0x08</span></div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0f7cfba12f89f892a473b6b2ebb6fb20">  233</a></span>&#160;<span class="preprocessor">#define G_RDP_TRI_SHADE_MASK    0x04</span></div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1ab951cce85268c9988b6df6399f5924">  234</a></span>&#160;<span class="preprocessor">#define G_RDP_TRI_TXTR_MASK 0x02        </span></div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0b8bd3fd454caaee5e8a7804ee46cb5b">  235</a></span>&#160;<span class="preprocessor">#define G_RDP_TRI_ZBUFF_MASK    0x01        </span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"> * HACK:</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"> * This is a dreadful hack. For version 1.0 hardware, there are still</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"> * some &#39;bowtie&#39; hangs. This parameter can be increased to avoid</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"> * the hangs. Every increase of 4 chops one scanline off of every</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"> * triangle. Values of 4,8,12 should be sufficient to avoid any</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"> * bowtie hang.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"> * Change this value, then recompile ALL of your program (including static</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"> * display lists!)</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"> * THIS WILL BE REMOVED FOR HARDWARE VERSION 2.0!</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9375c2fc1e5370d91c65aeb5a3576439">  250</a></span>&#160;<span class="preprocessor">#define BOWTIE_VAL  0</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">/* gets added to RDP command, in order to test for addres fixup: */</span></div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a25c8ec615b0b7fd0b4a0100f47432f55">  254</a></span>&#160;<span class="preprocessor">#define G_RDP_ADDR_FIXUP    3   </span><span class="comment">/* |RDP cmds| &lt;= this, do addr fixup */</span><span class="preprocessor"></span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">#ifdef _LANGUAGE_ASSEMBLY</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#define G_RDP_TEXRECT_CHECK ((-1*G_TEXRECTFLIP)&amp; 0xff)</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">/* macros for command parsing: */</span></div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abfc3aaacddd392fc50af3cbe49ac7a6d">  260</a></span>&#160;<span class="preprocessor">#define GDMACMD(x)      (x)</span></div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#acba89c0fa63730baa8c756bcf973504e">  261</a></span>&#160;<span class="preprocessor">#define GIMMCMD(x)      (G_IMMFIRST-(x))</span></div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9d0ebf5ff5bdea078d6af41f3023a9d8">  262</a></span>&#160;<span class="preprocessor">#define GRDPCMD(x)      (0xff-(x))</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a652a753c95d3024eba3ce9b1988a20db">  264</a></span>&#160;<span class="preprocessor">#define G_DMACMDSIZ     128</span></div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2a23fc28ba59b92fceac22758de52476">  265</a></span>&#160;<span class="preprocessor">#define G_IMMCMDSIZ     64</span></div><div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a07e498ce69bb4d53bdd42fbcd9d9a055">  266</a></span>&#160;<span class="preprocessor">#define G_RDPCMDSIZ     64</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"> * Coordinate shift values, number of bits of fraction</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a98eac291530083b63663c72bb361c6df">  271</a></span>&#160;<span class="preprocessor">#define G_TEXTURE_IMAGE_FRAC    2</span></div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a518d24dad427d5241789293a7ddd0c3a">  272</a></span>&#160;<span class="preprocessor">#define G_TEXTURE_SCALE_FRAC    16</span></div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae29109b9b3c7bbf773d2048ac6c5e4de">  273</a></span>&#160;<span class="preprocessor">#define G_SCALE_FRAC        8</span></div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a150a99beb116791872d0262096d22a5d">  274</a></span>&#160;<span class="preprocessor">#define G_ROTATE_FRAC       16</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"> * Parameters to graphics commands</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"> * Data packing macros</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"> * Maximum z-buffer value, used to initialize the z-buffer.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> * Note : this number is NOT the viewport z-scale constant.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"> * See the comment next to G_MAXZ for more info.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a369fc7032ddc670c8145cb0509354ca9">  289</a></span>&#160;<span class="preprocessor">#define G_MAXFBZ        0x3fff  </span><span class="comment">/* 3b exp, 11b mantissa */</span><span class="preprocessor"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a776549fbdd81d7644b4d8c3549f5e613">  291</a></span>&#160;<span class="preprocessor">#define GPACK_RGBA5551(r, g, b, a)  ((((r)&lt;&lt;8) &amp; 0xf800) |      \</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor">                     (((g)&lt;&lt;3) &amp; 0x7c0) |       \</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">                     (((b)&gt;&gt;2) &amp; 0x3e) | ((a) &amp; 0x1))</span></div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6abe707a72da9fe6fe95a5ca8871a869">  294</a></span>&#160;<span class="preprocessor">#define GPACK_ZDZ(z, dz)        ((z) &lt;&lt; 2 | (dz))</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"> * G_MTX: parameter flags</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor"># define G_MTX_MODELVIEW    0x00    </span><span class="comment">/* matrix types */</span><span class="preprocessor"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor"># define G_MTX_PROJECTION   0x04</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor"># define G_MTX_MUL      0x00    </span><span class="comment">/* concat or load */</span><span class="preprocessor"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor"># define G_MTX_LOAD     0x02</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor"># define G_MTX_NOPUSH       0x00    </span><span class="comment">/* push or not */</span><span class="preprocessor"></span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="preprocessor"># define G_MTX_PUSH     0x01</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a4c9589710f911ec2c38104f51a68a8aa">  307</a></span>&#160;<span class="preprocessor"># define G_MTX_MODELVIEW    0x00    </span><span class="comment">/* matrix types */</span><span class="preprocessor"></span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a158b3a6e36924769f7dff7f188b46b63">  308</a></span>&#160;<span class="preprocessor"># define G_MTX_PROJECTION   0x01</span></div><div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a47a812d4ce6705e0dee289707f18f693">  309</a></span>&#160;<span class="preprocessor"># define G_MTX_MUL      0x00    </span><span class="comment">/* concat or load */</span><span class="preprocessor"></span></div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9fbb8b7e0e1a66c5399ad158d7a219cd">  310</a></span>&#160;<span class="preprocessor"># define G_MTX_LOAD     0x02</span></div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a063f7fcd1dfe2d7c199dad97eea7cc97">  311</a></span>&#160;<span class="preprocessor"># define G_MTX_NOPUSH       0x00    </span><span class="comment">/* push or not */</span><span class="preprocessor"></span></div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af260746aec061e8a35a297e2a0e90eaa">  312</a></span>&#160;<span class="preprocessor"># define G_MTX_PUSH     0x04</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment"> * flags for G_SETGEOMETRYMODE</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"> * (this rendering state is maintained in RSP)</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"> * DO NOT USE THE LOW 8 BITS OF GEOMETRYMODE:</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"> * The weird bit-ordering is for the micro-code: the lower byte</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> * can be OR&#39;d in with G_TRI_SHADE (11001100) to construct </span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"> * the triangle command directly. Don&#39;t break it...</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> * DO NOT USE THE HIGH 8 BITS OF GEOMETRYMODE:</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> * The high byte is OR&#39;d with 0x703 to form the clip code mask.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> * If it is set to 0x04, this will cause near clipping to occur.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> * If it is zero, near clipping will not occur.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> * Further explanation:</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> * G_SHADE is necessary in order to see the color that you passed</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"> * down with the vertex. If G_SHADE isn&#39;t set, you need to set the DP</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"> * appropriately and use primcolor to see anything.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"> * G_SHADING_SMOOTH enabled means use all 3 colors of the triangle.</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"> * If it is not set, then do &#39;flat shading&#39;, where only one vertex color </span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"> * is used (and all 3 vertices are set to that same color by the ucode)</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"> * See the man page for gSP1Triangle().</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad42a5510452b1110734f7374e78c9dc6">  340</a></span>&#160;<span class="preprocessor">#define G_ZBUFFER       0x00000001</span></div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1adee9ed7796d115c07cf288130c8795">  341</a></span>&#160;<span class="preprocessor">#define G_SHADE         0x00000004  </span><span class="comment">/* enable Gouraud interp */</span><span class="preprocessor"></span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">/* rest of low byte reserved for setup ucode */</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor"># define G_TEXTURE_ENABLE   0x00000000  </span><span class="comment">/* Ignored               */</span><span class="preprocessor"></span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor"># define G_SHADING_SMOOTH   0x00200000  </span><span class="comment">/* flat or smooth shaded */</span><span class="preprocessor"></span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor"># define G_CULL_FRONT       0x00000200</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor"># define G_CULL_BACK        0x00000400</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor"># define G_CULL_BOTH        0x00000600  </span><span class="comment">/* To make code cleaner */</span><span class="preprocessor"></span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab71c85be0f7512058656c32405ff0a13">  350</a></span>&#160;<span class="preprocessor"># define G_TEXTURE_ENABLE   0x00000002  </span><span class="comment">/* Microcode use only */</span><span class="preprocessor"></span></div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a4852da1637d1a485912732ce54324d8e">  351</a></span>&#160;<span class="preprocessor"># define G_SHADING_SMOOTH   0x00000200  </span><span class="comment">/* flat or smooth shaded */</span><span class="preprocessor"></span></div><div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6714bce91288289b56b36a5350246d4d">  352</a></span>&#160;<span class="preprocessor"># define G_CULL_FRONT       0x00001000</span></div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1d9c1bb13064e0e1726ed802cfb2697a">  353</a></span>&#160;<span class="preprocessor"># define G_CULL_BACK        0x00002000</span></div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a93775e74bfd73140383c9da230b1b4be">  354</a></span>&#160;<span class="preprocessor"># define G_CULL_BOTH        0x00003000  </span><span class="comment">/* To make code cleaner */</span><span class="preprocessor"></span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a16fffa8f912a5d9c5788fc9f0d045c10">  356</a></span>&#160;<span class="preprocessor">#define G_FOG           0x00010000</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ace7a0e559b5d01f76f0481a2c23ba2e1">  357</a></span>&#160;<span class="preprocessor">#define G_LIGHTING      0x00020000</span></div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a98768fad3b8045eac31defbe6e1fcfcf">  358</a></span>&#160;<span class="preprocessor">#define G_TEXTURE_GEN       0x00040000</span></div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a825fb11a7d435dcac8de1e2847ea6373">  359</a></span>&#160;<span class="preprocessor">#define G_TEXTURE_GEN_LINEAR    0x00080000</span></div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aae08d219e78cb32cc36895fd21179788">  360</a></span>&#160;<span class="preprocessor">#define G_LOD           0x00100000  </span><span class="comment">/* NOT IMPLEMENTED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="preprocessor">#if (defined(F3DEX_GBI)||defined(F3DLP_GBI))</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor"># define G_CLIPPING     0x00800000</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abf67e0d2fab448bee1215245654ef01f">  364</a></span>&#160;<span class="preprocessor"># define G_CLIPPING     0x00000000</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">#ifdef _LANGUAGE_ASSEMBLY</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">#define G_FOG_H         (G_FOG/0x10000)</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">#define G_LIGHTING_H        (G_LIGHTING/0x10000)</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="preprocessor">#define G_TEXTURE_GEN_H     (G_TEXTURE_GEN/0x10000)</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">#define G_TEXTURE_GEN_LINEAR_H  (G_TEXTURE_GEN_LINEAR/0x10000)</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">#define G_LOD_H         (G_LOD/0x10000) </span><span class="comment">/* NOT IMPLEMENTED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#if (defined(F3DEX_GBI)||defined(F3DLP_GBI))</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">#  define G_CLIPPING_H      (G_CLIPPING/0x10000)</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">/* Need these defined for Sprite Microcode */</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="preprocessor">#ifdef _LANGUAGE_ASSEMBLY</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">#define G_TX_LOADTILE   7</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">#define G_TX_RENDERTILE 0</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">#define G_TX_NOMIRROR   0</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor">#define G_TX_WRAP   0</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#define G_TX_MIRROR 0x1</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">#define G_TX_CLAMP  0x2</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#define G_TX_NOMASK 0</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">#define G_TX_NOLOD  0</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"> * G_SETIMG fmt: set image formats</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac8b0546f9482f12ed55f4b3cb1243a8c">  394</a></span>&#160;<span class="preprocessor">#define G_IM_FMT_RGBA   0</span></div><div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a202c6e4cde161dd1e73b9c6e5c756b74">  395</a></span>&#160;<span class="preprocessor">#define G_IM_FMT_YUV    1</span></div><div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#acc69043726595ba2648f986ec6469146">  396</a></span>&#160;<span class="preprocessor">#define G_IM_FMT_CI 2</span></div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad93714d08704506093df83085fb2c860">  397</a></span>&#160;<span class="preprocessor">#define G_IM_FMT_IA 3</span></div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a97f055ec8e97dbb2dcd28c7333947c10">  398</a></span>&#160;<span class="preprocessor">#define G_IM_FMT_I  4</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"> * G_SETIMG siz: set image pixel size</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aac5925491dae1efc6aad69bd45763158">  403</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_4b 0</span></div><div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a16bafda960061581ce5b29249d021c8a">  404</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_8b 1</span></div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad5e7c4c4dae792b27dd18c69f0ed550a">  405</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_16b    2</span></div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9a1b97c863e6db1926d059077b23f640">  406</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_32b    3</span></div><div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a685903656cf8ea99e0c7624de6b65c48">  407</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_DD 5</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a84745cdf8b4c4d0d4c9f424c00b3027b">  409</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_4b_BYTES       0</span></div><div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa4991b2993ae45af009f634b6ffe1b71">  410</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_4b_TILE_BYTES  G_IM_SIZ_4b_BYTES</span></div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9d4e7b4c356079f238a5eb4f3beca775">  411</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_4b_LINE_BYTES  G_IM_SIZ_4b_BYTES</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab91621f2f386fc4b5062fe490a3d7250">  413</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_8b_BYTES       1</span></div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac5e8d4ca7dce18177d24930ba0c2aee8">  414</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_8b_TILE_BYTES  G_IM_SIZ_8b_BYTES</span></div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a78fee8e3af9dc437da98f41aa7673992">  415</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_8b_LINE_BYTES  G_IM_SIZ_8b_BYTES</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a64c02edff108ea8a78cd2f936573edc3">  417</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_16b_BYTES      2</span></div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab7d123b5b4997287a5ae09a5dc8cfd8c">  418</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_16b_TILE_BYTES G_IM_SIZ_16b_BYTES</span></div><div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7a36dce33a4e9bded99735bead8ecd13">  419</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_16b_LINE_BYTES G_IM_SIZ_16b_BYTES</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5d3fe73ed332f3f20ba635ff4e48a6d8">  421</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_32b_BYTES      4</span></div><div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a092c32ec7b241f8273e4949b68b3cb38">  422</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_32b_TILE_BYTES 2</span></div><div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac7c506c3b2fc88079cc65079903fe04e">  423</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_32b_LINE_BYTES 2</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a61a934de3d5d312f8f6d592c5cdca3ee">  425</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_4b_LOAD_BLOCK  G_IM_SIZ_16b</span></div><div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae6718046df193cd95ac969eec7bea346">  426</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_8b_LOAD_BLOCK  G_IM_SIZ_16b</span></div><div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a36ca70ac9e0c7ccd2b13bb6d1dfa446a">  427</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_16b_LOAD_BLOCK G_IM_SIZ_16b</span></div><div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0a64d4b6d206fd0b7a166b99ade52664">  428</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_32b_LOAD_BLOCK G_IM_SIZ_32b</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5a01481edc91692ab96ac968fde4ef58">  430</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_4b_SHIFT  2</span></div><div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad970c267c8691d68c0e12ea64f5771a7">  431</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_8b_SHIFT  1</span></div><div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a084b457bf168e3278cb9b7f0eb295fa2">  432</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_16b_SHIFT 0</span></div><div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad42e690d0acc04916581c5f6d9f7f4eb">  433</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_32b_SHIFT 0</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3cff531b9cf31c31cfbe657e4d7eb2a3">  435</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_4b_INCR  3</span></div><div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a63425a4d5540192cd39bd109c8e81768">  436</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_8b_INCR  1</span></div><div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a369f29bdcdabe02eaf10f0166bfba1e8">  437</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_16b_INCR 0</span></div><div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a50f0103faad2f0100e8be45f95e31905">  438</a></span>&#160;<span class="preprocessor">#define G_IM_SIZ_32b_INCR 0</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment"> * G_SETCOMBINE: color combine modes</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">/* Color combiner constants: */</span></div><div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abf97a0611f936633d97a41e801efabdf">  444</a></span>&#160;<span class="preprocessor">#define G_CCMUX_COMBINED    0</span></div><div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5e9b7e366796df9871b9b8c5d1f9e1f2">  445</a></span>&#160;<span class="preprocessor">#define G_CCMUX_TEXEL0      1</span></div><div class="line"><a name="l00446"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a272b96158bac1fe360f26197ea55097b">  446</a></span>&#160;<span class="preprocessor">#define G_CCMUX_TEXEL1      2</span></div><div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0210ce50c12304cc74dba0f53e9e8ff5">  447</a></span>&#160;<span class="preprocessor">#define G_CCMUX_PRIMITIVE   3</span></div><div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#adf66bbf222c7ce3e907a0018dd50b307">  448</a></span>&#160;<span class="preprocessor">#define G_CCMUX_SHADE       4</span></div><div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a188a26d8bc83470c66a666ae4f59908d">  449</a></span>&#160;<span class="preprocessor">#define G_CCMUX_ENVIRONMENT 5</span></div><div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac336b6f4fac033d7f665ccf8a5ba5d47">  450</a></span>&#160;<span class="preprocessor">#define G_CCMUX_CENTER      6</span></div><div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae759d81ff205e7bb7cd36d82b2a8896f">  451</a></span>&#160;<span class="preprocessor">#define G_CCMUX_SCALE       6</span></div><div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac901bf02b4a16986e8b624e9930bf126">  452</a></span>&#160;<span class="preprocessor">#define G_CCMUX_COMBINED_ALPHA  7</span></div><div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae77bac17d92602acd6b1b0239d882714">  453</a></span>&#160;<span class="preprocessor">#define G_CCMUX_TEXEL0_ALPHA    8</span></div><div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6af1273dea70633dc135a659ed4a5e39">  454</a></span>&#160;<span class="preprocessor">#define G_CCMUX_TEXEL1_ALPHA    9</span></div><div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a229df0f0b9c7db3f70f72b293594f693">  455</a></span>&#160;<span class="preprocessor">#define G_CCMUX_PRIMITIVE_ALPHA 10</span></div><div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8915ef5818bdcde57349ca226e17bf9f">  456</a></span>&#160;<span class="preprocessor">#define G_CCMUX_SHADE_ALPHA 11</span></div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3cf41ea1b671e66b6c5f7f31dabf5da3">  457</a></span>&#160;<span class="preprocessor">#define G_CCMUX_ENV_ALPHA   12</span></div><div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aeaf7ea8e67d090c253082aab24973559">  458</a></span>&#160;<span class="preprocessor">#define G_CCMUX_LOD_FRACTION    13</span></div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7d2dd7210201c4fc74ab65cbe41c28e9">  459</a></span>&#160;<span class="preprocessor">#define G_CCMUX_PRIM_LOD_FRAC   14</span></div><div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a339bacac1bf962f24288aff11fb038f6">  460</a></span>&#160;<span class="preprocessor">#define G_CCMUX_NOISE       7</span></div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a023e79c98f758815fb3a3e41f3041916">  461</a></span>&#160;<span class="preprocessor">#define G_CCMUX_K4      7</span></div><div class="line"><a name="l00462"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3beddd8e5a7ca4f49354896656607584">  462</a></span>&#160;<span class="preprocessor">#define G_CCMUX_K5      15</span></div><div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7c5bff68b1aa50deed8f69e843425aa2">  463</a></span>&#160;<span class="preprocessor">#define G_CCMUX_1       6</span></div><div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a94236e72ec474f0bd1304bb6e49cd767">  464</a></span>&#160;<span class="preprocessor">#define G_CCMUX_0       31</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">/* Alpha combiner constants: */</span></div><div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6ade5e60db994cbb39c4fa6a9819e7fa">  467</a></span>&#160;<span class="preprocessor">#define G_ACMUX_COMBINED    0</span></div><div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a4a152fea17712701d7df4d3b819b14b1">  468</a></span>&#160;<span class="preprocessor">#define G_ACMUX_TEXEL0      1</span></div><div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad78b57fd4bd1053a84abcb4b92ae352f">  469</a></span>&#160;<span class="preprocessor">#define G_ACMUX_TEXEL1      2</span></div><div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aeace64c868122c8f13fbb24e36b41059">  470</a></span>&#160;<span class="preprocessor">#define G_ACMUX_PRIMITIVE   3</span></div><div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a86f4b2a49b78cbfa2f1782177e7dafe0">  471</a></span>&#160;<span class="preprocessor">#define G_ACMUX_SHADE       4</span></div><div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0c018a4b511b46236b2ccd9a5798f5c2">  472</a></span>&#160;<span class="preprocessor">#define G_ACMUX_ENVIRONMENT 5</span></div><div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a717a914ffe4c8476880ead708e771eb7">  473</a></span>&#160;<span class="preprocessor">#define G_ACMUX_LOD_FRACTION    0</span></div><div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a08beab2e1790d2571368b08cb1aba799">  474</a></span>&#160;<span class="preprocessor">#define G_ACMUX_PRIM_LOD_FRAC   6</span></div><div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a47944c8f4393195ec4a28680c06f1f46">  475</a></span>&#160;<span class="preprocessor">#define G_ACMUX_1       6</span></div><div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab5913c3031e258c412aa7bc39b1d36d6">  476</a></span>&#160;<span class="preprocessor">#define G_ACMUX_0       7</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">/* typical CC cycle 1 modes */</span></div><div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac5be40ed9565cfb811f392b4300cf022">  479</a></span>&#160;<span class="preprocessor">#define G_CC_PRIMITIVE      0, 0, 0, PRIMITIVE, 0, 0, 0, PRIMITIVE</span></div><div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ade5d23d9b4af596c713aed8b9d7f7ff7">  480</a></span>&#160;<span class="preprocessor">#define G_CC_SHADE      0, 0, 0, SHADE, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af4ca350056fb68e0331682164f7cddf6">  481</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEI      TEXEL0, 0, SHADE, 0, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae4a9361eec8b90bd63962d8aed9d87b0">  482</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEIA     TEXEL0, 0, SHADE, 0, TEXEL0, 0, SHADE, 0</span></div><div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a33416a3dc247e60e2dc3696fb33bee42">  483</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEIDECALA    TEXEL0, 0, SHADE, 0, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00484"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3c8c5e0cbc31a51d3696dba4707b9d76">  484</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGB    G_CC_MODULATEI</span></div><div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad92fd5b34c8720daee4bf405f45347f6">  485</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGBA   G_CC_MODULATEIA</span></div><div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5d07684939a7977ee6d23056bd53a742">  486</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGBDECALA  G_CC_MODULATEIDECALA</span></div><div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a97dfda5f935a8f4e9b86fe01e6837419">  487</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEI_PRIM TEXEL0, 0, PRIMITIVE, 0, 0, 0, 0, PRIMITIVE</span></div><div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5c1bcaeff6c73fcbb814766e9cdf3509">  488</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEIA_PRIM    TEXEL0, 0, PRIMITIVE, 0, TEXEL0, 0, PRIMITIVE, 0</span></div><div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a23254c344fe7f2ff88a6c4606e62d0c2">  489</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEIDECALA_PRIM   TEXEL0, 0, PRIMITIVE, 0, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00490"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a974b1967b85611d624dbde06c78f74a8">  490</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGB_PRIM   G_CC_MODULATEI_PRIM</span></div><div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1c9dccb5feb1576eab840ca241f21719">  491</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGBA_PRIM  G_CC_MODULATEIA_PRIM</span></div><div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1f5e311a5b2b5db5d54ffd9e7e6dcf87">  492</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGBDECALA_PRIM G_CC_MODULATEIDECALA_PRIM</span></div><div class="line"><a name="l00493"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad1ed16264f21ff4349626f64cee3253f">  493</a></span>&#160;<span class="preprocessor">#define G_CC_DECALRGB       0, 0, 0, TEXEL0, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af50a1f9714aa958904a9a5548db54b16">  494</a></span>&#160;<span class="preprocessor">#define G_CC_DECALRGBA      0, 0, 0, TEXEL0, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7a2635ac5542dac0175e46783c97c246">  495</a></span>&#160;<span class="preprocessor">#define G_CC_BLENDI     ENVIRONMENT, SHADE, TEXEL0, SHADE, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#afcbb04f02cb9424b52db79196ec4c738">  496</a></span>&#160;<span class="preprocessor">#define G_CC_BLENDIA        ENVIRONMENT, SHADE, TEXEL0, SHADE, TEXEL0, 0, SHADE, 0</span></div><div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abf7e9781ad0a1e2b3de84e0160f07f9b">  497</a></span>&#160;<span class="preprocessor">#define G_CC_BLENDIDECALA   ENVIRONMENT, SHADE, TEXEL0, SHADE, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aee7ba3f1a726539aa0814fb7f8d8b333">  498</a></span>&#160;<span class="preprocessor">#define G_CC_BLENDRGBA      TEXEL0, SHADE, TEXEL0_ALPHA, SHADE, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5ec6c6e307d3f69b3a7279a62f989631">  499</a></span>&#160;<span class="preprocessor">#define G_CC_BLENDRGBDECALA TEXEL0, SHADE, TEXEL0_ALPHA, SHADE, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00500"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a55c64c625e5288913718d7b78c9c8b34">  500</a></span>&#160;<span class="preprocessor">#define G_CC_ADDRGB     1, 0, TEXEL0, SHADE, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00501"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5d09efd65667a4d3c965a71dfe101d46">  501</a></span>&#160;<span class="preprocessor">#define G_CC_ADDRGBDECALA   1, 0, TEXEL0, SHADE, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a380d0a6fe34ad1c4948d7a9e922f36c4">  502</a></span>&#160;<span class="preprocessor">#define G_CC_REFLECTRGB     ENVIRONMENT, 0, TEXEL0, SHADE, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00503"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1823d0dd78110af5dadd7ddad8cdc3e5">  503</a></span>&#160;<span class="preprocessor">#define G_CC_REFLECTRGBDECALA   ENVIRONMENT, 0, TEXEL0, SHADE, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8f6ca5c38fff9986ad2602a6f23d1a8a">  504</a></span>&#160;<span class="preprocessor">#define G_CC_HILITERGB      PRIMITIVE, SHADE, TEXEL0, SHADE, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#acd170682e1a071148a643d8c42a44644">  505</a></span>&#160;<span class="preprocessor">#define G_CC_HILITERGBA     PRIMITIVE, SHADE, TEXEL0, SHADE, PRIMITIVE, SHADE, TEXEL0, SHADE</span></div><div class="line"><a name="l00506"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7b5aaadff036143e51869b318ea49842">  506</a></span>&#160;<span class="preprocessor">#define G_CC_HILITERGBDECALA    PRIMITIVE, SHADE, TEXEL0, SHADE, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00507"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8f95a1b7025ed153e57be979420e8576">  507</a></span>&#160;<span class="preprocessor">#define G_CC_SHADEDECALA    0, 0, 0, SHADE, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a066ab214af7a10fb6871311cbdae8a8d">  508</a></span>&#160;<span class="preprocessor">#define G_CC_BLENDPE        PRIMITIVE, ENVIRONMENT, TEXEL0, ENVIRONMENT, TEXEL0, 0, SHADE, 0</span></div><div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a840e7393cd3921d25fd14b922c296acd">  509</a></span>&#160;<span class="preprocessor">#define G_CC_BLENDPEDECALA  PRIMITIVE, ENVIRONMENT, TEXEL0, ENVIRONMENT, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">/* oddball modes */</span></div><div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a77d33ca83e67054f15d19106984213e9">  512</a></span>&#160;<span class="preprocessor">#define _G_CC_BLENDPE       ENVIRONMENT, PRIMITIVE, TEXEL0, PRIMITIVE, TEXEL0, 0, SHADE, 0</span></div><div class="line"><a name="l00513"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad66cd340da6cc749dac2f6cc95a19ffd">  513</a></span>&#160;<span class="preprocessor">#define _G_CC_BLENDPEDECALA ENVIRONMENT, PRIMITIVE, TEXEL0, PRIMITIVE, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a71e04174b870d288a3fae79167b860c5">  514</a></span>&#160;<span class="preprocessor">#define _G_CC_TWOCOLORTEX   PRIMITIVE, SHADE, TEXEL0, SHADE, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">/* used for 1-cycle sparse mip-maps, primitive color has color of lowest LOD */</span></div><div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af8e01100a18b7457c492d511df21c493">  516</a></span>&#160;<span class="preprocessor">#define _G_CC_SPARSEST      PRIMITIVE, TEXEL0, LOD_FRACTION, TEXEL0, PRIMITIVE, TEXEL0, LOD_FRACTION, TEXEL0</span></div><div class="line"><a name="l00517"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a563539f3e4c2cd592f4718e272409f85">  517</a></span>&#160;<span class="preprocessor">#define G_CC_TEMPLERP   TEXEL1, TEXEL0, PRIM_LOD_FRAC, TEXEL0, TEXEL1, TEXEL0, PRIM_LOD_FRAC, TEXEL0</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">/* typical CC cycle 1 modes, usually followed by other cycle 2 modes */</span></div><div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5a3f7283cadfce4b220208e8c3ac08ea">  520</a></span>&#160;<span class="preprocessor">#define G_CC_TRILERP        TEXEL1, TEXEL0, LOD_FRACTION, TEXEL0, TEXEL1, TEXEL0, LOD_FRACTION, TEXEL0</span></div><div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#accb0f3ce8f6cf766b17c1a95f0ed69ec">  521</a></span>&#160;<span class="preprocessor">#define G_CC_INTERFERENCE   TEXEL0, 0, TEXEL1, 0, TEXEL0, 0, TEXEL1, 0</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"> *  One-cycle color convert operation</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00526"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0fd0ef44647766cce4986d76f4b39304">  526</a></span>&#160;<span class="preprocessor">#define G_CC_1CYUV2RGB      TEXEL0, K4, K5, TEXEL0, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"> *  NOTE: YUV2RGB expects TF step1 color conversion to occur in 2nd clock.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"> * Therefore, CC looks for step1 results in TEXEL1</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aaee30ef81f8bff50b50d6b6e2d9d72f4">  532</a></span>&#160;<span class="preprocessor">#define G_CC_YUV2RGB        TEXEL1, K4, K5, TEXEL1, 0, 0, 0, 0</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">/* typical CC cycle 2 modes */</span></div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a056ce73a21544d8f406e8ee062156b73">  535</a></span>&#160;<span class="preprocessor">#define G_CC_PASS2      0, 0, 0, COMBINED, 0, 0, 0, COMBINED</span></div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a37181efe365dfbab9b578e4b108e25e7">  536</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEI2     COMBINED, 0, SHADE, 0, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ada6ca803fc13cd1f2e6ba825f4b2e6f4">  537</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEIA2    COMBINED, 0, SHADE, 0, COMBINED, 0, SHADE, 0</span></div><div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a4ad5d6e0a248e8338f2758d5ca497254">  538</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGB2   G_CC_MODULATEI2</span></div><div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a97c2572b295f2415737d88d233fda6a3">  539</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGBA2  G_CC_MODULATEIA2</span></div><div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a752ff4869e78bf00205b0c45b55de77c">  540</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEI_PRIM2    COMBINED, 0, PRIMITIVE, 0, 0, 0, 0, PRIMITIVE</span></div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab0bd6aada352bbfa20f02624e38c7df1">  541</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATEIA_PRIM2   COMBINED, 0, PRIMITIVE, 0, COMBINED, 0, PRIMITIVE, 0</span></div><div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0c0c457053f77169f12d7d6ecf0d334e">  542</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGB_PRIM2  G_CC_MODULATEI_PRIM2</span></div><div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8a37d1dfadb227f3451d9309bffe4562">  543</a></span>&#160;<span class="preprocessor">#define G_CC_MODULATERGBA_PRIM2 G_CC_MODULATEIA_PRIM2</span></div><div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2241b990c0212a75b0a698177a0bc34e">  544</a></span>&#160;<span class="preprocessor">#define G_CC_DECALRGB2      0, 0, 0, COMBINED, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"> * ?</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">#define G_CC_DECALRGBA2     COMBINED, SHADE, COMBINED_ALPHA, SHADE, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5ee04f9645d39f9f7b27a260175b51bd">  549</a></span>&#160;<span class="preprocessor">#define G_CC_BLENDI2        ENVIRONMENT, SHADE, COMBINED, SHADE, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a682ed58d52a980c7f3d171a5f7d1f994">  550</a></span>&#160;<span class="preprocessor">#define G_CC_BLENDIA2       ENVIRONMENT, SHADE, COMBINED, SHADE, COMBINED, 0, SHADE, 0</span></div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a75abea942da6f646cc9cad58f4609aef">  551</a></span>&#160;<span class="preprocessor">#define G_CC_CHROMA_KEY2    TEXEL0, CENTER, SCALE, 0, 0, 0, 0, 0</span></div><div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a68f8a65104d91a39c0a68e3772396739">  552</a></span>&#160;<span class="preprocessor">#define G_CC_HILITERGB2     ENVIRONMENT, COMBINED, TEXEL0, COMBINED, 0, 0, 0, SHADE</span></div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abdc53986d2b18994c89d03d58b6853c8">  553</a></span>&#160;<span class="preprocessor">#define G_CC_HILITERGBA2    ENVIRONMENT, COMBINED, TEXEL0, COMBINED, ENVIRONMENT, COMBINED, TEXEL0, COMBINED</span></div><div class="line"><a name="l00554"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#acb509f8f51997bd6e27d70b252184af1">  554</a></span>&#160;<span class="preprocessor">#define G_CC_HILITERGBDECALA2   ENVIRONMENT, COMBINED, TEXEL0, COMBINED, 0, 0, 0, TEXEL0</span></div><div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1b55b9cf952f6d28702403fbd70cae86">  555</a></span>&#160;<span class="preprocessor">#define G_CC_HILITERGBPASSA2    ENVIRONMENT, COMBINED, TEXEL0, COMBINED, 0, 0, 0, COMBINED</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"> * G_SETOTHERMODE_L sft: shift count</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6c1722fb937188cecfc68ef1d8b598c6">  560</a></span>&#160;<span class="preprocessor">#define G_MDSFT_ALPHACOMPARE        0</span></div><div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a95385179e3066d744982ef1ec265feb1">  561</a></span>&#160;<span class="preprocessor">#define G_MDSFT_ZSRCSEL         2</span></div><div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2b3ffe9c3ffb868b5cd75510d036664d">  562</a></span>&#160;<span class="preprocessor">#define G_MDSFT_RENDERMODE      3</span></div><div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a07f15e88043111b8cbaa299f3df917c7">  563</a></span>&#160;<span class="preprocessor">#define G_MDSFT_BLENDER         16</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment"> * G_SETOTHERMODE_H sft: shift count</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a35e7dca76e455b9951b0d9ec25617e73">  568</a></span>&#160;<span class="preprocessor">#define G_MDSFT_BLENDMASK       0   </span><span class="comment">/* unsupported */</span><span class="preprocessor"></span></div><div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a374a2477872a7fb6a7047fc72b5834ea">  569</a></span>&#160;<span class="preprocessor">#define G_MDSFT_ALPHADITHER     4</span></div><div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3b51968063524fdb69d6464262d87a15">  570</a></span>&#160;<span class="preprocessor">#define G_MDSFT_RGBDITHER       6</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a71161567b7d7c8b2d4b3568d47be907a">  572</a></span>&#160;<span class="preprocessor">#define G_MDSFT_COMBKEY         8</span></div><div class="line"><a name="l00573"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a986122a005dce3c88bf080f0b1886b31">  573</a></span>&#160;<span class="preprocessor">#define G_MDSFT_TEXTCONV        9</span></div><div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a38f0773bbf3d4ef17d46df6bda5395f0">  574</a></span>&#160;<span class="preprocessor">#define G_MDSFT_TEXTFILT        12</span></div><div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a63a192d4d2c6693901880a38c7b0d96a">  575</a></span>&#160;<span class="preprocessor">#define G_MDSFT_TEXTLUT         14</span></div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7dbafc69c2df5c127204a16813cf756d">  576</a></span>&#160;<span class="preprocessor">#define G_MDSFT_TEXTLOD         16</span></div><div class="line"><a name="l00577"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abe7168cd70f4dfb755f28af9861d2b11">  577</a></span>&#160;<span class="preprocessor">#define G_MDSFT_TEXTDETAIL      17</span></div><div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab540eba15fd211c2e9fe33dad84cad43">  578</a></span>&#160;<span class="preprocessor">#define G_MDSFT_TEXTPERSP       19</span></div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abd23aed7ec752a9534f73b907686c1d8">  579</a></span>&#160;<span class="preprocessor">#define G_MDSFT_CYCLETYPE       20</span></div><div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9b3a94c4f794a207649061fb54c2a183">  580</a></span>&#160;<span class="preprocessor">#define G_MDSFT_COLORDITHER     22  </span><span class="comment">/* unsupported in HW 2.0 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ace25f15ed52fc8bef0f0b0ea4580549f">  581</a></span>&#160;<span class="preprocessor">#define G_MDSFT_PIPELINE        23</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gPipelineMode */</span></div><div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a4c06bd7880d148586a0eafbbad3810bc">  584</a></span>&#160;<span class="preprocessor">#define G_PM_1PRIMITIVE     (1 &lt;&lt; G_MDSFT_PIPELINE)</span></div><div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5011086b9a8742437a883f182cb53cd6">  585</a></span>&#160;<span class="preprocessor">#define G_PM_NPRIMITIVE     (0 &lt;&lt; G_MDSFT_PIPELINE)</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetCycleType */</span></div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af6af2b00008694aba0321e4879d2e34b">  588</a></span>&#160;<span class="preprocessor">#define G_CYC_1CYCLE        (0 &lt;&lt; G_MDSFT_CYCLETYPE)</span></div><div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a77d384f8f483abdc84c15a3b40afaaff">  589</a></span>&#160;<span class="preprocessor">#define G_CYC_2CYCLE        (1 &lt;&lt; G_MDSFT_CYCLETYPE)</span></div><div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ade3d1937c33f3b3fcf34915b293d5c9b">  590</a></span>&#160;<span class="preprocessor">#define G_CYC_COPY      (2 &lt;&lt; G_MDSFT_CYCLETYPE)</span></div><div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a88ad36ff0c11d030c2c9c8844e6b972c">  591</a></span>&#160;<span class="preprocessor">#define G_CYC_FILL      (3 &lt;&lt; G_MDSFT_CYCLETYPE)</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetTexturePersp */</span></div><div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3871fa6c3f0a4010519593264ac495aa">  594</a></span>&#160;<span class="preprocessor">#define G_TP_NONE   (0 &lt;&lt; G_MDSFT_TEXTPERSP)</span></div><div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad7e352cf878143af5bc0086227e73366">  595</a></span>&#160;<span class="preprocessor">#define G_TP_PERSP  (1 &lt;&lt; G_MDSFT_TEXTPERSP)</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetTextureDetail */</span></div><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7d9a3dab1dec09fcd617fceefcb061b6">  598</a></span>&#160;<span class="preprocessor">#define G_TD_CLAMP  (0 &lt;&lt; G_MDSFT_TEXTDETAIL)</span></div><div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aae30afa596607594b5dd1d2ba41349a4">  599</a></span>&#160;<span class="preprocessor">#define G_TD_SHARPEN    (1 &lt;&lt; G_MDSFT_TEXTDETAIL)</span></div><div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7893c58c6859b530cd4e004787e3c565">  600</a></span>&#160;<span class="preprocessor">#define G_TD_DETAIL (2 &lt;&lt; G_MDSFT_TEXTDETAIL)</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetTextureLOD */</span></div><div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa51c0a95e98d681f7362de583c1dc80e">  603</a></span>&#160;<span class="preprocessor">#define G_TL_TILE   (0 &lt;&lt; G_MDSFT_TEXTLOD)</span></div><div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a507cba1778a5427ef654f373c7de78e2">  604</a></span>&#160;<span class="preprocessor">#define G_TL_LOD    (1 &lt;&lt; G_MDSFT_TEXTLOD)</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetTextureLUT */</span></div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a51bf723f01e21d63223ab47bb739ac53">  607</a></span>&#160;<span class="preprocessor">#define G_TT_NONE   (0 &lt;&lt; G_MDSFT_TEXTLUT)</span></div><div class="line"><a name="l00608"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3c25150f914e9e478597126d24c9d9fd">  608</a></span>&#160;<span class="preprocessor">#define G_TT_RGBA16 (2 &lt;&lt; G_MDSFT_TEXTLUT)</span></div><div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae6753c3c829460d22299b488e7c08423">  609</a></span>&#160;<span class="preprocessor">#define G_TT_IA16   (3 &lt;&lt; G_MDSFT_TEXTLUT)</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetTextureFilter */</span></div><div class="line"><a name="l00612"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7838d6b602ab3f0c233674db9a4f0fa3">  612</a></span>&#160;<span class="preprocessor">#define G_TF_POINT  (0 &lt;&lt; G_MDSFT_TEXTFILT)</span></div><div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab99b949dc1c3cf4fa0345cdef42ead55">  613</a></span>&#160;<span class="preprocessor">#define G_TF_AVERAGE    (3 &lt;&lt; G_MDSFT_TEXTFILT)</span></div><div class="line"><a name="l00614"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a61a72522a55da828e5536ebc2d5b7b48">  614</a></span>&#160;<span class="preprocessor">#define G_TF_BILERP (2 &lt;&lt; G_MDSFT_TEXTFILT)</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetTextureConvert */</span></div><div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0f1a30f3824299e1f597999829e902cd">  617</a></span>&#160;<span class="preprocessor">#define G_TC_CONV   (0 &lt;&lt; G_MDSFT_TEXTCONV)</span></div><div class="line"><a name="l00618"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af038a2172137b8178d5a36aff8cb0576">  618</a></span>&#160;<span class="preprocessor">#define G_TC_FILTCONV   (5 &lt;&lt; G_MDSFT_TEXTCONV)</span></div><div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0286e30874995a72aa59f713c33ceeb1">  619</a></span>&#160;<span class="preprocessor">#define G_TC_FILT   (6 &lt;&lt; G_MDSFT_TEXTCONV)</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetCombineKey */</span></div><div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9210e5d3098523d90c8f1d637660e6d8">  622</a></span>&#160;<span class="preprocessor">#define G_CK_NONE   (0 &lt;&lt; G_MDSFT_COMBKEY)</span></div><div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2a7783b0e0eb85a4e6fa8044ca81f244">  623</a></span>&#160;<span class="preprocessor">#define G_CK_KEY    (1 &lt;&lt; G_MDSFT_COMBKEY)</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetColorDither */</span></div><div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a325fbf1d3d97c2303936c90ca9b33e4e">  626</a></span>&#160;<span class="preprocessor">#define G_CD_MAGICSQ        (0 &lt;&lt; G_MDSFT_RGBDITHER)</span></div><div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a42cda5fca70bad056b359ecef303d6e1">  627</a></span>&#160;<span class="preprocessor">#define G_CD_BAYER      (1 &lt;&lt; G_MDSFT_RGBDITHER)</span></div><div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a34298152857c5fb01fd293786f41e2dc">  628</a></span>&#160;<span class="preprocessor">#define G_CD_NOISE      (2 &lt;&lt; G_MDSFT_RGBDITHER)</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2b5731d5a0925ef06cac4c98dbd8aa7f">  631</a></span>&#160;<span class="preprocessor">#define G_CD_DISABLE        (3 &lt;&lt; G_MDSFT_RGBDITHER)</span></div><div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a23ff065ccc946d64581db69722cee5a6">  632</a></span>&#160;<span class="preprocessor">#define G_CD_ENABLE     G_CD_NOISE  </span><span class="comment">/* HW 1.0 compatibility mode */</span><span class="preprocessor"></span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="preprocessor">#define G_CD_ENABLE     (1 &lt;&lt; G_MDSFT_COLORDITHER)</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="preprocessor">#define G_CD_DISABLE        (0 &lt;&lt; G_MDSFT_COLORDITHER)</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">/* G_SETOTHERMODE_H gSetAlphaDither */</span></div><div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6a3ceb4e99ceb298d27da735f6e95b35">  639</a></span>&#160;<span class="preprocessor">#define G_AD_PATTERN        (0 &lt;&lt; G_MDSFT_ALPHADITHER)</span></div><div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6e10949c4c846f74b32c366d92dd04b7">  640</a></span>&#160;<span class="preprocessor">#define G_AD_NOTPATTERN     (1 &lt;&lt; G_MDSFT_ALPHADITHER)</span></div><div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a192452784d5e574310ff7e006484ceb4">  641</a></span>&#160;<span class="preprocessor">#define G_AD_NOISE      (2 &lt;&lt; G_MDSFT_ALPHADITHER)</span></div><div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a46fa31e3b7072cd61694e0854f6c777a">  642</a></span>&#160;<span class="preprocessor">#define G_AD_DISABLE        (3 &lt;&lt; G_MDSFT_ALPHADITHER)</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">/* G_SETOTHERMODE_L gSetAlphaCompare */</span></div><div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a86a241c27e9e44562ccfc5bb55c0a5a0">  645</a></span>&#160;<span class="preprocessor">#define G_AC_NONE       (0 &lt;&lt; G_MDSFT_ALPHACOMPARE)</span></div><div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a31ebf8483530da5e549688fcceb3dd0f">  646</a></span>&#160;<span class="preprocessor">#define G_AC_THRESHOLD      (1 &lt;&lt; G_MDSFT_ALPHACOMPARE)</span></div><div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abe42dd6c4dfa46e6a3c1e01c97edb5a2">  647</a></span>&#160;<span class="preprocessor">#define G_AC_DITHER     (3 &lt;&lt; G_MDSFT_ALPHACOMPARE)</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">/* G_SETOTHERMODE_L gSetDepthSource */</span></div><div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8a65d1536aec162533d31e6173574dd2">  650</a></span>&#160;<span class="preprocessor">#define G_ZS_PIXEL      (0 &lt;&lt; G_MDSFT_ZSRCSEL)</span></div><div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6d1df4d820d404f470f55027fa8e6fe2">  651</a></span>&#160;<span class="preprocessor">#define G_ZS_PRIM       (1 &lt;&lt; G_MDSFT_ZSRCSEL)</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">/* G_SETOTHERMODE_L gSetRenderMode */</span></div><div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab57c1bf0dbe2215f407583c96dee344d">  654</a></span>&#160;<span class="preprocessor">#define AA_EN       0x8</span></div><div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a81e8b0738e46043adaffc6992f696066">  655</a></span>&#160;<span class="preprocessor">#define Z_CMP       0x10</span></div><div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a00533e8f40438b75e00e2343f7772434">  656</a></span>&#160;<span class="preprocessor">#define Z_UPD       0x20</span></div><div class="line"><a name="l00657"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9219db357071764d5a3a2e8fa2026de0">  657</a></span>&#160;<span class="preprocessor">#define IM_RD       0x40</span></div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa5b3f99d25d107291d51ba532f297a07">  658</a></span>&#160;<span class="preprocessor">#define CLR_ON_CVG  0x80</span></div><div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a769e8756ba583b0bd63bc9f22fda2cdb">  659</a></span>&#160;<span class="preprocessor">#define CVG_DST_CLAMP   0</span></div><div class="line"><a name="l00660"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1e3e7d30082cb6e1959db313069da55e">  660</a></span>&#160;<span class="preprocessor">#define CVG_DST_WRAP    0x100</span></div><div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa608e8bdc6034574d27c53baff196e1f">  661</a></span>&#160;<span class="preprocessor">#define CVG_DST_FULL    0x200</span></div><div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad28025e31450fcbfb20f6e7daaae06dc">  662</a></span>&#160;<span class="preprocessor">#define CVG_DST_SAVE    0x300</span></div><div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af13471985854dc9015656f7c5e87d73c">  663</a></span>&#160;<span class="preprocessor">#define ZMODE_OPA   0</span></div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1f948f9e404c280113937768b01d430f">  664</a></span>&#160;<span class="preprocessor">#define ZMODE_INTER 0x400</span></div><div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#afdbffa9b3e098d497e548da07b322314">  665</a></span>&#160;<span class="preprocessor">#define ZMODE_XLU   0x800</span></div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5893ccbd3d1931f9faccc0ef4b20c4d6">  666</a></span>&#160;<span class="preprocessor">#define ZMODE_DEC   0xc00</span></div><div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a253bd61ff62eba4c0446af1c46110f88">  667</a></span>&#160;<span class="preprocessor">#define CVG_X_ALPHA 0x1000</span></div><div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa5a549fc53ceef2a65ddd3105f31acf1">  668</a></span>&#160;<span class="preprocessor">#define ALPHA_CVG_SEL   0x2000</span></div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a692d7769eaab7b7c3a929ad122878e93">  669</a></span>&#160;<span class="preprocessor">#define FORCE_BL    0x4000</span></div><div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abf6f357754d73376d6c3683e77cc2711">  670</a></span>&#160;<span class="preprocessor">#define TEX_EDGE    0x0000 </span><span class="comment">/* used to be 0x8000 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad4769bc7b72ce85a1f16223345d741d6">  672</a></span>&#160;<span class="preprocessor">#define G_BL_CLR_IN 0</span></div><div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0caaa5a910e62dc8c9fdb21e81994b33">  673</a></span>&#160;<span class="preprocessor">#define G_BL_CLR_MEM    1</span></div><div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab3f06b49ea01d06b3af139b459c7dd36">  674</a></span>&#160;<span class="preprocessor">#define G_BL_CLR_BL 2</span></div><div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a56e9d056e50f14dce9f746a1ccd010f3">  675</a></span>&#160;<span class="preprocessor">#define G_BL_CLR_FOG    3</span></div><div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7e661648a47b167cb1174b5a590d748e">  676</a></span>&#160;<span class="preprocessor">#define G_BL_1MA    0</span></div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab3d6fc0b0313ebee5364710624451c22">  677</a></span>&#160;<span class="preprocessor">#define G_BL_A_MEM  1</span></div><div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a397782e8eb53f4cb5203c1406a5addcd">  678</a></span>&#160;<span class="preprocessor">#define G_BL_A_IN   0</span></div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab153454b1fb77be0f655808e6af515e1">  679</a></span>&#160;<span class="preprocessor">#define G_BL_A_FOG  1</span></div><div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a36f10eaef83653e23034ffeda4c87e02">  680</a></span>&#160;<span class="preprocessor">#define G_BL_A_SHADE    2</span></div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af2dbcc6547210f78d4c6e7e51c58643a">  681</a></span>&#160;<span class="preprocessor">#define G_BL_1      2</span></div><div class="line"><a name="l00682"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aafdf7b1504ac737cea522555378e5251">  682</a></span>&#160;<span class="preprocessor">#define G_BL_0      3</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a740144f8220253881fab946601fb4282">  684</a></span>&#160;<span class="preprocessor">#define GBL_c1(m1a, m1b, m2a, m2b)  \</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="preprocessor">    (m1a) &lt;&lt; 30 | (m1b) &lt;&lt; 26 | (m2a) &lt;&lt; 22 | (m2b) &lt;&lt; 18</span></div><div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a331a02497ce7b0d090ef698758543c3a">  686</a></span>&#160;<span class="preprocessor">#define GBL_c2(m1a, m1b, m2a, m2b)  \</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="preprocessor">    (m1a) &lt;&lt; 28 | (m1b) &lt;&lt; 24 | (m2a) &lt;&lt; 20 | (m2b) &lt;&lt; 16</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae632053229c9830d9d294d6e13ce03cd">  689</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_OPA_SURF(clk)                  \</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |     \</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8015b4c88848eefd8f1e8a7b92c33f49">  694</a></span>&#160;<span class="preprocessor">#define RM_RA_ZB_OPA_SURF(clk)                  \</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | CVG_DST_CLAMP |         \</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae2d99574244b3f38cdd2b328c65583d2">  699</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_XLU_SURF(clk)                  \</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | CLR_ON_CVG | \</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="preprocessor">    FORCE_BL | ZMODE_XLU |                  \</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7e3149c52fb0b5eaa8a2773dbef9be39">  704</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_OPA_DECAL(clk)                 \</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | ALPHA_CVG_SEL |  \</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="preprocessor">    ZMODE_DEC |                     \</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad385fae1dedb5eaee4118e434cdc9368">  709</a></span>&#160;<span class="preprocessor">#define RM_RA_ZB_OPA_DECAL(clk)                 \</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | CVG_DST_WRAP | ALPHA_CVG_SEL |      \</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="preprocessor">    ZMODE_DEC |                     \</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab5f491c303d9f79a3743beed0342246f">  714</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_XLU_DECAL(clk)                 \</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | CLR_ON_CVG | \</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="preprocessor">    FORCE_BL | ZMODE_DEC |                  \</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8b6da0778f8d4f38a54744ca7c187708">  719</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_OPA_INTER(clk)                 \</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |     \</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="preprocessor">    ALPHA_CVG_SEL | ZMODE_INTER |               \</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a24e957dfd72a857e34933955621548b2">  724</a></span>&#160;<span class="preprocessor">#define RM_RA_ZB_OPA_INTER(clk)                 \</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | CVG_DST_CLAMP |         \</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="preprocessor">    ALPHA_CVG_SEL | ZMODE_INTER |               \</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a80b54fba7a6fa975f52f5c43c5305de9">  729</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_XLU_INTER(clk)                 \</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | CLR_ON_CVG | \</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="preprocessor">    FORCE_BL | ZMODE_INTER |                \</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a475e93a8ee031029a1a70a8810519a8a">  734</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_XLU_LINE(clk)                  \</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | IM_RD | CVG_DST_CLAMP | CVG_X_ALPHA |   \</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="preprocessor">    ALPHA_CVG_SEL | FORCE_BL | ZMODE_XLU |          \</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2fd51f1bb561bdf985140eb28a1472c6">  739</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_DEC_LINE(clk)                  \</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | IM_RD | CVG_DST_SAVE | CVG_X_ALPHA |    \</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="preprocessor">    ALPHA_CVG_SEL | FORCE_BL | ZMODE_DEC |          \</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1f829eb825fd42bfd1819bb3d3975ef8">  744</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_TEX_EDGE(clk)                  \</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |     \</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="preprocessor">    CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |    \</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a10e9fa021f94557683d53234b491d85a">  749</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_TEX_INTER(clk)                 \</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |     \</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="preprocessor">    CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_INTER | TEX_EDGE |  \</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1f45a1d6cd9e8d1f5adf0626d601c14b">  754</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_SUB_SURF(clk)                  \</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_FULL |      \</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3c006801d38b6ccdb00ee170e9e84e27">  759</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_PCL_SURF(clk)                  \</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |     \</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="preprocessor">    ZMODE_OPA | G_AC_DITHER |               \</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae45d12a58c5b02ddb3b41aaf5035a5fa">  764</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_OPA_TERR(clk)                  \</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |     \</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad311f8a81eb97d16aaf058bad17538f7">  769</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_TEX_TERR(clk)                  \</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |     \</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="preprocessor">    CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |    \</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#afc6e6af23786248d813b80cd7beb9a0a">  774</a></span>&#160;<span class="preprocessor">#define RM_AA_ZB_SUB_TERR(clk)                  \</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="preprocessor">    AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_FULL |      \</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#acc3628299177ec5d6ca0cbee659ce8f0">  780</a></span>&#160;<span class="preprocessor">#define RM_AA_OPA_SURF(clk)                 \</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_CLAMP |             \</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a047a39f1448f1c405f82be545956e1c8">  785</a></span>&#160;<span class="preprocessor">#define RM_RA_OPA_SURF(clk)                 \</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="preprocessor">    AA_EN | CVG_DST_CLAMP |             \</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a386fb3a2703b20bd7377c667de57b537">  790</a></span>&#160;<span class="preprocessor">#define RM_AA_XLU_SURF(clk)                 \</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_WRAP | CLR_ON_CVG | FORCE_BL |  \</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="preprocessor">    ZMODE_OPA |                     \</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a05bfb87e7b73a7c2c3ec2e78d668c024">  795</a></span>&#160;<span class="preprocessor">#define RM_AA_XLU_LINE(clk)                 \</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_CLAMP | CVG_X_ALPHA |       \</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="preprocessor">    ALPHA_CVG_SEL | FORCE_BL | ZMODE_OPA |          \</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a205a30ce6c304d4f2a6e99cb3f06303f">  800</a></span>&#160;<span class="preprocessor">#define RM_AA_DEC_LINE(clk)                 \</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_FULL | CVG_X_ALPHA |        \</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="preprocessor">    ALPHA_CVG_SEL | FORCE_BL | ZMODE_OPA |          \</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1eb7e424d159cc5a230ff955b425f99e">  805</a></span>&#160;<span class="preprocessor">#define RM_AA_TEX_EDGE(clk)                 \</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_CLAMP |             \</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="preprocessor">    CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |    \</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae847f62a23a8461bf8e629589f8b3cfc">  810</a></span>&#160;<span class="preprocessor">#define RM_AA_SUB_SURF(clk)                 \</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_FULL |              \</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#accaba1344c0f12a24f7ec5d4000182d3">  815</a></span>&#160;<span class="preprocessor">#define RM_AA_PCL_SURF(clk)                 \</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_CLAMP |             \</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="preprocessor">    ZMODE_OPA | G_AC_DITHER |               \</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae976ea65d09b44642a339a29420a7a97">  820</a></span>&#160;<span class="preprocessor">#define RM_AA_OPA_TERR(clk)                 \</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_CLAMP |             \</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1053f69d7193036a300bd7841551c532">  825</a></span>&#160;<span class="preprocessor">#define RM_AA_TEX_TERR(clk)                 \</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_CLAMP |             \</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="preprocessor">    CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |    \</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a833d37933bc32ac0473a1b6d3cf65197">  830</a></span>&#160;<span class="preprocessor">#define RM_AA_SUB_TERR(clk)                 \</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="preprocessor">    AA_EN | IM_RD | CVG_DST_FULL |              \</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="preprocessor">    ZMODE_OPA | ALPHA_CVG_SEL |             \</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a23f171850b55a2b3fab053ab82d19a64">  836</a></span>&#160;<span class="preprocessor">#define RM_ZB_OPA_SURF(clk)                 \</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="preprocessor">    Z_CMP | Z_UPD | CVG_DST_FULL | ALPHA_CVG_SEL |      \</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="preprocessor">    ZMODE_OPA |                     \</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    </div><div class="line"><a name="l00841"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2cde2f99cb79ef81283861b629ef9b8b">  841</a></span>&#160;<span class="preprocessor">#define RM_ZB_XLU_SURF(clk)                 \</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="preprocessor">    Z_CMP | IM_RD | CVG_DST_FULL | FORCE_BL | ZMODE_XLU |   \</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    </div><div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6b9a31443a90c70b757769eeb28fe050">  845</a></span>&#160;<span class="preprocessor">#define RM_ZB_OPA_DECAL(clk)                    \</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="preprocessor">    Z_CMP | CVG_DST_FULL | ALPHA_CVG_SEL | ZMODE_DEC |  \</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    </div><div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae45a61c12c73ee117264721052ba9521">  849</a></span>&#160;<span class="preprocessor">#define RM_ZB_XLU_DECAL(clk)                    \</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="preprocessor">    Z_CMP | IM_RD | CVG_DST_FULL | FORCE_BL | ZMODE_DEC |   \</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    </div><div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a34fb26f5850dcfca03503b56a45ab0b7">  853</a></span>&#160;<span class="preprocessor">#define RM_ZB_CLD_SURF(clk)                 \</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="preprocessor">    Z_CMP | IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_XLU |   \</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    </div><div class="line"><a name="l00857"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#adc6f4ea97ae5226f0ae07c6e03d6c93f">  857</a></span>&#160;<span class="preprocessor">#define RM_ZB_OVL_SURF(clk)                 \</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="preprocessor">    Z_CMP | IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_DEC |   \</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    </div><div class="line"><a name="l00861"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3aa243d92e3ec5c14500ee230aeb0c13">  861</a></span>&#160;<span class="preprocessor">#define RM_ZB_PCL_SURF(clk)                 \</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="preprocessor">    Z_CMP | Z_UPD | CVG_DST_FULL | ZMODE_OPA |      \</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="preprocessor">    G_AC_DITHER |                       \</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1db83c0939e400b157463c017b73f802">  867</a></span>&#160;<span class="preprocessor">#define RM_OPA_SURF(clk)                    \</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="preprocessor">    CVG_DST_CLAMP | FORCE_BL | ZMODE_OPA |          \</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a52a9d927b27fd8d2fe23544544595d48">  871</a></span>&#160;<span class="preprocessor">#define RM_XLU_SURF(clk)                    \</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="preprocessor">    IM_RD | CVG_DST_FULL | FORCE_BL | ZMODE_OPA |       \</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6fb18b143e874c26ce78820485e035c4">  875</a></span>&#160;<span class="preprocessor">#define RM_TEX_EDGE(clk)                    \</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="preprocessor">    CVG_DST_CLAMP | CVG_X_ALPHA | ALPHA_CVG_SEL | FORCE_BL |\</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="preprocessor">    ZMODE_OPA | TEX_EDGE | AA_EN |                  \</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a280f46ff0b39bbfab5c6bddb8f4ba2a2">  880</a></span>&#160;<span class="preprocessor">#define RM_CLD_SURF(clk)                    \</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="preprocessor">    IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_OPA |       \</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1f5ac564296fff806826465194a25ee7">  884</a></span>&#160;<span class="preprocessor">#define RM_PCL_SURF(clk)                    \</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="preprocessor">    CVG_DST_FULL | FORCE_BL | ZMODE_OPA |           \</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="preprocessor">    G_AC_DITHER |                       \</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a95dafa141de60ad6317fc370b8d35466">  889</a></span>&#160;<span class="preprocessor">#define RM_ADD(clk)                 \</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="preprocessor">    IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_OPA |   \</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_A_FOG, G_BL_CLR_MEM, G_BL_1)</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3ac875d9cbb8d63f557b28d56efba138">  893</a></span>&#160;<span class="preprocessor">#define RM_NOOP(clk)    \</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="preprocessor">    GBL_c##clk(0, 0, 0, 0)</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a07e73fbd53ee021dc720ea902af95dbf">  896</a></span>&#160;<span class="preprocessor">#define RM_VISCVG(clk) \</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="preprocessor">    IM_RD | FORCE_BL |     \</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_BL, G_BL_A_MEM)</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">/* for rendering to an 8-bit framebuffer */</span></div><div class="line"><a name="l00901"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aba3ec53da2e9a224ec09d69cad9f8ec4">  901</a></span>&#160;<span class="preprocessor">#define RM_OPA_CI(clk)                    \</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="preprocessor">    CVG_DST_CLAMP | ZMODE_OPA |          \</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="preprocessor">    GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a96be6076a8e6bb27804f871a035d1210">  907</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_OPA_SURF RM_AA_ZB_OPA_SURF(1)</span></div><div class="line"><a name="l00908"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aadb5eb2ba3b0a454682ae544c2d7ab66">  908</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_OPA_SURF2    RM_AA_ZB_OPA_SURF(2)</span></div><div class="line"><a name="l00909"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a20823c591f2d853d16be5a811e4b88a3">  909</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_XLU_SURF RM_AA_ZB_XLU_SURF(1)</span></div><div class="line"><a name="l00910"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae1cb0caf54e886b7f0d70a4184cb3799">  910</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_XLU_SURF2    RM_AA_ZB_XLU_SURF(2)</span></div><div class="line"><a name="l00911"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a278f4b4c04617899181a2ec0928c9b74">  911</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_OPA_DECAL    RM_AA_ZB_OPA_DECAL(1)</span></div><div class="line"><a name="l00912"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aecb9269b45b8aa0094600cf48e92cb1d">  912</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_OPA_DECAL2   RM_AA_ZB_OPA_DECAL(2)</span></div><div class="line"><a name="l00913"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a613a6db043d33228992868b2e2cee20c">  913</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_XLU_DECAL    RM_AA_ZB_XLU_DECAL(1)</span></div><div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3d2541a94f72c927543f0b5532d97fb3">  914</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_XLU_DECAL2   RM_AA_ZB_XLU_DECAL(2)</span></div><div class="line"><a name="l00915"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a774cf3774ec58f68f46cdd9a83812c3b">  915</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_OPA_INTER    RM_AA_ZB_OPA_INTER(1)</span></div><div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae2c7a7a94df925bcce01dbf473286170">  916</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_OPA_INTER2   RM_AA_ZB_OPA_INTER(2)</span></div><div class="line"><a name="l00917"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac72e82c8b09752df0ecb6c7ef16f6de4">  917</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_XLU_INTER    RM_AA_ZB_XLU_INTER(1)</span></div><div class="line"><a name="l00918"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a17a97891cb5602e0fcf2a0925c424ec3">  918</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_XLU_INTER2   RM_AA_ZB_XLU_INTER(2)</span></div><div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a199bd788be2765507152e5476e69aaa4">  919</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_XLU_LINE RM_AA_ZB_XLU_LINE(1)</span></div><div class="line"><a name="l00920"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a23461ac059dbb2aec3d3e107e509882f">  920</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_XLU_LINE2    RM_AA_ZB_XLU_LINE(2)</span></div><div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aad6d88db3b2d7b0b9b6147a55777371c">  921</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_DEC_LINE RM_AA_ZB_DEC_LINE(1)</span></div><div class="line"><a name="l00922"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af8b99ef877dfbbcfa54874d1fa08f40e">  922</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_DEC_LINE2    RM_AA_ZB_DEC_LINE(2)</span></div><div class="line"><a name="l00923"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aec47fa07892860d18c0617eae167ce9e">  923</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_TEX_EDGE RM_AA_ZB_TEX_EDGE(1)</span></div><div class="line"><a name="l00924"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3d301276b8a11ab1ec65ffbb1976ae27">  924</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_TEX_EDGE2    RM_AA_ZB_TEX_EDGE(2)</span></div><div class="line"><a name="l00925"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2f8108aae0c7601f2b093f00b9443a00">  925</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_TEX_INTER    RM_AA_ZB_TEX_INTER(1)</span></div><div class="line"><a name="l00926"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a15f5d4c83c0253231b3287c90e9f3676">  926</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_TEX_INTER2   RM_AA_ZB_TEX_INTER(2)</span></div><div class="line"><a name="l00927"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af0e133f41e38b20e817c6e58f6a4b2b2">  927</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_SUB_SURF RM_AA_ZB_SUB_SURF(1)</span></div><div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a16debd9e9f3744226d0d07b8961bec48">  928</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_SUB_SURF2    RM_AA_ZB_SUB_SURF(2)</span></div><div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a43e656a4a8640fc716d04f42f88fb267">  929</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_PCL_SURF RM_AA_ZB_PCL_SURF(1)</span></div><div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a924bcbaf75433ec274bb1f8ebb85f62c">  930</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_PCL_SURF2    RM_AA_ZB_PCL_SURF(2)</span></div><div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#abc0498c64fe935a07ce2158d10fb5f0b">  931</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_OPA_TERR RM_AA_ZB_OPA_TERR(1)</span></div><div class="line"><a name="l00932"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9159d78f4d3e969f9d499188d3b56640">  932</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_OPA_TERR2    RM_AA_ZB_OPA_TERR(2)</span></div><div class="line"><a name="l00933"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af56bf923a4c6b32ae32904337f4f36fd">  933</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_TEX_TERR RM_AA_ZB_TEX_TERR(1)</span></div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa663837bd3909e7f5cb96651fb912e48">  934</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_TEX_TERR2    RM_AA_ZB_TEX_TERR(2)</span></div><div class="line"><a name="l00935"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6e1b369ed9e73207cfe47cf0e15d7b8a">  935</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_SUB_TERR RM_AA_ZB_SUB_TERR(1)</span></div><div class="line"><a name="l00936"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6e0dec22a7e74e06a3e7de7d82930317">  936</a></span>&#160;<span class="preprocessor">#define G_RM_AA_ZB_SUB_TERR2    RM_AA_ZB_SUB_TERR(2)</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a613fab5c7b77390ef0e1aa1db1e498fb">  938</a></span>&#160;<span class="preprocessor">#define G_RM_RA_ZB_OPA_SURF RM_RA_ZB_OPA_SURF(1)</span></div><div class="line"><a name="l00939"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad4f05628f1591d27b1b5ae1d2c6c1090">  939</a></span>&#160;<span class="preprocessor">#define G_RM_RA_ZB_OPA_SURF2    RM_RA_ZB_OPA_SURF(2)</span></div><div class="line"><a name="l00940"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aeacaa404f4e65d99d3d32a204712f9b8">  940</a></span>&#160;<span class="preprocessor">#define G_RM_RA_ZB_OPA_DECAL    RM_RA_ZB_OPA_DECAL(1)</span></div><div class="line"><a name="l00941"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aef109a2de40141b32cea768aa1bb8834">  941</a></span>&#160;<span class="preprocessor">#define G_RM_RA_ZB_OPA_DECAL2   RM_RA_ZB_OPA_DECAL(2)</span></div><div class="line"><a name="l00942"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ade653e698e96f1eb11b22f76fd1aeaa0">  942</a></span>&#160;<span class="preprocessor">#define G_RM_RA_ZB_OPA_INTER    RM_RA_ZB_OPA_INTER(1)</span></div><div class="line"><a name="l00943"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa6b015b0a2e0fd6ca37174b7db722fd9">  943</a></span>&#160;<span class="preprocessor">#define G_RM_RA_ZB_OPA_INTER2   RM_RA_ZB_OPA_INTER(2)</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac5e3ad324b9153ed220a72e66cb8c96d">  945</a></span>&#160;<span class="preprocessor">#define G_RM_AA_OPA_SURF    RM_AA_OPA_SURF(1)</span></div><div class="line"><a name="l00946"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a4f510a28ff339aa480f1ac5bc27aafc5">  946</a></span>&#160;<span class="preprocessor">#define G_RM_AA_OPA_SURF2   RM_AA_OPA_SURF(2)</span></div><div class="line"><a name="l00947"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a41ab960b54b3be1178369856aaf65f68">  947</a></span>&#160;<span class="preprocessor">#define G_RM_AA_XLU_SURF    RM_AA_XLU_SURF(1)</span></div><div class="line"><a name="l00948"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5ffcb379dfa6cb4a7dc0254629be941a">  948</a></span>&#160;<span class="preprocessor">#define G_RM_AA_XLU_SURF2   RM_AA_XLU_SURF(2)</span></div><div class="line"><a name="l00949"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6a078406364f294f35b47faebf82323e">  949</a></span>&#160;<span class="preprocessor">#define G_RM_AA_XLU_LINE    RM_AA_XLU_LINE(1)</span></div><div class="line"><a name="l00950"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a50bc25ed8d58f49f97e8db43692a7b93">  950</a></span>&#160;<span class="preprocessor">#define G_RM_AA_XLU_LINE2   RM_AA_XLU_LINE(2)</span></div><div class="line"><a name="l00951"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad3a553815fe262505e35bdd62acd373a">  951</a></span>&#160;<span class="preprocessor">#define G_RM_AA_DEC_LINE    RM_AA_DEC_LINE(1)</span></div><div class="line"><a name="l00952"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa31699620752e40eb6efd3e11bd1a871">  952</a></span>&#160;<span class="preprocessor">#define G_RM_AA_DEC_LINE2   RM_AA_DEC_LINE(2)</span></div><div class="line"><a name="l00953"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad7809634dfcb8d55ba0c2994626d8dc6">  953</a></span>&#160;<span class="preprocessor">#define G_RM_AA_TEX_EDGE    RM_AA_TEX_EDGE(1)</span></div><div class="line"><a name="l00954"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2aa1e31cf3754666cf5a6c1b6adcac7d">  954</a></span>&#160;<span class="preprocessor">#define G_RM_AA_TEX_EDGE2   RM_AA_TEX_EDGE(2)</span></div><div class="line"><a name="l00955"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a35cceed1dd24425f6289f441bf8abd95">  955</a></span>&#160;<span class="preprocessor">#define G_RM_AA_SUB_SURF    RM_AA_SUB_SURF(1)</span></div><div class="line"><a name="l00956"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8c05e79030fb9b19a02d36e6eef9a35a">  956</a></span>&#160;<span class="preprocessor">#define G_RM_AA_SUB_SURF2   RM_AA_SUB_SURF(2)</span></div><div class="line"><a name="l00957"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af793d53473a57d0b23a9e2e145bccda1">  957</a></span>&#160;<span class="preprocessor">#define G_RM_AA_PCL_SURF    RM_AA_PCL_SURF(1)</span></div><div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3002647cc3202a43980936a5d1dd7161">  958</a></span>&#160;<span class="preprocessor">#define G_RM_AA_PCL_SURF2   RM_AA_PCL_SURF(2)</span></div><div class="line"><a name="l00959"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af5c674f94c87d236e6c2cc7ad8c297c2">  959</a></span>&#160;<span class="preprocessor">#define G_RM_AA_OPA_TERR    RM_AA_OPA_TERR(1)</span></div><div class="line"><a name="l00960"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab61f1e9a13fb71ad50a0657517b06c46">  960</a></span>&#160;<span class="preprocessor">#define G_RM_AA_OPA_TERR2   RM_AA_OPA_TERR(2)</span></div><div class="line"><a name="l00961"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a71e375d2565dd939dd2b9c8b6d82d7d1">  961</a></span>&#160;<span class="preprocessor">#define G_RM_AA_TEX_TERR    RM_AA_TEX_TERR(1)</span></div><div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a19b60f2e9177fae074a7d04502a10057">  962</a></span>&#160;<span class="preprocessor">#define G_RM_AA_TEX_TERR2   RM_AA_TEX_TERR(2)</span></div><div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aaca75a627e103b7c5a2b256a794b1424">  963</a></span>&#160;<span class="preprocessor">#define G_RM_AA_SUB_TERR    RM_AA_SUB_TERR(1)</span></div><div class="line"><a name="l00964"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a98ba60159ab684cca66207c11cbb1054">  964</a></span>&#160;<span class="preprocessor">#define G_RM_AA_SUB_TERR2   RM_AA_SUB_TERR(2)</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a94083173b64cd94c99c7f9da7f52dec1">  966</a></span>&#160;<span class="preprocessor">#define G_RM_RA_OPA_SURF    RM_RA_OPA_SURF(1)</span></div><div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#af34b220d9baa39bbd2ef71d4d0cbed86">  967</a></span>&#160;<span class="preprocessor">#define G_RM_RA_OPA_SURF2   RM_RA_OPA_SURF(2)</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a6e2fa165767bf860ed8c1fe500760532">  969</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_OPA_SURF    RM_ZB_OPA_SURF(1)</span></div><div class="line"><a name="l00970"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a266b920bbef99532399aa3988e24a3a4">  970</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_OPA_SURF2   RM_ZB_OPA_SURF(2)</span></div><div class="line"><a name="l00971"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a345213feaf2bc2bd8624ba9435749355">  971</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_XLU_SURF    RM_ZB_XLU_SURF(1)</span></div><div class="line"><a name="l00972"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a64cf7b71e6ae1178f184cf87dc43ba7a">  972</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_XLU_SURF2   RM_ZB_XLU_SURF(2)</span></div><div class="line"><a name="l00973"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a04a0ee9f51fa9068483b40b600d08999">  973</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_OPA_DECAL   RM_ZB_OPA_DECAL(1)</span></div><div class="line"><a name="l00974"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aab59b15a2a13d646b4cf660d0b7edb72">  974</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_OPA_DECAL2  RM_ZB_OPA_DECAL(2)</span></div><div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#accf406831173d8d126ef3c840874a33b">  975</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_XLU_DECAL   RM_ZB_XLU_DECAL(1)</span></div><div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a807693dff6c738123223b60470177919">  976</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_XLU_DECAL2  RM_ZB_XLU_DECAL(2)</span></div><div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3c459a4e5bf4dd4bd2eda0bf5a259537">  977</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_CLD_SURF    RM_ZB_CLD_SURF(1)</span></div><div class="line"><a name="l00978"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2c6a4394801fed186134d0ce2e5d2540">  978</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_CLD_SURF2   RM_ZB_CLD_SURF(2)</span></div><div class="line"><a name="l00979"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad397df968eef37053bb8f935b5207bb4">  979</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_OVL_SURF    RM_ZB_OVL_SURF(1)</span></div><div class="line"><a name="l00980"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#adcc1543848b23a7e971b0708405c3489">  980</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_OVL_SURF2   RM_ZB_OVL_SURF(2)</span></div><div class="line"><a name="l00981"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7424cb0077c35ceab1ec0d745036ce5b">  981</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_PCL_SURF    RM_ZB_PCL_SURF(1)</span></div><div class="line"><a name="l00982"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aeb334e15ea225ba9f65e218cabcd517a">  982</a></span>&#160;<span class="preprocessor">#define G_RM_ZB_PCL_SURF2   RM_ZB_PCL_SURF(2)</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#afeb607ce11c25905319f61b8c31f3792">  984</a></span>&#160;<span class="preprocessor">#define G_RM_OPA_SURF       RM_OPA_SURF(1)</span></div><div class="line"><a name="l00985"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a09c74fbb05361ac0853eb0cd53542f45">  985</a></span>&#160;<span class="preprocessor">#define G_RM_OPA_SURF2      RM_OPA_SURF(2)</span></div><div class="line"><a name="l00986"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa027c9ccf14eb9f927970f0b5ca4ebeb">  986</a></span>&#160;<span class="preprocessor">#define G_RM_XLU_SURF       RM_XLU_SURF(1)</span></div><div class="line"><a name="l00987"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ad039e5712793be557f06d251f16a3ac3">  987</a></span>&#160;<span class="preprocessor">#define G_RM_XLU_SURF2      RM_XLU_SURF(2)</span></div><div class="line"><a name="l00988"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8ec2512e618e2bde7576a5a08686c871">  988</a></span>&#160;<span class="preprocessor">#define G_RM_CLD_SURF       RM_CLD_SURF(1)</span></div><div class="line"><a name="l00989"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac6e33a5eae2adfbc50adc0c51f0267db">  989</a></span>&#160;<span class="preprocessor">#define G_RM_CLD_SURF2      RM_CLD_SURF(2)</span></div><div class="line"><a name="l00990"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a71791fa54fc2d997632c978a556afb47">  990</a></span>&#160;<span class="preprocessor">#define G_RM_TEX_EDGE       RM_TEX_EDGE(1)</span></div><div class="line"><a name="l00991"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#aa215025edbe2f3a0cee94baa1c36f72d">  991</a></span>&#160;<span class="preprocessor">#define G_RM_TEX_EDGE2      RM_TEX_EDGE(2)</span></div><div class="line"><a name="l00992"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ab6fae729440976f41c672c3ce49d4564">  992</a></span>&#160;<span class="preprocessor">#define G_RM_PCL_SURF       RM_PCL_SURF(1)</span></div><div class="line"><a name="l00993"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae221cc0dd89c41b4d43664dd45d5d10a">  993</a></span>&#160;<span class="preprocessor">#define G_RM_PCL_SURF2      RM_PCL_SURF(2)</span></div><div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a98fcc4fe6f70b843d70680f5f12ad923">  994</a></span>&#160;<span class="preprocessor">#define G_RM_ADD            RM_ADD(1)</span></div><div class="line"><a name="l00995"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1071d514bcfc28464ffbb5487abf3b45">  995</a></span>&#160;<span class="preprocessor">#define G_RM_ADD2           RM_ADD(2)</span></div><div class="line"><a name="l00996"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a4d7a2ca5895efd43a30394416ab24be8">  996</a></span>&#160;<span class="preprocessor">#define G_RM_NOOP           RM_NOOP(1)</span></div><div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a27262ffe4dcd32c858dcdcbac77a221f">  997</a></span>&#160;<span class="preprocessor">#define G_RM_NOOP2          RM_NOOP(2)</span></div><div class="line"><a name="l00998"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a1db30a839962aa62c1622877e9bc2fbd">  998</a></span>&#160;<span class="preprocessor">#define G_RM_VISCVG         RM_VISCVG(1)</span></div><div class="line"><a name="l00999"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a14a84e3046f262f0164b94bfe5b839a9">  999</a></span>&#160;<span class="preprocessor">#define G_RM_VISCVG2        RM_VISCVG(2)</span></div><div class="line"><a name="l01000"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a9fabd4b8fb61e671025a25fc293a6f13"> 1000</a></span>&#160;<span class="preprocessor">#define G_RM_OPA_CI         RM_OPA_CI(1)</span></div><div class="line"><a name="l01001"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a8b2c77bd7a17b14120e7b760f4e74cc7"> 1001</a></span>&#160;<span class="preprocessor">#define G_RM_OPA_CI2        RM_OPA_CI(2)</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a7594dd07a22f32a4d4f29b3de50450e9"> 1004</a></span>&#160;<span class="preprocessor">#define G_RM_FOG_SHADE_A    GBL_c1(G_BL_CLR_FOG, G_BL_A_SHADE, G_BL_CLR_IN, G_BL_1MA)</span></div><div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae4f0d8ed5ca1c8ad8cf99175790e1782"> 1005</a></span>&#160;<span class="preprocessor">#define G_RM_FOG_PRIM_A     GBL_c1(G_BL_CLR_FOG, G_BL_A_FOG, G_BL_CLR_IN, G_BL_1MA)</span></div><div class="line"><a name="l01006"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ac20b077ca514d11acd358274908d5c3a"> 1006</a></span>&#160;<span class="preprocessor">#define G_RM_PASS       GBL_c1(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment"> * G_SETCONVERT: K0-5</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01011"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0f663d058b567ac5e7301f98fc6e49ce"> 1011</a></span>&#160;<span class="preprocessor">#define G_CV_K0     175</span></div><div class="line"><a name="l01012"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a2f706c885e462ca6a71a3eabc8fc3fe5"> 1012</a></span>&#160;<span class="preprocessor">#define G_CV_K1     -43</span></div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#ae18874b206ef3baaafed802c725921ae"> 1013</a></span>&#160;<span class="preprocessor">#define G_CV_K2     -89</span></div><div class="line"><a name="l01014"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a88eb39323b6b8f09ba55c07470bdd75d"> 1014</a></span>&#160;<span class="preprocessor">#define G_CV_K3     222</span></div><div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a15b03e1c25519c2adc76f2f46f71bcca"> 1015</a></span>&#160;<span class="preprocessor">#define G_CV_K4     114</span></div><div class="line"><a name="l01016"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a5a4b2a7a6c7b6940919475c36955c192"> 1016</a></span>&#160;<span class="preprocessor">#define G_CV_K5     42</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment"> * G_SETSCISSOR: interlace mode</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01021"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#acb79ff85fa36c35402a5e74047073eb5"> 1021</a></span>&#160;<span class="preprocessor">#define G_SC_NON_INTERLACE  0</span></div><div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3edbcba6c90ff08f36f2043f36a99918"> 1022</a></span>&#160;<span class="preprocessor">#define G_SC_ODD_INTERLACE  3</span></div><div class="line"><a name="l01023"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a421fef5e28e6eb774dde3ec993c8cad4"> 1023</a></span>&#160;<span class="preprocessor">#define G_SC_EVEN_INTERLACE 2</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">/* flags to inhibit pushing of the display list (on branch) */</span></div><div class="line"><a name="l01026"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a0ba63ab403418921683815479d82463f"> 1026</a></span>&#160;<span class="preprocessor">#define G_DL_PUSH       0x00</span></div><div class="line"><a name="l01027"></a><span class="lineno"><a class="line" href="../../d3/daf/gbi_8h.html#a3b437db0e92f87565411fb76a70f14bd"> 1027</a></span>&#160;<span class="preprocessor">#define G_DL_NOPUSH     0x01</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment"> * BEGIN C-specific section: (typedef&#39;s)</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="preprocessor">#if defined(_LANGUAGE_C) || defined(_LANGUAGE_C_PLUS_PLUS)</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment"> * Data Structures</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment"> * NOTE:</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment"> * The DMA transfer hardware requires 64-bit aligned, 64-bit multiple-</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment"> * sized transfers. This important hardware optimization is unfortunately</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment"> * reflected in the programming interface, with some structures</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment"> * padded and alignment enforced.</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment"> * Since structures are aligned to the boundary of the &quot;worst-case&quot;</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment"> * element, we can&#39;t depend on the C compiler to align things</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"> * properly.</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment"> * 64-bit structure alignment is enforced by wrapping structures with </span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment"> * unions that contain a dummy &quot;long long int&quot;.  Why this works is</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment"> * explained in the ANSI C Spec, or on page 186 of the second edition</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment"> * of K&amp;R, &quot;The C Programming Language&quot;.</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment"> * The price we pay for this is a little awkwardness referencing the</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment"> * structures through the union. There is no memory penalty, since</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment"> * all the structures are at least 64-bits the dummy alignment field</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"> * does not increase the size of the union.</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment"> * Static initialization of these union structures works because</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment"> * the ANSI C spec states that static initialization for unions</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment"> * works by using the first union element. We put the dummy alignment</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment"> * field last for this reason.</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment"> * (it&#39;s possible a newer 64-bit compiler from MIPS might make this</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment"> * easier with a flag, but we can&#39;t wait for it...)</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment"> * Vertex (set up for use with colors)</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordtype">short</span>       ob[3];  <span class="comment">/* x, y, z */</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>  flag;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordtype">short</span>       tc[2];  <span class="comment">/* texture coord */</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   cn[4];  <span class="comment">/* color &amp; alpha */</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;} <a class="code" href="../../d8/d8e/structVtx__t.html">Vtx_t</a>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment"> * Vertex (set up for use with normals)</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordtype">short</span>       ob[3];  <span class="comment">/* x, y, z */</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>  flag;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordtype">short</span>       tc[2];  <span class="comment">/* texture coord */</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordtype">signed</span> <span class="keywordtype">char</span> n[3];   <span class="comment">/* normal */</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;      <span class="comment">/* alpha  */</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;} <a class="code" href="../../d8/df9/structVtx__tn.html">Vtx_tn</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <a class="code" href="../../d8/d8e/structVtx__t.html">Vtx_t</a>       v;  <span class="comment">/* Use this one for colors  */</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="../../d8/df9/structVtx__tn.html">Vtx_tn</a>              n;  <span class="comment">/* Use this one for normals */</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>   force_structure_alignment;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;} <a class="code" href="../../d9/d31/unionVtx.html">Vtx</a>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment"> * Sprite structure</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordtype">void</span> *SourceImagePointer;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordtype">void</span> *TlutPointer;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keywordtype">short</span> Stride;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="keywordtype">short</span> SubImageWidth;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="keywordtype">short</span> SubImageHeight;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordtype">char</span>  SourceImageType;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordtype">char</span>  SourceImageBitSize;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordtype">short</span> SourceImageOffsetS;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="keywordtype">short</span> SourceImageOffsetT;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="comment">/* 20 bytes for above */</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">/* padding to bring structure size to 64 bit allignment */</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordtype">char</span> dummy[4]; </div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;} uSprite_t;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{ </div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  uSprite_t  <a class="code" href="../../d9/d0b/err_8english_8cc.html#af4ea43c8cfd3b8c343d776bed09719b9">s</a>;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">/* Need to make sure this is 64 bit aligned */</span>   </div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>         force_structure_allignment[3];</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;} uSprite;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment"> * Triangle face</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   flag;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   v[3];</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;} Tri;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment"> * 4x4 matrix, fixed point s15.16 format.</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment"> * First 8 words are integer portion of the 4x4 matrix</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment"> * Last 8 words are the fraction portion of the 4x4 matrix</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">long</span>    <a class="code" href="../../d5/dff/gbi__old_8h.html#a337d3271dded333fc80aa798bf36efe3">Mtx_t</a>[4][4];</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <a class="code" href="../../d5/dff/gbi__old_8h.html#a337d3271dded333fc80aa798bf36efe3">Mtx_t</a>       m;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>   force_structure_alignment;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;} <a class="code" href="../../d6/d4c/unionMtx.html">Mtx</a>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment"> * Viewport</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment"> * This magic value is the maximum INTEGER z-range of the hardware</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment"> * (there are also 16-bits of fraction, which are introduced during</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment"> * any transformations). This is not just a good idea, it&#39;s the law.</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment"> * Feeding the hardware eventual z-coordinates (after any transforms</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment"> * or scaling) bigger than this, will not work.</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment"> * This number is DIFFERENT than G_MAXFBZ, which is the maximum value</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment"> * you want to use to initialize the z-buffer.</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment"> * The reason these are different is mildly interesting, but too long</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment"> * to explain here. It is basically the result of optimizations in the</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment"> * hardware. A more generic API might hide this detail from the users,</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment"> * but we don&#39;t have the ucode to do that...</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="preprocessor">#define G_MAXZ      0x03ff  </span><span class="comment">/* 10 bits of integer screen-Z precision */</span><span class="preprocessor"></span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment"> * The viewport structure elements have 2 bits of fraction, necessary</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment"> * to accomodate the sub-pixel positioning scaling for the hardware.</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment"> * This can also be exploited to handle odd-sized viewports.</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment"> * Accounting for these fractional bits, using the default projection</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment"> * and viewing matrices, the viewport structure is initialized thusly:</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment"> *      (SCREEN_WD/2)*4, (SCREEN_HT/2)*4, G_MAXZ, 0,</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment"> *      (SCREEN_WD/2)*4, (SCREEN_HT/2)*4, 0, 0,</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordtype">short</span>   vscale[4];  <span class="comment">/* scale, 2 bits fraction */</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordtype">short</span>   vtrans[4];  <span class="comment">/* translate, 2 bits fraction */</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="comment">/* both the above arrays are padded to 64-bit boundary */</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;} <a class="code" href="../../d1/d33/structVp__t.html">Vp_t</a>;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="../../d1/d33/structVp__t.html">Vp_t</a>        vp;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>   force_structure_alignment;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;} <a class="code" href="../../d9/d00/unionVp.html">Vp</a>;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment"> * MOVEMEM indices</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment"> * Each of these indexes an entry in a dmem table</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment"> * which points to a 1-4 word block of dmem in</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment"> * which to store a 1-4 word DMA.</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">/* 0,4 are reserved by G_MTX */</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="preprocessor"># define G_MV_MMTX  2   </span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="preprocessor"># define G_MV_PMTX  6</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="preprocessor"># define G_MV_VIEWPORT  8</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="preprocessor"># define G_MV_LIGHT 10</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="preprocessor"># define G_MV_POINT 12</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="preprocessor"># define G_MV_MATRIX    14      </span><span class="comment">/* NOTE: this is in moveword table */</span><span class="preprocessor"></span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="preprocessor"># define G_MVO_LOOKATX  (0*24)</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="preprocessor"># define G_MVO_LOOKATY  (1*24)</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="preprocessor"># define G_MVO_L0   (2*24)</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="preprocessor"># define G_MVO_L1   (3*24)</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="preprocessor"># define G_MVO_L2   (4*24)</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="preprocessor"># define G_MVO_L3   (5*24)</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="preprocessor"># define G_MVO_L4   (6*24)</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="preprocessor"># define G_MVO_L5   (7*24)</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="preprocessor"># define G_MVO_L6   (8*24)</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="preprocessor"># define G_MVO_L7   (9*24)</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="preprocessor"># define G_MV_VIEWPORT  0x80</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="preprocessor"># define G_MV_LOOKATY   0x82</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="preprocessor"># define G_MV_LOOKATX   0x84</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="preprocessor"># define G_MV_L0    0x86</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="preprocessor"># define G_MV_L1    0x88</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="preprocessor"># define G_MV_L2    0x8a</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="preprocessor"># define G_MV_L3    0x8c</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="preprocessor"># define G_MV_L4    0x8e</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="preprocessor"># define G_MV_L5    0x90</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="preprocessor"># define G_MV_L6    0x92</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="preprocessor"># define G_MV_L7    0x94</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="preprocessor"># define G_MV_TXTATT    0x96</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="preprocessor"># define G_MV_MATRIX_1  0x9e    </span><span class="comment">/* NOTE: this is in moveword table */</span><span class="preprocessor"></span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="preprocessor"># define G_MV_MATRIX_2  0x98</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="preprocessor"># define G_MV_MATRIX_3  0x9a</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="preprocessor"># define G_MV_MATRIX_4  0x9c</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment"> * MOVEWORD indices</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment"> * Each of these indexes an entry in a dmem table</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment"> * which points to a word in dmem in dmem where</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment"> * an immediate word will be stored.</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="preprocessor">#define G_MW_MATRIX     0x00    </span><span class="comment">/* NOTE: also used by movemem */</span><span class="preprocessor"></span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="preprocessor">#define G_MW_NUMLIGHT       0x02</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="preprocessor">#define G_MW_CLIP       0x04</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="preprocessor">#define G_MW_SEGMENT        0x06</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="preprocessor">#define G_MW_FOG        0x08</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="preprocessor">#define G_MW_LIGHTCOL       0x0a</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="preprocessor"># define G_MW_FORCEMTX      0x0c</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="preprocessor"># define G_MW_POINTS        0x0c</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="preprocessor">#define G_MW_PERSPNORM      0x0e</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment"> * These are offsets from the address in the dmem table</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment"> */</span> </div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="preprocessor">#define G_MWO_NUMLIGHT      0x00</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="preprocessor">#define G_MWO_CLIP_RNX      0x04</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="preprocessor">#define G_MWO_CLIP_RNY      0x0c</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="preprocessor">#define G_MWO_CLIP_RPX      0x14</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="preprocessor">#define G_MWO_CLIP_RPY      0x1c</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_0     0x00</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_1     0x01</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_2     0x02</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_3     0x03</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_4     0x04</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_5     0x05</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_6     0x06</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_7     0x07</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_8     0x08</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_9     0x09</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_A     0x0a</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_B     0x0b</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_C     0x0c</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_D     0x0d</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_E     0x0e</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="preprocessor">#define G_MWO_SEGMENT_F     0x0f</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="preprocessor">#define G_MWO_FOG       0x00</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_1      0x00</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_1      0x04</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_2      0x18</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_2      0x1c</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_3      0x30</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_3      0x34</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_4      0x48</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_4      0x4c</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_5      0x60</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_5      0x64</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_6      0x78</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_6      0x7c</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_7      0x90</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_7      0x94</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_8      0xa8</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_8      0xac</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_2      0x20</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_2      0x24</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_3      0x40</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_3      0x44</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_4      0x60</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_4      0x64</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_5      0x80</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_5      0x84</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_6      0xa0</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_6      0xa4</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_7      0xc0</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_7      0xc4</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="preprocessor">#define G_MWO_aLIGHT_8      0xe0</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="preprocessor">#define G_MWO_bLIGHT_8      0xe4</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_XX_XY_I    0x00</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_XZ_XW_I    0x04</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_YX_YY_I    0x08</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_YZ_YW_I    0x0c</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_ZX_ZY_I    0x10</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_ZZ_ZW_I    0x14</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_WX_WY_I    0x18</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_WZ_WW_I    0x1c</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_XX_XY_F    0x20</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_XZ_XW_F    0x24</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_YX_YY_F    0x28</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_YZ_YW_F    0x2c</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_ZX_ZY_F    0x30</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_ZZ_ZW_F    0x34</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_WX_WY_F    0x38</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="preprocessor">#define G_MWO_MATRIX_WZ_WW_F    0x3c</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="preprocessor">#define G_MWO_POINT_RGBA    0x10</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="preprocessor">#define G_MWO_POINT_ST      0x14</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="preprocessor">#define G_MWO_POINT_XYSCREEN    0x18</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="preprocessor">#define G_MWO_POINT_ZSCREEN 0x1c</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment"> * Light structure.</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment"> * Note: only directional (infinite) lights are currently supported.</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment"> * Note: the weird order is for the DMEM alignment benefit of </span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment"> * the microcode.</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> col[3];     <span class="comment">/* diffuse light value (rgba) */</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="keywordtype">char</span>      pad1;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> colc[3];    <span class="comment">/* copy of diffuse light value (rgba) */</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="keywordtype">char</span>      pad2;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="keywordtype">signed</span> <span class="keywordtype">char</span>   dir[3];     <span class="comment">/* direction of light (normalized) */</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="keywordtype">char</span>      pad3;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;} <a class="code" href="../../d1/d7d/structLight__t.html">Light_t</a>;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> col[3];     <span class="comment">/* ambient light value (rgba) */</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordtype">char</span>      pad1;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> colc[3];    <span class="comment">/* copy of ambient light value (rgba) */</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="keywordtype">char</span>      pad2;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;} <a class="code" href="../../d9/d41/structAmbient__t.html">Ambient_t</a>;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="keywordtype">int</span>       x1,y1,x2,y2;    <span class="comment">/* texture offsets for highlight 1/2 */</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;} <a class="code" href="../../dc/d9d/structHilite__t.html">Hilite_t</a>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <a class="code" href="../../d1/d7d/structLight__t.html">Light_t</a> l;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>   force_structure_alignment[2];</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;} <a class="code" href="../../db/d72/unionLight.html">Light</a>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <a class="code" href="../../d9/d41/structAmbient__t.html">Ambient_t</a>   l;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>   force_structure_alignment[1];</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;} <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a>;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a> <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[7];</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;} Lightsn;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a> <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[1];</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;} Lights0;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a> <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[1];</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;} Lights1;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a> <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[2];</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;} Lights2;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a> <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[3];</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;} Lights3;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a> <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[4];</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;} <a class="code" href="../../d3/da1/structLights4.html">Lights4</a>;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a> <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[5];</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;} Lights5;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a> <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[6];</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;} Lights6;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="../../dc/d9c/unionAmbient.html">Ambient</a> <a class="code" href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a>;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[7];</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;} Lights7;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="../../db/d72/unionLight.html">Light</a>   l[2];</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;} <a class="code" href="../../d4/d94/structLookAt.html">LookAt</a>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <a class="code" href="../../dc/d9d/structHilite__t.html">Hilite_t</a>    h;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">int</span>    force_structure_alignment[4];</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;} <a class="code" href="../../dd/dd6/unionHilite.html">Hilite</a>;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="preprocessor">#define gdSPDefLights0(ar,ag,ab)                    \</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="preprocessor">        {   {{ {ar,ag,ab},0,{ar,ag,ab},0}},         \</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="preprocessor">               {{{ { 0, 0, 0},0,{ 0, 0, 0},0,{ 0, 0, 0},0}}} }</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="preprocessor">#define gdSPDefLights1(ar,ag,ab,r1,g1,b1,x1,y1,z1)          \</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="preprocessor">        {   {{ {ar,ag,ab},0,{ar,ag,ab},0}},         \</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="preprocessor">               {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}}} }</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="preprocessor">#define gdSPDefLights2(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2)    \</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="preprocessor">        {   {{ {ar,ag,ab},0,{ar,ag,ab},0}},         \</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="preprocessor">               {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},    \</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="preprocessor">            {{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}}} }</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="preprocessor">#define gdSPDefLights3(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3)                                  \</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="preprocessor">        {   {{ {ar,ag,ab},0,{ar,ag,ab},0}},         \</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="preprocessor">               {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},    \</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="preprocessor">            {{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},    \</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="preprocessor">            {{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}}} }</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="preprocessor">#define gdSPDefLights4(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4)                        \</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="preprocessor">        {   {{ {ar,ag,ab},0,{ar,ag,ab},0}},         \</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="preprocessor">               {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},    \</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="preprocessor">            {{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},    \</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="preprocessor">            {{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},    \</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="preprocessor">            {{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}}} }</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="preprocessor">#define gdSPDefLights5(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4,r5,g5,b5,x5,y5,z5)              \</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="preprocessor">        {   {{ {ar,ag,ab},0,{ar,ag,ab},0}},         \</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="preprocessor">               {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},    \</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="preprocessor">            {{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},    \</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="preprocessor">            {{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},    \</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="preprocessor">            {{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}},    \</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="preprocessor">            {{ {r5,g5,b5},0,{r5,g5,b5},0,{x5,y5,z5},0}}} }</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="preprocessor">#define gdSPDefLights6(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4,r5,g5,b5,x5,y5,z5,r6,g6,b6,x6,y6,z6)        \</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="preprocessor">        {   {{ {ar,ag,ab},0,{ar,ag,ab},0}},         \</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="preprocessor">               {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},    \</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="preprocessor">            {{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},    \</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="preprocessor">            {{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},    \</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="preprocessor">            {{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}},    \</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="preprocessor">            {{ {r5,g5,b5},0,{r5,g5,b5},0,{x5,y5,z5},0}},    \</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="preprocessor">            {{ {r6,g6,b6},0,{r6,g6,b6},0,{x6,y6,z6},0}}} }</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="preprocessor">#define gdSPDefLights7(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4,r5,g5,b5,x5,y5,z5,r6,g6,b6,x6,y6,z6,r7,g7,b7,x7,y7,z7)  \</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="preprocessor">        {   {{ {ar,ag,ab},0,{ar,ag,ab},0}},         \</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="preprocessor">               {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},    \</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="preprocessor">            {{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},    \</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="preprocessor">            {{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},    \</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="preprocessor">            {{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}},    \</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="preprocessor">            {{ {r5,g5,b5},0,{r5,g5,b5},0,{x5,y5,z5},0}},    \</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="preprocessor">            {{ {r6,g6,b6},0,{r6,g6,b6},0,{x6,y6,z6},0}},    \</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="preprocessor">            {{ {r7,g7,b7},0,{r7,g7,b7},0,{x7,y7,z7},0}}} }</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="preprocessor">#define gdSPDefLookAt(rightx,righty,rightz,upx,upy,upz)             \</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="preprocessor">        {   {{ {{0,0,0},0,{0,0,0},0,{rightx,righty,rightz},0}}, \</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="preprocessor">            { {{0,0x80,0},0,{0,0x80,0},0,{upx,upy,upz},0}}}   }</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="comment"> *  Graphics DMA Packet</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    par:8;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    len:16;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    addr;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;} Gdma;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="comment"> * Graphics Immediate Mode Packet types</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="keywordtype">int</span>     pad:24;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        Tri     tri;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;} Gtri;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        <span class="keywordtype">int</span>     pad1:24;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <span class="keywordtype">int</span>             pad2:24;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   param:8;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;} Gpopmtx;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="comment"> * typedef struct {</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="comment"> *      int     cmd:8;</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="comment"> *      int     pad0:24;</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment"> *      int     pad1:4;</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment"> *      int     number:4;</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment"> *      int     base:24;</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment"> * } Gsegment;</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="keywordtype">int</span>     pad0:8;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        <span class="keywordtype">int</span>     mw_index:8;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        <span class="keywordtype">int</span>     <a class="code" href="../../d9/d0b/err_8english_8cc.html#abc23ab6cce18438940dbc3ddeaa74270">number</a>:8;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        <span class="keywordtype">int</span>     pad1:8;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        <span class="keywordtype">int</span>     base:24;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;} Gsegment;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <span class="keywordtype">int</span>     pad0:8;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <span class="keywordtype">int</span>     sft:8;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <span class="keywordtype">int</span>     len:8;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="../../d8/d51/dma_8c.html#a511ae0b1c13f95e5f08f1a0dd3da3d93">data</a>:32;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;} GsetothermodeL;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordtype">int</span>     pad0:8;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        <span class="keywordtype">int</span>     sft:8;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <span class="keywordtype">int</span>     len:8;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="../../d8/d51/dma_8c.html#a511ae0b1c13f95e5f08f1a0dd3da3d93">data</a>:32;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;} GsetothermodeH;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   cmd;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   lodscale;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   tile;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   on;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>  <a class="code" href="../../d9/d0b/err_8english_8cc.html#af4ea43c8cfd3b8c343d776bed09719b9">s</a>;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>  t;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;} Gtexture;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <span class="keywordtype">int</span>     pad:24;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        Tri     line;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;} Gline3D;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <span class="keywordtype">int</span>     pad1:24;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <span class="keywordtype">short</span> <span class="keywordtype">int</span>   pad2;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        <span class="keywordtype">short</span> <span class="keywordtype">int</span>       scale;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;} Gperspnorm;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment"> * RDP Packet types</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                <span class="keywordtype">int</span>             cmd:8;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    fmt:3;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    siz:2;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    pad:7;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    wd:12;  <span class="comment">/* really only 10 bits, extra   */</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    dram;   <span class="comment">/* to account for 1024      */</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;} Gsetimg;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    muxs0:24;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    muxs1:32;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;} Gsetcombine;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   pad;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   prim_min_level;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   prim_level;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>   color;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;} Gsetcolor;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="keywordtype">int</span>     x0:10;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        <span class="keywordtype">int</span>     x0frac:2;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="keywordtype">int</span>     y0:10;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordtype">int</span>     y0frac:2;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    pad:8;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keywordtype">int</span>     x1:10;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="keywordtype">int</span>     x1frac:2;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        <span class="keywordtype">int</span>     y1:10;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <span class="keywordtype">int</span>     y1frac:2;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;} Gfillrect;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    fmt:3;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    siz:2;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    pad0:1;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    line:9;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    tmem:9;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    pad1:5;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    tile:3;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    palette:4;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    ct:1;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    mt:1;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    maskt:4;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    shiftt:4;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    cs:1;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    ms:1;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    masks:4;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    shifts:4;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;} Gsettile;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <span class="keywordtype">int</span>     cmd:8;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    sl:12;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    tl:12;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <span class="keywordtype">int</span>     pad:5;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    tile:3;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    sh:12;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    th:12;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;} Gloadtile;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="keyword">typedef</span> Gloadtile Gloadblock;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="keyword">typedef</span> Gloadtile Gsettilesize;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="keyword">typedef</span> Gloadtile Gloadtlut;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    cmd:8;  <span class="comment">/* command          */</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    xl:12;  <span class="comment">/* X coordinate of upper left   */</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    yl:12;  <span class="comment">/* Y coordinate of upper left   */</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    pad1:5; <span class="comment">/* Padding          */</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    tile:3; <span class="comment">/* Tile descriptor index    */</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    xh:12;  <span class="comment">/* X coordinate of lower right  */</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    yh:12;  <span class="comment">/* Y coordinate of lower right  */</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="../../d9/d0b/err_8english_8cc.html#af4ea43c8cfd3b8c343d776bed09719b9">s</a>:16;   <span class="comment">/* S texture coord at top left  */</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    t:16;   <span class="comment">/* T texture coord at top left  */</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    dsdx:16;<span class="comment">/* Change in S per change in X  */</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    dtdy:16;<span class="comment">/* Change in T per change in Y  */</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;} Gtexrect;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="preprocessor">#define MakeTexRect(xh,yh,flip,tile,xl,yl,s,t,dsdx,dtdy)        \</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="preprocessor">    G_TEXRECT, xh, yh, 0, flip, 0, tile, xl, yl, s, t, dsdx, dtdy</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment"> * Textured rectangles are 128 bits not 64 bits</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment"> */</span> </div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> w0;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> w1;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> w2;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> w3;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;} TexRect;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment"> * Generic Gfx Packet</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> w0;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> w1;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;} <a class="code" href="../../dc/db8/structGwords.html">Gwords</a>;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment"> * This union is the fundamental type of the display list.</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment"> * It is, by law, exactly 64 bits in size.</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <a class="code" href="../../dc/db8/structGwords.html">Gwords</a>      words;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    Gdma        dma;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    Gtri        tri;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    Gline3D     line;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    Gpopmtx     popmtx;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    Gsegment    segment;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    GsetothermodeH  setothermodeH;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    GsetothermodeL  setothermodeL;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    Gtexture    texture;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    Gperspnorm  perspnorm;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    Gsetimg     setimg;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    Gsetcombine setcombine;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    Gsetcolor   setcolor;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    Gfillrect   fillrect;   <span class="comment">/* use for setscissor also */</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    Gsettile    settile;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    Gloadtile   loadtile;   <span class="comment">/* use for loadblock also, th is dxt */</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    Gsettilesize    settilesize;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    Gloadtlut   loadtlut;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>   force_structure_alignment;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;} <a class="code" href="../../d9/d0b/unionGfx.html">Gfx</a>;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment"> * Macros to assemble the graphics display list</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment"> * DMA macros</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="preprocessor">#define gDma0p(pkt, c, s, l)                        \</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL((c), 24, 8) | _SHIFTL((l), 0, 24);   \</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(s);               \</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="preprocessor">#define gsDma0p(c, s, l)                        \</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="preprocessor">    _SHIFTL((c), 24, 8) | _SHIFTL((l), 0, 24), (unsigned int)(s)    \</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="preprocessor">#define gDma1p(pkt, c, s, l, p)                     \</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL((c), 24, 8) | _SHIFTL((p), 16, 8) | \</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="preprocessor">            _SHIFTL((l), 0, 16));               \</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(s);               \</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="preprocessor">#define gsDma1p(c, s, l, p)                     \</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="preprocessor">    (_SHIFTL((c), 24, 8) | _SHIFTL((p), 16, 8) |            \</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="preprocessor">     _SHIFTL((l), 0, 16)),                      \</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="preprocessor">        (unsigned int)(s)                       \</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="preprocessor">#define gDma2p(pkt, c, adrs, len, idx, ofs)             \</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL((c),24,8)|_SHIFTL(((len)-1)/8,19,5)|    \</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="preprocessor">            _SHIFTL((ofs)/8,8,8)|_SHIFTL((idx),0,8));   \</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(adrs);                \</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;<span class="preprocessor">#define gsDma2p(c, adrs, len, idx, ofs)                 \</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;<span class="preprocessor">    (_SHIFTL((c),24,8)|_SHIFTL(((len)-1)/8,19,5)|           \</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;<span class="preprocessor">     _SHIFTL((ofs)/8,8,8)|_SHIFTL((idx),0,8)),          \</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="preprocessor">        (unsigned int)(adrs)                        \</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="preprocessor">#define gSPNoOp(pkt)        gDma0p(pkt, G_SPNOOP, 0, 0)</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="preprocessor">#define gsSPNoOp()      gsDma0p(G_SPNOOP, 0, 0)</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="preprocessor"># define    gSPMatrix(pkt, m, p)    \</span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="preprocessor">        gDma2p((pkt),G_MTX,(m),sizeof(Mtx),(p)^G_MTX_PUSH,0)</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="preprocessor"># define    gsSPMatrix(m, p)    \</span></div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="preprocessor">        gsDma2p(     G_MTX,(m),sizeof(Mtx),(p)^G_MTX_PUSH,0)</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="preprocessor"># define    gSPMatrix(pkt, m, p)    gDma1p(pkt, G_MTX, m, sizeof(Mtx), p)</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;<span class="preprocessor"># define    gsSPMatrix(m, p)    gsDma1p(G_MTX, m, sizeof(Mtx), p)</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="preprocessor">#if defined(F3DEX_GBI_2)</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="comment"> * F3DEX_GBI_2: G_VTX GBI format was changed.</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="comment"> *        +--------+----+---+---+----+------+-+</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment"> *  G_VTX |  cmd:8 |0000|  n:8  |0000|v0+n:7|0|</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment"> *        +-+---+--+----+---+---+----+------+-+</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment"> *        | |seg|         address             |</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="comment"> *        +-+---+-----------------------------+</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;<span class="preprocessor"># define    gSPVertex(pkt, v, n, v0)                \</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 =                          \</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;<span class="preprocessor">      _SHIFTL(G_VTX,24,8)|_SHIFTL((n),12,8)|_SHIFTL((v0)+(n),1,7);  \</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(v);               \</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="preprocessor"># define    gsSPVertex(v, n, v0)                    \</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="preprocessor">    (_SHIFTL(G_VTX,24,8)|_SHIFTL((n),12,8)|_SHIFTL((v0)+(n),1,7)),  \</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="preprocessor">        (unsigned int)(v)                       \</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;<span class="preprocessor">#elif   (defined(F3DEX_GBI)||defined(F3DLP_GBI))</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;<span class="comment"> * F3DEX_GBI: G_VTX GBI format was changed to support 64 vertice.</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;<span class="comment"> *        +--------+--------+------+----------+</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment"> *  G_VTX |  cmd:8 |  v0:8  |  n:6 |length:10 |</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment"> *        +-+---+--+--------+------+----------+</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment"> *        | |seg|          address            |</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment"> *        +-+---+-----------------------------+</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="preprocessor"># define    gSPVertex(pkt, v, n, v0) \</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="preprocessor">                gDma1p((pkt),G_VTX,(v),((n)&lt;&lt;10)|(sizeof(Vtx)*(n)-1),(v0)*2)</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="preprocessor"># define    gsSPVertex(v, n, v0) \</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="preprocessor">                gsDma1p(G_VTX,(v),((n)&lt;&lt;10)|(sizeof(Vtx)*(n)-1),(v0)*2)</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="preprocessor"># define    gSPVertex(pkt, v, n, v0) \</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="preprocessor">                gDma1p(pkt, G_VTX, v, sizeof(Vtx)*(n),((n)-1)&lt;&lt;4|(v0))</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="preprocessor"># define    gsSPVertex(v, n, v0) \</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="preprocessor">                gsDma1p(G_VTX, v, sizeof(Vtx)*(n), ((n)-1)&lt;&lt;4|(v0))</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    </div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="preprocessor"># define gSPViewport(pkt, v)    \</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="preprocessor">        gDma2p((pkt), G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT, 0)</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="preprocessor"># define gsSPViewport(v)    \</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="preprocessor">        gsDma2p(      G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT, 0)</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="preprocessor"># define gSPViewport(pkt,v) \</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="preprocessor">        gDma1p((pkt), G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT)</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="preprocessor"># define gsSPViewport(v)    \</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="preprocessor">        gsDma1p(      G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT)</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="preprocessor">#define gSPDisplayList(pkt,dl)  gDma1p(pkt,G_DL,dl,0,G_DL_PUSH)</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="preprocessor">#define gsSPDisplayList(   dl)  gsDma1p(   G_DL,dl,0,G_DL_PUSH)</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="preprocessor">#define gSPBranchList(pkt,dl)   gDma1p(pkt,G_DL,dl,0,G_DL_NOPUSH)</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="preprocessor">#define gsSPBranchList(   dl)   gsDma1p(   G_DL,dl,0,G_DL_NOPUSH)</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="preprocessor">#define gSPSprite2DBase(pkt, s) gDma1p(pkt, G_SPRITE2D_BASE, s, sizeof(uSprite), 0)</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;<span class="preprocessor">#define gsSPSprite2DBase(s) gsDma1p(G_SPRITE2D_BASE, s, sizeof(uSprite), 0)</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment"> * RSP short command (no DMA required) macros</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="preprocessor">#define gImmp0(pkt, c)                          \</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL((c), 24, 8);             \</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="preprocessor">#define gsImmp0(c)                          \</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="preprocessor">    _SHIFTL((c), 24, 8)                     \</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<span class="preprocessor">#define gImmp1(pkt, c, p0)                      \</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL((c), 24, 8);             \</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(p0);              \</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="preprocessor">#define gsImmp1(c, p0)                          \</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="preprocessor">    _SHIFTL((c), 24, 8), (unsigned int)(p0)             \</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="preprocessor">#define gImmp2(pkt, c, p0, p1)                      \</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL((c), 24, 8);             \</span></div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = _SHIFTL((p0), 16, 16) | _SHIFTL((p1), 8, 8); \</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;<span class="preprocessor">#define gsImmp2(c, p0, p1)                      \</span></div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="preprocessor">    _SHIFTL((c), 24, 8),  _SHIFTL((p0), 16, 16) | _SHIFTL((p1), 8, 8)\</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="preprocessor">#define gImmp3(pkt, c, p0, p1, p2)                  \</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL((c), 24, 8);             \</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL((p0), 16, 16) | _SHIFTL((p1), 8, 8) |   \</span></div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="preprocessor">            _SHIFTL((p2), 0, 8));               \</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="preprocessor">#define gsImmp3(c, p0, p1, p2)                      \</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="preprocessor">    _SHIFTL((c), 24, 8), (_SHIFTL((p0), 16, 16) |           \</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="preprocessor">                  _SHIFTL((p1), 8, 8) | _SHIFTL((p2), 0, 8))\</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="preprocessor">#define gImmp21(pkt, c, p0, p1, dat)                    \</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL((c), 24, 8)  | _SHIFTL((p0), 8, 16) |   \</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="preprocessor">            _SHIFTL((p1), 0, 8));               \</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int) (dat);                \</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="preprocessor">#define gsImmp21(c, p0, p1, dat)                    \</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="preprocessor">    _SHIFTL((c), 24, 8) | _SHIFTL((p0), 8, 16) | _SHIFTL((p1), 0, 8),\</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="preprocessor">        (unsigned int) (dat)                        \</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="preprocessor">#define gMoveWd(pkt, index, offset, data)               \</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;<span class="preprocessor">    gDma1p((pkt), G_MOVEWORD, data, offset, index)</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="preprocessor">#define gsMoveWd(    index, offset, data)               \</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="preprocessor">    gsDma1p(      G_MOVEWORD, data, offset, index)</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;<span class="preprocessor">#define gMoveWd(pkt, index, offset, data)               \</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="preprocessor">    gImmp21((pkt), G_MOVEWORD, offset, index, data)</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="preprocessor">#define gsMoveWd(    index, offset, data)               \</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;<span class="preprocessor">    gsImmp21(      G_MOVEWORD, offset, index, data)</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;<span class="comment">/* Sprite immediate macros, there is also a sprite dma macro above */</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;<span class="preprocessor">#define gSPSprite2DScaleFlip(pkt, sx, sy, fx, fy)                       \</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="preprocessor">{                                                                       \</span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_SPRITE2D_SCALEFLIP, 24, 8) |          \</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="preprocessor">            _SHIFTL((fx), 8, 8) |                           \</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="preprocessor">            _SHIFTL((fy), 0, 8));                           \</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL((sx), 16, 16) |                         \</span></div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="preprocessor">            _SHIFTL((sy),  0, 16));                         \</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="preprocessor">#define gsSPSprite2DScaleFlip(sx, sy, fx, fy)                           \</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="preprocessor">{{                                                                       \</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="preprocessor">          (_SHIFTL(G_SPRITE2D_SCALEFLIP, 24, 8) |                       \</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="preprocessor">       _SHIFTL((fx), 8, 8) |                                        \</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;<span class="preprocessor">       _SHIFTL((fy), 0, 8)),                                    \</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="preprocessor">      (_SHIFTL((sx), 16, 16) |                                      \</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="preprocessor">       _SHIFTL((sy),  0, 16))                                       \</span></div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="preprocessor">#define gSPSprite2DDraw(pkt, px, py)                                    \</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="preprocessor">{                                                                       \</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_SPRITE2D_DRAW, 24, 8));               \</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL((px), 16, 16) |                         \</span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<span class="preprocessor">            _SHIFTL((py),  0, 16));                         \</span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="preprocessor">#define gsSPSprite2DDraw(px, py)                                        \</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="preprocessor">{{                                                                       \</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="preprocessor">          (_SHIFTL(G_SPRITE2D_DRAW, 24, 8)),                            \</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="preprocessor">      (_SHIFTL((px), 16, 16) |                                      \</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="preprocessor">       _SHIFTL((py),  0, 16))                                       \</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment"> * Note: the SP1Triangle() and line macros multiply the vertex indices</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment"> * by 10, this is an optimization for the microcode.</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="preprocessor">#if (defined(F3DLP_GBI)||defined(F3DEX_GBI))</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="preprocessor">#  define __gsSP1Triangle_w1(v0, v1, v2)            \</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="preprocessor">     (_SHIFTL((v0)*2,16,8)|_SHIFTL((v1)*2,8,8)|_SHIFTL((v2)*2,0,8))</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="preprocessor">#  define __gsSP1Triangle_w1f(v0, v1, v2, flag)         \</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="preprocessor">     (((flag) == 0) ? __gsSP1Triangle_w1(v0, v1, v2):       \</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="preprocessor">      ((flag) == 1) ? __gsSP1Triangle_w1(v1, v2, v0):       \</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="preprocessor">                  __gsSP1Triangle_w1(v2, v0, v1))</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="preprocessor">#  define __gsSPLine3D_w1(v0, v1, wd)               \</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="preprocessor">     (_SHIFTL((v0)*2,16,8)|_SHIFT((v1)*2,8,8)|_SHIFT((wd),0,8))</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="preprocessor">#  define __gsSPLine3D_w1f(v0, v1, wd, flag)            \</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="preprocessor">     (((flag) == 0) ? __gsSPLine3D_w1(v0, v1, wd):      \</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="preprocessor">                  __gsSPLine3D_w1(v1, v0, wd))</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="preprocessor">#  define __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag)   \</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="preprocessor">  (((flag) == 0) ? __gsSP1Triangle_w1(v0, v1, v2):      \</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="preprocessor">   ((flag) == 1) ? __gsSP1Triangle_w1(v1, v2, v3):      \</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;<span class="preprocessor">   ((flag) == 2) ? __gsSP1Triangle_w1(v2, v3, v0):      \</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;<span class="preprocessor">                   __gsSP1Triangle_w1(v3, v0, v1))</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="preprocessor">#  define __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag)   \</span></div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="preprocessor">  (((flag) == 0) ? __gsSP1Triangle_w1(v0, v2, v3):      \</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="preprocessor">   ((flag) == 1) ? __gsSP1Triangle_w1(v1, v3, v0):      \</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="preprocessor">   ((flag) == 2) ? __gsSP1Triangle_w1(v2, v0, v1):      \</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="preprocessor">                   __gsSP1Triangle_w1(v3, v1, v2))</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="preprocessor">#  define __gsSP1Triangle_w1f(v0, v1, v2, flag)         \</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="preprocessor">     (_SHIFTL((flag), 24,8)|_SHIFTL((v0)*10,16,8)|      \</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="preprocessor">      _SHIFTL((v1)*10, 8,8)|_SHIFTL((v2)*10, 0,8))</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="preprocessor">#  define __gsSPLine3D_w1f(v0, v1, wd, flag)            \</span></div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;<span class="preprocessor">     (_SHIFTL((flag), 24,8)|_SHIFTL((v0)*10,16,8)|      \</span></div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;<span class="preprocessor">      _SHIFTL((v1)*10, 8,8)|_SHIFTL((wd),    0,8))</span></div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="comment"> ***  1 Triangle</span></div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="preprocessor">#define gSP1Triangle(pkt, v0, v1, v2, flag)             \</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_TRI1, 24, 8)|              \</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="preprocessor">            __gsSP1Triangle_w1f(v0, v1, v2, flag);      \</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = 0;                       \</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="preprocessor">#define gsSP1Triangle(v0, v1, v2, flag)                 \</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="preprocessor">    _SHIFTL(G_TRI1, 24, 8)|__gsSP1Triangle_w1f(v0, v1, v2, flag),   \</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="preprocessor">    0                               \</span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;<span class="comment"> ***  Line</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="preprocessor">#define gSPLine3D(pkt, v0, v1, flag)                    \</span></div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_LINE3D, 24, 8)|            \</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="preprocessor">            __gsSPLine3D_w1f(v0, v1, 0, flag);      \</span></div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = 0;                       \</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="preprocessor">#define gsSPLine3D(v0, v1, flag)                    \</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="preprocessor">    _SHIFTL(G_LINE3D, 24, 8)|__gsSPLine3D_w1f(v0, v1, 0, flag), \</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;<span class="preprocessor">    0                               \</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="comment"> ***  LineW</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;<span class="comment">/* these macros are the same as SPLine3D, except they have an</span></div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="comment"> * additional parameter for width. The width is added to the &quot;minimum&quot;</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="comment"> * thickness, which is 1.5 pixels. The units for width are in</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="comment"> * half-pixel units, so a width of 1 translates to (.5 + 1.5) or</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;<span class="comment"> * a 2.0 pixels wide line.</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;<span class="preprocessor">#define gSPLineW3D(pkt, v0, v1, wd, flag)               \</span></div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_LINE3D, 24, 8)|            \</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="preprocessor">            __gsSPLine3D_w1f(v0, v1, wd, flag);     \</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = 0;                       \</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="preprocessor">#define gsSPLineW3D(v0, v1, wd, flag)                   \</span></div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="preprocessor">    _SHIFTL(G_LINE3D, 24, 8)|__gsSPLine3D_w1f(v0, v1, wd, flag),    \</span></div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="preprocessor">    0                               \</span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment"> ***  1 Quadrangle</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="preprocessor">#define gSP1Quadrangle(pkt, v0, v1, v2, v3, flag)                       \</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="preprocessor">{                                                                       \</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="preprocessor">        Gfx *_g = (Gfx *)(pkt);                                         \</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="preprocessor">        _g-&gt;words.w0 = (_SHIFTL(G_QUAD, 24, 8)|                         \</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="preprocessor">                        __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag));   \</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;<span class="preprocessor">        _g-&gt;words.w1 =  __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag);    \</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="preprocessor">#define gsSP1Quadrangle(v0, v1, v2, v3, flag)                           \</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="preprocessor">{{                                                                       \</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;<span class="preprocessor">        (_SHIFTL(G_QUAD, 24, 8)|                                        \</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="preprocessor">         __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag)),                  \</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="preprocessor">         __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag)                    \</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="comment"> ***  1 Triangle</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="comment"> ***/</span>   </div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;<span class="preprocessor">#define gSP1Triangle(pkt, v0, v1, v2, flag)             \</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_TRI1, 24, 8);              \</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = __gsSP1Triangle_w1f(v0, v1, v2, flag);       \</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="preprocessor">#define gsSP1Triangle(v0, v1, v2, flag)                 \</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="preprocessor">    _SHIFTL(G_TRI1, 24, 8),                     \</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="preprocessor">    __gsSP1Triangle_w1f(v0, v1, v2, flag)               \</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment"> ***  Line</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="preprocessor">#define gSPLine3D(pkt, v0, v1, flag)                    \</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_LINE3D, 24, 8);            \</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = __gsSPLine3D_w1f(v0, v1, 0, flag);       \</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="preprocessor">#define gsSPLine3D(v0, v1, flag)                    \</span></div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="preprocessor">    _SHIFTL(G_LINE3D, 24, 8),                   \</span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;<span class="preprocessor">    __gsSPLine3D_w1f(v0, v1, 0, flag)               \</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="comment"> ***  LineW</span></div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">/* these macros are the same as SPLine3D, except they have an</span></div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment"> * additional parameter for width. The width is added to the &quot;minimum&quot;</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment"> * thickness, which is 1.5 pixels. The units for width are in</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment"> * half-pixel units, so a width of 1 translates to (.5 + 1.5) or</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment"> * a 2.0 pixels wide line.</span></div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="preprocessor">#define gSPLineW3D(pkt, v0, v1, wd, flag)               \</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_LINE3D, 24, 8);            \</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = __gsSPLine3D_w1f(v0, v1, wd, flag);      \</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="preprocessor">#define gsSPLineW3D(v0, v1, wd, flag)                   \</span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="preprocessor">    _SHIFTL(G_LINE3D, 24, 8),                   \</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="preprocessor">    __gsSPLine3D_w1f(v0, v1, wd, flag)              \</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="comment"> ***  1 Quadrangle</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="preprocessor">#define gSP1Quadrangle(pkt, v0, v1, v2, v3, flag)                       \</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="preprocessor">{                                                                       \</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;<span class="preprocessor">        Gfx *_g = (Gfx *)(pkt);                                         \</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="preprocessor">        _g-&gt;words.w0 = (_SHIFTL(G_TRI2, 24, 8)|                         \</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="preprocessor">                        __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag));   \</span></div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="preprocessor">        _g-&gt;words.w1 =  __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag);    \</span></div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;<span class="preprocessor">#define gsSP1Quadrangle(v0, v1, v2, v3, flag)                           \</span></div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;<span class="preprocessor">{{                                                                       \</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;<span class="preprocessor">        (_SHIFTL(G_TRI2, 24, 8)|                                        \</span></div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;<span class="preprocessor">         __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag)),                  \</span></div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;<span class="preprocessor">         __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag)                    \</span></div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="preprocessor">#if (defined(F3DLP_GBI)||defined(F3DEX_GBI))</span></div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;<span class="comment"> ***  2 Triangles</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;<span class="preprocessor">#define gSP2Triangles(pkt, v00, v01, v02, flag0, v10, v11, v12, flag1)  \</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TRI2, 24, 8)|             \</span></div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;<span class="preprocessor">            __gsSP1Triangle_w1f(v00, v01, v02, flag0)); \</span></div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="preprocessor">        _g-&gt;words.w1 =  __gsSP1Triangle_w1f(v10, v11, v12, flag1);  \</span></div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;<span class="preprocessor">#define gsSP2Triangles(v00, v01, v02, flag0, v10, v11, v12, flag1)  \</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="preprocessor">    (_SHIFTL(G_TRI2, 24, 8)|                    \</span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="preprocessor">     __gsSP1Triangle_w1f(v00, v01, v02, flag0)),            \</span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="preprocessor">     __gsSP1Triangle_w1f(v10, v11, v12, flag1)          \</span></div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI/F3DLP_GBI */</span><span class="preprocessor"></span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="preprocessor">#if (defined(F3DEX_GBI)||defined(F3DLP_GBI))</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="preprocessor">#define gSPCullDisplayList(pkt,vstart,vend)             \</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_CULLDL, 24, 8) |           \</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="preprocessor">            _SHIFTL((vstart)*2, 0, 16);         \</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = _SHIFTL((vend)*2, 0, 16);            \</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="preprocessor">#define gsSPCullDisplayList(vstart,vend)                \</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="preprocessor">    _SHIFTL(G_CULLDL, 24, 8) | _SHIFTL((vstart)*2, 0, 16),      \</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="preprocessor">    _SHIFTL((vend)*2, 0, 16)                    \</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="preprocessor">#define gSPCullDisplayList(pkt,vstart,vend)             \</span></div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_CULLDL, 24, 8) |           \</span></div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;<span class="preprocessor">                       ((0x0f &amp; (vstart))*40);              \</span></div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)((0x0f &amp; ((vend)+1))*40);      \</span></div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;<span class="preprocessor">#define gsSPCullDisplayList(vstart,vend)                \</span></div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;<span class="preprocessor">    _SHIFTL(G_CULLDL, 24, 8) | ((0x0f &amp; (vstart))*40),      \</span></div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<span class="preprocessor">    ((0x0f &amp; ((vend)+1))*40)                    \</span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="preprocessor">#define gSPSegment(pkt, segment, base)                  \</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_SEGMENT, (segment)*4, base)</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="preprocessor">#define gsSPSegment(segment, base)                  \</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="preprocessor">    gsMoveWd(    G_MW_SEGMENT, (segment)*4, base)</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment"> * Clipping Macros</span></div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="preprocessor">#define FR_NEG_FRUSTRATIO_1 0x00000001</span></div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="preprocessor">#define FR_POS_FRUSTRATIO_1 0x0000ffff</span></div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="preprocessor">#define FR_NEG_FRUSTRATIO_2 0x00000002</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="preprocessor">#define FR_POS_FRUSTRATIO_2 0x0000fffe</span></div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="preprocessor">#define FR_NEG_FRUSTRATIO_3 0x00000003</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="preprocessor">#define FR_POS_FRUSTRATIO_3 0x0000fffd</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="preprocessor">#define FR_NEG_FRUSTRATIO_4 0x00000004</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="preprocessor">#define FR_POS_FRUSTRATIO_4 0x0000fffc</span></div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="preprocessor">#define FR_NEG_FRUSTRATIO_5 0x00000005</span></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="preprocessor">#define FR_POS_FRUSTRATIO_5 0x0000fffb</span></div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="preprocessor">#define FR_NEG_FRUSTRATIO_6 0x00000006</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="preprocessor">#define FR_POS_FRUSTRATIO_6 0x0000fffa</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment"> * r should be one of: FRUSTRATIO_1, FRUSTRATIO_2, FRUSTRATIO_3, ... FRUSTRATIO_6</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="preprocessor">#define gSPClipRatio(pkt, r)                        \</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RNX, FR_NEG_##r);        \</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RNY, FR_NEG_##r);        \</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RPX, FR_POS_##r);        \</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RPY, FR_POS_##r);        \</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="preprocessor">#define gsSPClipRatio(r)                        \</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="preprocessor">    gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RNX, FR_NEG_##r),        \</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="preprocessor">    gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RNY, FR_NEG_##r),        \</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="preprocessor">    gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RPX, FR_POS_##r),        \</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="preprocessor">    gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RPY, FR_POS_##r)</span></div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment"> * Insert values into Matrix</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment"> * where = element of matrix (byte offset)</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment"> * num   = new element (32 bit value replacing 2 int or 2 frac matrix </span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment"> *                                 componants</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="preprocessor">#define gSPInsertMatrix(pkt, where, num)                \</span></div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="preprocessor">    ERROR!! gSPInsertMatrix is no longer supported.</span></div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="preprocessor">#define gsSPInsertMatrix(where, num)                    \</span></div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<span class="preprocessor">    ERROR!! gsSPInsertMatrix is no longer supported.</span></div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="preprocessor">#define gSPInsertMatrix(pkt, where, num)                \</span></div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_MATRIX, where, num)</span></div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="preprocessor">#define gsSPInsertMatrix(where, num)                    \</span></div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="preprocessor">    gsMoveWd(G_MW_MATRIX, where, num)</span></div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment"> * Load new matrix directly</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment"> * mptr = pointer to matrix</span></div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;<span class="preprocessor">#define gSPForceMatrix(pkt, mptr)                   \</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="preprocessor">{   gDma2p((pkt),G_MOVEMEM,(mptr),sizeof(Mtx),G_MV_MATRIX,0);   \</span></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="preprocessor">    gMoveWd((pkt), G_MW_FORCEMTX,0,0x00010000);         \</span></div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;<span class="preprocessor">#define gsSPForceMatrix(mptr)                       \</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;<span class="preprocessor">    gsDma2p(G_MOVEMEM,(mptr),sizeof(Mtx),G_MV_MATRIX,0),        \</span></div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;<span class="preprocessor">    gsMoveWd(G_MW_FORCEMTX,0,0x00010000)</span></div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    </div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="preprocessor">#define gSPForceMatrix(pkt, mptr)                   \</span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="preprocessor">    gDma1p(pkt, G_MOVEMEM, mptr,              16, G_MV_MATRIX_1);   \</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="preprocessor">    gDma1p(pkt, G_MOVEMEM, (char *)(mptr)+16, 16, G_MV_MATRIX_2);   \</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="preprocessor">    gDma1p(pkt, G_MOVEMEM, (char *)(mptr)+32, 16, G_MV_MATRIX_3);   \</span></div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="preprocessor">    gDma1p(pkt, G_MOVEMEM, (char *)(mptr)+48, 16, G_MV_MATRIX_4);   \</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="preprocessor">#define gsSPForceMatrix(mptr)                       \</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="preprocessor">    gsDma1p(    G_MOVEMEM, mptr,              16, G_MV_MATRIX_1),   \</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<span class="preprocessor">    gsDma1p(    G_MOVEMEM, (char *)(mptr)+16, 16, G_MV_MATRIX_2),   \</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="preprocessor">    gsDma1p(    G_MOVEMEM, (char *)(mptr)+32, 16, G_MV_MATRIX_3),   \</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="preprocessor">    gsDma1p(    G_MOVEMEM, (char *)(mptr)+48, 16, G_MV_MATRIX_4)</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment"> * Insert values into Points</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="comment"> * point = point number 0-15</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment"> * where = which element of point to modify (byte offset into point)</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="comment"> * num   = new value (32 bit)</span></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="preprocessor">#if (defined(F3DEX_GBI)||defined(F3DLP_GBI))</span></div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;<span class="preprocessor"># define gSPModifyVertex(pkt, vtx, where, val)              \</span></div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_MODIFYVTX,24,8)|          \</span></div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="preprocessor">                _SHIFTL((where),16,8)|_SHIFTL((vtx)*2,0,16));   \</span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(val);             \</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="preprocessor"># define gsSPModifyVertex(vtx, where, val)              \</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="preprocessor">    _SHIFTL(G_MODIFYVTX,24,8)|                  \</span></div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="preprocessor">    _SHIFTL((where),16,8)|_SHIFTL((vtx)*2,0,16),            \</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="preprocessor">    (unsigned int)(val)                     \</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="preprocessor"># define gSPModifyVertex(pkt, vtx, where, val)              \</span></div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="preprocessor">     gMoveWd(pkt, G_MW_POINTS, (vtx)*40+(where), val)</span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="preprocessor"># define gsSPModifyVertex(vtx, where, val)              \</span></div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="preprocessor">     gsMoveWd(G_MW_POINTS, (vtx)*40+(where), val)</span></div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="preprocessor">#if (defined(F3DEX_GBI)||defined(F3DLP_GBI))</span></div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="comment"> *  gSPBranchLessZ   Branch DL if (vtx.z) less than or equal (zval).</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment"> *  dl   = DL branch to </span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment"> *  vtx  = Vertex</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment"> *  zval = Screen depth</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment"> *  near = Near plane</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment"> *  far  = Far  plane</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment"> *  flag = G_BZ_PERSP or G_BZ_ORTHO</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<span class="preprocessor">#define G_BZ_PERSP  0</span></div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="preprocessor">#define G_BZ_ORTHO  1</span></div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="preprocessor">#define G_DEPTOZSrg(zval, near, far, flag, zmin, zmax)          \</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="preprocessor">(((unsigned int)FTOFIX32(((flag) == G_BZ_PERSP ?            \</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="preprocessor">              (1.0f-(float)(near)/(float)(zval)) /      \</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="preprocessor">              (1.0f-(float)(near)/(float)(far )) :      \</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="preprocessor">              ((float)(zval) - (float)(near)) /     \</span></div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="preprocessor">              ((float)(far ) - (float)(near))))) *      \</span></div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;<span class="preprocessor"> (((int)((zmax) - (zmin)))&amp;~1) + (int)FTOFIX32(zmin))</span></div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;<span class="preprocessor">#define G_DEPTOZS(zval, near, far, flag) \</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="preprocessor">    G_DEPTOZSrg(zval, near, far, flag, 0, G_MAXZ)</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;<span class="preprocessor">#define gSPBranchLessZrg(pkt, dl, vtx, zval, near, far, flag, zmin, zmax) \</span></div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_RDPHALF_1,24,8);           \</span></div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(dl);              \</span></div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="preprocessor">    _g = (Gfx *)(pkt);                      \</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_BRANCH_Z,24,8)|           \</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="preprocessor">                _SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12));  \</span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = G_DEPTOZSrg(zval, near, far, flag, zmin, zmax);  \</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<span class="preprocessor">#define gsSPBranchLessZrg(dl, vtx, zval, near, far, flag, zmin, zmax)         \</span></div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="preprocessor">{{  _SHIFTL(G_RDPHALF_1,24,8),                        \</span></div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;<span class="preprocessor">    (unsigned int)(dl),                     }},    \</span></div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;<span class="preprocessor">{{  _SHIFTL(G_BRANCH_Z,24,8)|_SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12),\</span></div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;<span class="preprocessor">    G_DEPTOZSrg(zval, near, far, flag, zmin, zmax),         }}</span></div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;<span class="preprocessor">#define gSPBranchLessZ(pkt, dl, vtx, zval, near, far, flag)     \</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="preprocessor">    gSPBranchLessZrg(pkt, dl, vtx, zval, near, far, flag, 0, G_MAXZ)</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="preprocessor">#define gsSPBranchLessZ(dl, vtx, zval, near, far, flag)         \</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;<span class="preprocessor">    gsSPBranchLessZrg(dl, vtx, zval, near, far, flag, 0, G_MAXZ)</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;<span class="comment"> *  gSPBranchLessZraw   Branch DL if (vtx.z) less than or equal (raw zval).</span></div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="comment"> *  dl   = DL branch to </span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;<span class="comment"> *  vtx  = Vertex</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;<span class="comment"> *  zval = Raw value of screen depth</span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;<span class="preprocessor">#define gSPBranchLessZraw(pkt, dl, vtx, zval)               \</span></div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_RDPHALF_1,24,8);           \</span></div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(dl);              \</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;<span class="preprocessor">    _g = (Gfx *)(pkt);                      \</span></div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_BRANCH_Z,24,8)|           \</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;<span class="preprocessor">                _SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12));  \</span></div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(zval);                \</span></div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;<span class="preprocessor">#define gsSPBranchLessZraw(dl, vtx, zval)               \</span></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;<span class="preprocessor">{{  _SHIFTL(G_RDPHALF_1,24,8),                        \</span></div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="preprocessor">    (unsigned int)(dl),                     }},    \</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;<span class="preprocessor">{{  _SHIFTL(G_BRANCH_Z,24,8)|_SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12),\</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;<span class="preprocessor">    (unsigned int)(zval),                       }}</span></div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="comment"> * gSPLoadUcode   RSP loads specified ucode.</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment"> * uc_start  = ucode text section start</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="comment"> * uc_dstart = ucode data section start</span></div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="preprocessor">#define gSPLoadUcodeEx(pkt, uc_start, uc_dstart, uc_dsize)      \</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_RDPHALF_1,24,8);           \</span></div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(uc_dstart);           \</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="preprocessor">    _g = (Gfx *)(pkt);                      \</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_LOAD_UCODE,24,8)|         \</span></div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="preprocessor">            _SHIFTL((int)(uc_dsize)-1,0,16));       \</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(uc_start);            \</span></div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="preprocessor">#define gsSPLoadUcodeEx(uc_start, uc_dstart, uc_dsize)          \</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="preprocessor">{{  _SHIFTL(G_RDPHALF_1,24,8),                  \</span></div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="preprocessor">    (unsigned int)(uc_dstart),              }}, \</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;<span class="preprocessor">{{  _SHIFTL(G_LOAD_UCODE,24,8)|                 \</span></div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="preprocessor">      _SHIFTL((int)(uc_dsize)-1,0,16),              \</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="preprocessor">    (unsigned int)(uc_start),               }}</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="preprocessor">#define gSPLoadUcode(pkt, uc_start, uc_dstart)              \</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="preprocessor">        gSPLoadUcodeEx((pkt), (uc_start), (uc_dstart), SP_UCODE_DATA_SIZE)</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="preprocessor">#define gsSPLoadUcode(uc_start, uc_dstart)              \</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="preprocessor">        gsSPLoadUcodeEx((uc_start), (uc_dstart), SP_UCODE_DATA_SIZE)</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="preprocessor">#define gSPLoadUcodeL(pkt, ucode)                   \</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;<span class="preprocessor">        gSPLoadUcode((pkt), OS_K0_TO_PHYSICAL(&amp;##ucode##TextStart), \</span></div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="preprocessor">                    OS_K0_TO_PHYSICAL(&amp;##ucode##DataStart))</span></div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;<span class="preprocessor">#define gsSPLoadUcodeL(ucode)                       \</span></div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;<span class="preprocessor">        gsSPLoadUcode(OS_K0_TO_PHYSICAL(&amp;##ucode##TextStart),       \</span></div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;<span class="preprocessor">              OS_K0_TO_PHYSICAL(&amp;##ucode##DataStart))</span></div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;<span class="comment"> * gSPDma_io  DMA to/from DMEM/IMEM for DEBUG.</span></div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;<span class="preprocessor">#define gSPDma_io(pkt, flag, dmem, dram, size)              \</span></div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_DMA_IO,24,8)|_SHIFTL((flag),23,1)| \</span></div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;<span class="preprocessor">      _SHIFTL((dmem)/8,13,10)|_SHIFTL((size)-1,0,12);       \</span></div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(dram);                \</span></div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="preprocessor">#define gsSPDma_io(flag, dmem, dram, size)              \</span></div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<span class="preprocessor">    _SHIFTL(G_DMA_IO,24,8)|_SHIFTL((flag),23,1)|            \</span></div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="preprocessor">    _SHIFTL((dmem)/8,13,10)|_SHIFTL((size)-1,0,12),         \</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="preprocessor">    (unsigned int)(dram)                        \</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;<span class="preprocessor">#define gSPDmaRead(pkt,dmem,dram,size)  gSPDma_io((pkt),0,(dmem),(dram),(size))</span></div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="preprocessor">#define gsSPDmaRead(dmem,dram,size) gsSPDma_io(0,(dmem),(dram),(size))</span></div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<span class="preprocessor">#define gSPDmaWrite(pkt,dmem,dram,size) gSPDma_io((pkt),1,(dmem),(dram),(size))</span></div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;<span class="preprocessor">#define gsSPDmaWrite(dmem,dram,size)    gsSPDma_io(1,(dmem),(dram),(size))</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="comment"> * Lighting Macros</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;<span class="preprocessor"># define NUML(n)    ((n)*24)</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<span class="preprocessor"># define NUML(n)    (((n)+1)*32 + 0x80000000)</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;<span class="preprocessor">#define NUMLIGHTS_0 1</span></div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;<span class="preprocessor">#define NUMLIGHTS_1 1</span></div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="preprocessor">#define NUMLIGHTS_2 2</span></div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;<span class="preprocessor">#define NUMLIGHTS_3 3</span></div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;<span class="preprocessor">#define NUMLIGHTS_4 4</span></div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="preprocessor">#define NUMLIGHTS_5 5</span></div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="preprocessor">#define NUMLIGHTS_6 6</span></div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="preprocessor">#define NUMLIGHTS_7 7</span></div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="comment"> * n should be one of: NUMLIGHTS_0, NUMLIGHTS_1, ..., NUMLIGHTS_7</span></div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="comment"> * NOTE: in addition to the number of directional lights specified, </span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment"> *       there is always 1 ambient light</span></div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="preprocessor">#define gSPNumLights(pkt, n)                        \</span></div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_NUMLIGHT, G_MWO_NUMLIGHT, NUML(n))</span></div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="preprocessor">#define gsSPNumLights(n)                        \</span></div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;<span class="preprocessor">    gsMoveWd(    G_MW_NUMLIGHT, G_MWO_NUMLIGHT, NUML(n))</span></div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;<span class="preprocessor">#define LIGHT_1     1</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;<span class="preprocessor">#define LIGHT_2     2</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;<span class="preprocessor">#define LIGHT_3     3</span></div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<span class="preprocessor">#define LIGHT_4     4</span></div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;<span class="preprocessor">#define LIGHT_5     5   </span></div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;<span class="preprocessor">#define LIGHT_6     6</span></div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;<span class="preprocessor">#define LIGHT_7     7</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="preprocessor">#define LIGHT_8     8</span></div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="comment"> * l should point to a Light struct</span></div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="comment"> * n should be one of: LIGHT_1, LIGHT_2, ..., LIGHT_8</span></div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;<span class="comment"> * NOTE: the highest numbered light is always the ambient light (eg if there are</span></div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;<span class="comment"> *       3 directional lights defined: gsSPNumLights(NUMLIGHTS_3), then lights</span></div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;<span class="comment"> *       LIGHT_1 through LIGHT_3 will be the directional lights and light</span></div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;<span class="comment"> *       LIGHT_4 will be the ambient light.</span></div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="preprocessor"># define gSPLight(pkt, l, n)    \</span></div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;<span class="preprocessor">      gDma2p((pkt),G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,(n)*24+24)</span></div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="preprocessor"># define gsSPLight(l, n)    \</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;<span class="preprocessor">     gsDma2p(      G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,(n)*24+24)</span></div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;<span class="preprocessor"># define gSPLight(pkt, l, n)    \</span></div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;<span class="preprocessor">     gDma1p(pkt, G_MOVEMEM, l, sizeof(Light),((n)-1)*2+G_MV_L0)</span></div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;<span class="preprocessor"># define gsSPLight(l, n)    \</span></div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;<span class="preprocessor">     gsDma1p(    G_MOVEMEM, l, sizeof(Light),((n)-1)*2+G_MV_L0)</span></div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="comment"> * gSPLightColor changes color of light without recalculating light direction</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;<span class="comment"> * col is a 32 bit word with r,g,b,a (alpha is ignored)</span></div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;<span class="comment"> * n should be one of LIGHT_1, LIGHT_2, ..., LIGHT_8</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;<span class="preprocessor">#define gSPLightColor(pkt, n, col)                  \</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_LIGHTCOL, G_MWO_a##n, col);           \</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_LIGHTCOL, G_MWO_b##n, col);           \</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="preprocessor">#define gsSPLightColor(n, col)                      \</span></div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;<span class="preprocessor">    gsMoveWd(G_MW_LIGHTCOL, G_MWO_a##n, col),           \</span></div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="preprocessor">    gsMoveWd(G_MW_LIGHTCOL, G_MWO_b##n, col)</span></div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="comment">/* These macros use a structure &quot;name&quot; which is init&#39;d with the gdSPDefLights macros*/</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="preprocessor">#define gSPSetLights0(pkt,name)                     \</span></div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="preprocessor">    gSPNumLights(pkt,NUMLIGHTS_0);                  \</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[0],1);                 \</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.a,2);                    \</span></div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;<span class="preprocessor">#define gsSPSetLights0(name)                        \</span></div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;<span class="preprocessor">    gsSPNumLights(NUMLIGHTS_0),                 \</span></div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[0],1),                    \</span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.a,2)</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;<span class="preprocessor">#define gSPSetLights1(pkt,name)                     \</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;<span class="preprocessor">    gSPNumLights(pkt,NUMLIGHTS_1);                  \</span></div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[0],1);                 \</span></div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.a,2);                    \</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;<span class="preprocessor">#define gsSPSetLights1(name)                        \</span></div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;<span class="preprocessor">    gsSPNumLights(NUMLIGHTS_1),                 \</span></div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[0],1),                    \</span></div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.a,2)</span></div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;<span class="preprocessor">#define gSPSetLights2(pkt,name)                     \</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;<span class="preprocessor">    gSPNumLights(pkt,NUMLIGHTS_2);                  \</span></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[0],1);                 \</span></div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[1],2);                 \</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.a,3);                    \</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;<span class="preprocessor">#define gsSPSetLights2(name)                        \</span></div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;<span class="preprocessor">    gsSPNumLights(NUMLIGHTS_2),                 \</span></div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[0],1),                    \</span></div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[1],2),                    \</span></div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.a,3)</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;<span class="preprocessor">#define gSPSetLights3(pkt,name)                     \</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;<span class="preprocessor">    gSPNumLights(pkt,NUMLIGHTS_3);                  \</span></div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[0],1);                 \</span></div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[1],2);                 \</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[2],3);                 \</span></div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.a,4);                    \</span></div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;<span class="preprocessor">#define gsSPSetLights3(name)                        \</span></div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;<span class="preprocessor">    gsSPNumLights(NUMLIGHTS_3),                 \</span></div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[0],1),                    \</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[1],2),                    \</span></div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[2],3),                    \</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.a,4)</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;<span class="preprocessor">#define gSPSetLights4(pkt,name)                     \</span></div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;<span class="preprocessor">    gSPNumLights(pkt,NUMLIGHTS_4);                  \</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[0],1);                 \</span></div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[1],2);                 \</span></div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[2],3);                 \</span></div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[3],4);                 \</span></div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.a,5);                    \</span></div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;<span class="preprocessor">#define gsSPSetLights4(name)                        \</span></div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;<span class="preprocessor">    gsSPNumLights(NUMLIGHTS_4),                 \</span></div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[0],1),                    \</span></div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[1],2),                    \</span></div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[2],3),                    \</span></div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[3],4),                    \</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.a,5)</span></div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;<span class="preprocessor">#define gSPSetLights5(pkt,name)                     \</span></div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="preprocessor">    gSPNumLights(pkt,NUMLIGHTS_5);                  \</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[0],1);                 \</span></div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[1],2);                 \</span></div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[2],3);                 \</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[3],4);                 \</span></div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[4],5);                 \</span></div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.a,6);                    \</span></div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="preprocessor">#define gsSPSetLights5(name)                        \</span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="preprocessor">    gsSPNumLights(NUMLIGHTS_5),                 \</span></div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[0],1),                    \</span></div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[1],2),                    \</span></div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[2],3),                    \</span></div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[3],4),                    \</span></div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[4],5),                    \</span></div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.a,6)</span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;<span class="preprocessor">#define gSPSetLights6(pkt,name)                     \</span></div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;<span class="preprocessor">    gSPNumLights(pkt,NUMLIGHTS_6);                  \</span></div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[0],1);                 \</span></div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[1],2);                 \</span></div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[2],3);                 \</span></div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[3],4);                 \</span></div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[4],5);                 \</span></div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[5],6);                 \</span></div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.a,7);                    \</span></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="preprocessor">#define gsSPSetLights6(name)                        \</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="preprocessor">    gsSPNumLights(NUMLIGHTS_6),                 \</span></div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[0],1),                    \</span></div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[1],2),                    \</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[2],3),                    \</span></div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[3],4),                    \</span></div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[4],5),                    \</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[5],6),                    \</span></div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.a,7)</span></div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="preprocessor">#define gSPSetLights7(pkt,name)                     \</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="preprocessor">    gSPNumLights(pkt,NUMLIGHTS_7);                  \</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[0],1);                 \</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[1],2);                 \</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[2],3);                 \</span></div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[3],4);                 \</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[4],5);                 \</span></div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[5],6);                 \</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.l[6],7);                 \</span></div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;<span class="preprocessor">    gSPLight(pkt,&amp;name.a,8);                    \</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="preprocessor">#define gsSPSetLights7(name)                        \</span></div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;<span class="preprocessor">    gsSPNumLights(NUMLIGHTS_7),                 \</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[0],1),                    \</span></div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[1],2),                    \</span></div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[2],3),                    \</span></div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[3],4),                    \</span></div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[4],5),                    \</span></div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[5],6),                    \</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.l[6],7),                    \</span></div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;<span class="preprocessor">    gsSPLight(&amp;name.a,8)</span></div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;<span class="comment"> * Reflection/Hiliting Macros</span></div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;<span class="preprocessor"># define gSPLookAtX(pkt, l) \</span></div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;<span class="preprocessor">     gDma2p((pkt),G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATX)</span></div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="preprocessor"># define gsSPLookAtX(l)     \</span></div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="preprocessor">     gsDma2p(     G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATX)</span></div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="preprocessor"># define gSPLookAtY(pkt, l) \</span></div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;<span class="preprocessor">     gDma2p((pkt),G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATY)</span></div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;<span class="preprocessor"># define gsSPLookAtY(l)     \</span></div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;<span class="preprocessor">     gsDma2p(     G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATY)</span></div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;<span class="preprocessor"># define gSPLookAtX(pkt, l) \</span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;<span class="preprocessor">     gDma1p(pkt, G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATX)</span></div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;<span class="preprocessor"># define gsSPLookAtX(l)     \</span></div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="preprocessor">     gsDma1p(    G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATX)</span></div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="preprocessor"># define gSPLookAtY(pkt, l) \</span></div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="preprocessor">     gDma1p(pkt, G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATY)</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;<span class="preprocessor"># define gsSPLookAtY(l)     \</span></div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;<span class="preprocessor">     gsDma1p(    G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATY)</span></div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;<span class="preprocessor">#define gSPLookAt(pkt, la)                      \</span></div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="preprocessor">    gSPLookAtX(pkt,la)                      \</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="preprocessor">    gSPLookAtY(pkt,(char *)(la)+16)                 \</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="preprocessor">#define gsSPLookAt(la)                          \</span></div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="preprocessor">    gsSPLookAtX(la),                        \</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="preprocessor">    gsSPLookAtY((char *)(la)+16)</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;<span class="preprocessor">#define gDPSetHilite1Tile(pkt, tile, hilite, width, height)     \</span></div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, tile, (hilite)-&gt;h.x1 &amp; 0xfff, (hilite)-&gt;h.y1 &amp; 0xfff,   \</span></div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;<span class="preprocessor">        ((((width)-1)*4)+(hilite)-&gt;h.x1) &amp; 0xfff, ((((height)-1)*4)+(hilite)-&gt;h.y1) &amp; 0xfff)</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;<span class="preprocessor">#define gDPSetHilite2Tile(pkt, tile, hilite, width, height)     \</span></div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, tile, (hilite)-&gt;h.x2 &amp; 0xfff, (hilite)-&gt;h.y2 &amp; 0xfff,   \</span></div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;<span class="preprocessor">        ((((width)-1)*4)+(hilite)-&gt;h.x2) &amp; 0xfff, ((((height)-1)*4)+(hilite)-&gt;h.y2) &amp; 0xfff)</span></div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment"> * FOG macros</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="comment"> * fm = z multiplier</span></div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;<span class="comment"> * fo = z offset</span></div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;<span class="comment"> * FOG FORMULA:    alpha(fog) = (eyespace z) * fm  + fo  CLAMPED 0 to 255</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;<span class="comment"> *   note: (eyespace z) ranges -1 to 1</span></div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;<span class="comment"> * Alternate method of setting fog:</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;<span class="comment"> * min, max: range 0 to 1000: 0=nearplane, 1000=farplane</span></div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;<span class="comment"> * min is where fog begins (usually less than max and often 0)</span></div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;<span class="comment"> * max is where fog is thickest (usually 1000)</span></div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;<span class="preprocessor">#define gSPFogFactor(pkt, fm, fo)               \</span></div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;<span class="preprocessor">        gMoveWd(pkt, G_MW_FOG, G_MWO_FOG,           \</span></div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;<span class="preprocessor">        (_SHIFTL(fm,16,16) | _SHIFTL(fo,0,16)))</span></div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;<span class="preprocessor">#define gsSPFogFactor(fm, fo)                   \</span></div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;<span class="preprocessor">        gsMoveWd(G_MW_FOG, G_MWO_FOG,               \</span></div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;<span class="preprocessor">        (_SHIFTL(fm,16,16) | _SHIFTL(fo,0,16)))</span></div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="preprocessor">#define gSPFogPosition(pkt, min, max)               \</span></div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="preprocessor">    gMoveWd(pkt, G_MW_FOG, G_MWO_FOG,           \</span></div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;<span class="preprocessor">        (_SHIFTL((128000/((max)-(min))),16,16) |        \</span></div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;<span class="preprocessor">        _SHIFTL(((500-(min))*256/((max)-(min))),0,16)))</span></div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;<span class="preprocessor">#define gsSPFogPosition(min, max)               \</span></div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;<span class="preprocessor">    gsMoveWd(G_MW_FOG, G_MWO_FOG,               \</span></div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;<span class="preprocessor">        (_SHIFTL((128000/((max)-(min))),16,16) |        \</span></div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="preprocessor">        _SHIFTL(((500-(min))*256/((max)-(min))),0,16)))</span></div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;<span class="comment"> * Macros to turn texture on/off</span></div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;<span class="preprocessor"># define gSPTexture(pkt, s, t, level, tile, on)             \</span></div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TEXTURE,24,8) |           \</span></div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;<span class="preprocessor">            _SHIFTL(BOWTIE_VAL,16,8) |          \</span></div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;<span class="preprocessor">            _SHIFTL((level),11,3) | _SHIFTL((tile),8,3) |   \</span></div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;<span class="preprocessor">            _SHIFTL((on),1,7));             \</span></div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL((s),16,16) | _SHIFTL((t),0,16));    \</span></div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="preprocessor"># define gsSPTexture(s, t, level, tile, on)             \</span></div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;<span class="preprocessor">    (_SHIFTL(G_TEXTURE,24,8) | _SHIFTL(BOWTIE_VAL,16,8) |       \</span></div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;<span class="preprocessor">     _SHIFTL((level),11,3) | _SHIFTL((tile),8,3) | _SHIFTL((on),1,7)),\</span></div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;<span class="preprocessor">        (_SHIFTL((s),16,16) | _SHIFTL((t),0,16))            \</span></div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;<span class="comment">/* </span></div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;<span class="comment"> * Different version of SPTexture macro, has an additional parameter</span></div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="comment"> * which is currently reserved in the microcode.</span></div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;<span class="preprocessor"># define gSPTextureL(pkt, s, t, level, xparam, tile, on)        \</span></div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TEXTURE,24,8) |           \</span></div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;<span class="preprocessor">            _SHIFTL((xparam),16,8) |            \</span></div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;<span class="preprocessor">            _SHIFTL((level),11,3) | _SHIFTL((tile),8,3) |   \</span></div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;<span class="preprocessor">            _SHIFTL((on),1,7));             \</span></div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL((s),16,16) | _SHIFTL((t),0,16));    \</span></div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;<span class="preprocessor"># define gsSPTextureL(s, t, level, xparam, tile, on)            \</span></div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;<span class="preprocessor">    (_SHIFTL(G_TEXTURE,24,8) | _SHIFTL((xparam),16,8) |     \</span></div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;<span class="preprocessor">     _SHIFTL((level),11,3) | _SHIFTL((tile),8,3) | _SHIFTL((on),1,7)),\</span></div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;<span class="preprocessor">        (_SHIFTL((s),16,16) | _SHIFTL((t),0,16))            \</span></div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="comment"> * Macros to turn texture on/off</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;<span class="preprocessor"># define gSPTexture(pkt, s, t, level, tile, on)             \</span></div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TEXTURE,24,8)|_SHIFTL(BOWTIE_VAL,16,8)|\</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="preprocessor">            _SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|  \</span></div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="preprocessor">            _SHIFTL((on),0,8));             \</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL((s),16,16)|_SHIFTL((t),0,16));      \</span></div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="preprocessor"># define gsSPTexture(s, t, level, tile, on)             \</span></div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;<span class="preprocessor">    (_SHIFTL(G_TEXTURE,24,8)|_SHIFTL(BOWTIE_VAL,16,8)|      \</span></div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;<span class="preprocessor">     _SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|_SHIFTL((on),0,8)),  \</span></div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;<span class="preprocessor">        (_SHIFTL((s),16,16)|_SHIFTL((t),0,16))              \</span></div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;<span class="comment">/* </span></div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;<span class="comment"> * Different version of SPTexture macro, has an additional parameter</span></div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;<span class="comment"> * which is currently reserved in the microcode.</span></div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;<span class="preprocessor"># define gSPTextureL(pkt, s, t, level, xparam, tile, on)        \</span></div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TEXTURE,24,8)|_SHIFTL((xparam),16,8)| \</span></div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;<span class="preprocessor">            _SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|  \</span></div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="preprocessor">            _SHIFTL((on),0,8));             \</span></div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL((s),16,16)|_SHIFTL((t),0,16));      \</span></div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;<span class="preprocessor"># define gsSPTextureL(s, t, level, xparam, tile, on)            \</span></div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;<span class="preprocessor">    (_SHIFTL(G_TEXTURE,24,8)|_SHIFTL((xparam),16,8)|        \</span></div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;<span class="preprocessor">     _SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|_SHIFTL((on),0,8)),  \</span></div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="preprocessor">        (_SHIFTL((s),16,16)|_SHIFTL((t),0,16))              \</span></div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="preprocessor">#define gSPPerspNormalize(pkt, s)   gMoveWd(pkt, G_MW_PERSPNORM, 0, (s))</span></div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="preprocessor">#define gsSPPerspNormalize(s)       gsMoveWd(    G_MW_PERSPNORM, 0, (s))</span></div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="preprocessor"># define gSPPopMatrixN(pkt, n, num) gDma2p((pkt),G_POPMTX,(num)*64,64,2,0)</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="preprocessor"># define gsSPPopMatrixN(n, num)     gsDma2p(     G_POPMTX,(num)*64,64,2,0)</span></div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;<span class="preprocessor"># define gSPPopMatrix(pkt, n)       gSPPopMatrixN((pkt), (n), 1)</span></div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;<span class="preprocessor"># define gsSPPopMatrix(n)       gsSPPopMatrixN(      (n), 1)</span></div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;<span class="preprocessor"># define gSPPopMatrix(pkt, n)       gImmp1(pkt, G_POPMTX, n)</span></div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;<span class="preprocessor"># define gsSPPopMatrix(n)       gsImmp1(    G_POPMTX, n)</span></div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="preprocessor">#define gSPEndDisplayList(pkt)                      \</span></div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_ENDDL, 24, 8);             \</span></div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = 0;                       \</span></div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;<span class="preprocessor">#define gsSPEndDisplayList()                        \</span></div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;<span class="preprocessor">    _SHIFTL(G_ENDDL, 24, 8), 0                  \</span></div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;<span class="comment"> *  One gSPGeometryMode(pkt,c,s) GBI is equal to these two GBIs.</span></div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;<span class="comment"> *      gSPClearGeometryMode(pkt,c)</span></div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;<span class="comment"> *      gSPSetGeometryMode(pkt,s)</span></div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;<span class="comment"> *  gSPLoadGeometryMode(pkt, word) sets GeometryMode directly.</span></div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;<span class="preprocessor">#define gSPGeometryMode(pkt, c, s)                  \</span></div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_GEOMETRYMODE,24,8)|_SHIFTL(~(u32)(c),0,24);\</span></div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (u32)(s);                    \</span></div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;<span class="preprocessor">#define gsSPGeometryMode(c, s)                      \</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;<span class="preprocessor">    (_SHIFTL(G_GEOMETRYMODE,24,8)|_SHIFTL(~(u32)(c),0,24)),(u32)(s) \</span></div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;<span class="preprocessor">#define gSPSetGeometryMode(pkt, word)   gSPGeometryMode((pkt),0,(word))</span></div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;<span class="preprocessor">#define gsSPSetGeometryMode(word)   gsSPGeometryMode(0,(word))</span></div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;<span class="preprocessor">#define gSPClearGeometryMode(pkt, word) gSPGeometryMode((pkt),(word),0)</span></div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;<span class="preprocessor">#define gsSPClearGeometryMode(word) gsSPGeometryMode((word),0)</span></div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;<span class="preprocessor">#define gSPLoadGeometryMode(pkt, word)  gSPGeometryMode((pkt),-1,(word))</span></div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;<span class="preprocessor">#define gsSPLoadGeometryMode(word)  gsSPGeometryMode(-1,(word))</span></div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;<span class="preprocessor">#else   </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;<span class="preprocessor">#define gSPSetGeometryMode(pkt, word)                   \</span></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_SETGEOMETRYMODE, 24, 8);       \</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(word);                \</span></div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;<span class="preprocessor">#define gsSPSetGeometryMode(word)                   \</span></div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="preprocessor">    _SHIFTL(G_SETGEOMETRYMODE, 24, 8), (unsigned int)(word)     \</span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;<span class="preprocessor">#define gSPClearGeometryMode(pkt, word)                 \</span></div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_CLEARGEOMETRYMODE, 24, 8);     \</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(word);                \</span></div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="preprocessor">#define gsSPClearGeometryMode(word)                 \</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;<span class="preprocessor">    _SHIFTL(G_CLEARGEOMETRYMODE, 24, 8), (unsigned int)(word)   \</span></div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* F3DEX_GBI_2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;<span class="preprocessor">#ifdef  F3DEX_GBI_2</span></div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;<span class="preprocessor">#define gSPSetOtherMode(pkt, cmd, sft, len, data)           \</span></div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(cmd,24,8)|_SHIFTL(32-(sft)-(len),8,8)|  \</span></div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;<span class="preprocessor">            _SHIFTL((len)-1,0,8));              \</span></div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(data);                \</span></div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;<span class="preprocessor">#define gsSPSetOtherMode(cmd, sft, len, data)               \</span></div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;<span class="preprocessor">    _SHIFTL(cmd,24,8)|_SHIFTL(32-(sft)-(len),8,8)|_SHIFTL((len)-1,0,8), \</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;<span class="preprocessor">    (unsigned int)(data)                        \</span></div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="preprocessor">#define gSPSetOtherMode(pkt, cmd, sft, len, data)           \</span></div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(cmd, 24, 8) | _SHIFTL(sft, 8, 8) |  \</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="preprocessor">            _SHIFTL(len, 0, 8));                \</span></div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(data);                \</span></div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;<span class="preprocessor">#define gsSPSetOtherMode(cmd, sft, len, data)               \</span></div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="preprocessor">    _SHIFTL(cmd, 24, 8) | _SHIFTL(sft, 8, 8) | _SHIFTL(len, 0, 8),  \</span></div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;<span class="preprocessor">    (unsigned int)(data)                        \</span></div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;<span class="comment"> * RDP setothermode register commands - register shadowed in RSP</span></div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;<span class="preprocessor">#define gDPPipelineMode(pkt, mode)  \</span></div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_PIPELINE, 1, mode)</span></div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;<span class="preprocessor">#define gsDPPipelineMode(mode)      \</span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_PIPELINE, 1, mode)</span></div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="preprocessor">#define gDPSetCycleType(pkt, type)  \</span></div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_CYCLETYPE, 2, type)</span></div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="preprocessor">#define gsDPSetCycleType(type)      \</span></div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_CYCLETYPE, 2, type)</span></div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;<span class="preprocessor">#define gDPSetTexturePersp(pkt, type)   \</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTPERSP, 1, type)</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;<span class="preprocessor">#define gsDPSetTexturePersp(type)       \</span></div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTPERSP, 1, type)</span></div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;<span class="preprocessor">#define gDPSetTextureDetail(pkt, type)  \</span></div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTDETAIL, 2, type)</span></div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;<span class="preprocessor">#define gsDPSetTextureDetail(type)      \</span></div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTDETAIL, 2, type)</span></div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;<span class="preprocessor">#define gDPSetTextureLOD(pkt, type) \</span></div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTLOD, 1, type)</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;<span class="preprocessor">#define gsDPSetTextureLOD(type)     \</span></div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTLOD, 1, type)</span></div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;<span class="preprocessor">#define gDPSetTextureLUT(pkt, type) \</span></div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTLUT, 2, type)</span></div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;<span class="preprocessor">#define gsDPSetTextureLUT(type)     \</span></div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTLUT, 2, type)</span></div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;<span class="preprocessor">#define gDPSetTextureFilter(pkt, type)  \</span></div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTFILT, 2, type)</span></div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;<span class="preprocessor">#define gsDPSetTextureFilter(type)      \</span></div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTFILT, 2, type)</span></div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;<span class="preprocessor">#define gDPSetTextureConvert(pkt, type) \</span></div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTCONV, 3, type)</span></div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;<span class="preprocessor">#define gsDPSetTextureConvert(type)     \</span></div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTCONV, 3, type)</span></div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;<span class="preprocessor">#define gDPSetCombineKey(pkt, type) \</span></div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_COMBKEY, 1, type)</span></div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;<span class="preprocessor">#define gsDPSetCombineKey(type)     \</span></div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_COMBKEY, 1, type)</span></div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="preprocessor">#define gDPSetColorDither(pkt, mode)    \</span></div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_RGBDITHER, 2, mode)</span></div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="preprocessor">#define gsDPSetColorDither(mode)        \</span></div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_RGBDITHER, 2, mode)</span></div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;<span class="preprocessor">#define gDPSetColorDither(pkt, mode)    \</span></div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_COLORDITHER, 1, mode)</span></div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;<span class="preprocessor">#define gsDPSetColorDither(mode)                \</span></div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_COLORDITHER, 1, mode)</span></div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="preprocessor">#define gDPSetAlphaDither(pkt, mode)    \</span></div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_ALPHADITHER, 2, mode)</span></div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;<span class="preprocessor">#define gsDPSetAlphaDither(mode)        \</span></div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_ALPHADITHER, 2, mode)</span></div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;<span class="comment">/* &#39;blendmask&#39; is not supported anymore. </span></div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;<span class="comment"> * The bits are reserved for future use.</span></div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;<span class="comment"> * Fri May 26 13:45:55 PDT 1995</span></div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;<span class="preprocessor">#define gDPSetBlendMask(pkt, mask)      gDPNoOp(pkt)</span></div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;<span class="preprocessor">#define gsDPSetBlendMask(mask)      gsDPNoOp()</span></div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;<span class="preprocessor">#define gDPSetAlphaCompare(pkt, type)   \</span></div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_L, G_MDSFT_ALPHACOMPARE, 2, type)</span></div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;<span class="preprocessor">#define gsDPSetAlphaCompare(type)       \</span></div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_L, G_MDSFT_ALPHACOMPARE, 2, type)</span></div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;<span class="preprocessor">#define gDPSetDepthSource(pkt, src) \</span></div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_L, G_MDSFT_ZSRCSEL, 1, src)</span></div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;<span class="preprocessor">#define gsDPSetDepthSource(src) \</span></div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_L, G_MDSFT_ZSRCSEL, 1, src)</span></div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;<span class="preprocessor">#define gDPSetRenderMode(pkt, c0, c1)   \</span></div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="preprocessor">    gSPSetOtherMode(pkt, G_SETOTHERMODE_L, G_MDSFT_RENDERMODE, 29,  \</span></div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;<span class="preprocessor">            (c0) | (c1))</span></div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="preprocessor">#define gsDPSetRenderMode(c0, c1)   \</span></div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;<span class="preprocessor">    gsSPSetOtherMode(G_SETOTHERMODE_L, G_MDSFT_RENDERMODE, 29,  \</span></div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;<span class="preprocessor">             (c0) | (c1))</span></div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;<span class="preprocessor">#define gSetImage(pkt, cmd, fmt, siz, width, i)             \</span></div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(cmd, 24, 8) | _SHIFTL(fmt, 21, 3) |  \</span></div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;<span class="preprocessor">               _SHIFTL(siz, 19, 2) | _SHIFTL((width)-1, 0, 12); \</span></div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(i);               \</span></div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;<span class="preprocessor">#define gsSetImage(cmd, fmt, siz, width, i)             \</span></div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;<span class="preprocessor">    _SHIFTL(cmd, 24, 8) | _SHIFTL(fmt, 21, 3) |         \</span></div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;<span class="preprocessor">    _SHIFTL(siz, 19, 2) | _SHIFTL((width)-1, 0, 12),        \</span></div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;<span class="preprocessor">    (unsigned int)(i)                       \</span></div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;<span class="preprocessor">#define gDPSetColorImage(pkt, f, s, w, i)   gSetImage(pkt, G_SETCIMG, f, s, w, i)</span></div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;<span class="preprocessor">#define gsDPSetColorImage(f, s, w, i)       gsSetImage(G_SETCIMG, f, s, w, i)</span></div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;<span class="comment">/* use these for new code */</span></div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;<span class="preprocessor">#define gDPSetDepthImage(pkt, i)    gSetImage(pkt, G_SETZIMG, 0, 0, 1, i)</span></div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;<span class="preprocessor">#define gsDPSetDepthImage(i)        gsSetImage(G_SETZIMG, 0, 0, 1, i)</span></div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;<span class="comment">/* kept for compatibility */</span></div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;<span class="preprocessor">#define gDPSetMaskImage(pkt, i)     gDPSetDepthImage(pkt, i)</span></div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;<span class="preprocessor">#define gsDPSetMaskImage(i)         gsDPSetDepthImage(i)</span></div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;<span class="preprocessor">#define gDPSetTextureImage(pkt, f, s, w, i) gSetImage(pkt, G_SETTIMG, f, s, w, i)</span></div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;<span class="preprocessor">#define gsDPSetTextureImage(f, s, w, i) gsSetImage(G_SETTIMG, f, s, w, i)</span></div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;<span class="comment"> * RDP macros</span></div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;<span class="preprocessor">#define gDPSetCombine(pkt, muxs0, muxs1)                \</span></div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_SETCOMBINE, 24, 8) | _SHIFTL(muxs0, 0, 24);\</span></div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(muxs1);               \</span></div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;<span class="preprocessor">#define gsDPSetCombine(muxs0, muxs1)                    \</span></div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;<span class="preprocessor">    _SHIFTL(G_SETCOMBINE, 24, 8) | _SHIFTL(muxs0, 0, 24),       \</span></div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;<span class="preprocessor">    (unsigned int)(muxs1)                       \</span></div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;<span class="preprocessor">#define GCCc0w0(saRGB0, mRGB0, saA0, mA0)               \</span></div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="preprocessor">        (_SHIFTL((saRGB0), 20, 4) | _SHIFTL((mRGB0), 15, 5) |   \</span></div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;<span class="preprocessor">         _SHIFTL((saA0), 12, 3) | _SHIFTL((mA0), 9, 3))</span></div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;<span class="preprocessor">#define GCCc1w0(saRGB1, mRGB1)                      \</span></div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;<span class="preprocessor">        (_SHIFTL((saRGB1), 5, 4) | _SHIFTL((mRGB1), 0, 5))</span></div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;<span class="preprocessor">#define GCCc0w1(sbRGB0, aRGB0, sbA0, aA0)               \</span></div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="preprocessor">                (_SHIFTL((sbRGB0), 28, 4) | _SHIFTL((aRGB0), 15, 3) |   \</span></div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;<span class="preprocessor">         _SHIFTL((sbA0), 12, 3) | _SHIFTL((aA0), 9, 3))</span></div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;<span class="preprocessor">#define GCCc1w1(sbRGB1, saA1, mA1, aRGB1, sbA1, aA1)            \</span></div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;<span class="preprocessor">        (_SHIFTL((sbRGB1), 24, 4) | _SHIFTL((saA1), 21, 3) |    \</span></div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;<span class="preprocessor">         _SHIFTL((mA1), 18, 3) | _SHIFTL((aRGB1), 6, 3) |   \</span></div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="preprocessor">         _SHIFTL((sbA1), 3, 3) | _SHIFTL((aA1), 0, 3))</span></div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="preprocessor">#define gDPSetCombineLERP(pkt, a0, b0, c0, d0, Aa0, Ab0, Ac0, Ad0,  \</span></div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;<span class="preprocessor">        a1, b1, c1, d1, Aa1, Ab1, Ac1, Ad1)         \</span></div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 =  _SHIFTL(G_SETCOMBINE, 24, 8) |          \</span></div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;<span class="preprocessor">            _SHIFTL(GCCc0w0(G_CCMUX_##a0, G_CCMUX_##c0, \</span></div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;<span class="preprocessor">                       G_ACMUX_##Aa0, G_ACMUX_##Ac0) |  \</span></div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;<span class="preprocessor">                   GCCc1w0(G_CCMUX_##a1, G_CCMUX_##c1),     \</span></div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;<span class="preprocessor">                   0, 24);                  \</span></div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 =  (unsigned int)(GCCc0w1(G_CCMUX_##b0,        \</span></div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;<span class="preprocessor">                           G_CCMUX_##d0,        \</span></div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;<span class="preprocessor">                           G_ACMUX_##Ab0,       \</span></div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;<span class="preprocessor">                           G_ACMUX_##Ad0) |     \</span></div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;<span class="preprocessor">                       GCCc1w1(G_CCMUX_##b1,        \</span></div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;<span class="preprocessor">                           G_ACMUX_##Aa1,       \</span></div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;<span class="preprocessor">                           G_ACMUX_##Ac1,       \</span></div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;<span class="preprocessor">                           G_CCMUX_##d1,        \</span></div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;<span class="preprocessor">                           G_ACMUX_##Ab1,       \</span></div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;<span class="preprocessor">                           G_ACMUX_##Ad1));     \</span></div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;<span class="preprocessor">#define gsDPSetCombineLERP(a0, b0, c0, d0, Aa0, Ab0, Ac0, Ad0,      \</span></div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;<span class="preprocessor">        a1, b1, c1, d1, Aa1, Ab1, Ac1, Ad1)         \</span></div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;<span class="preprocessor">    _SHIFTL(G_SETCOMBINE, 24, 8) |                  \</span></div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;<span class="preprocessor">    _SHIFTL(GCCc0w0(G_CCMUX_##a0, G_CCMUX_##c0,         \</span></div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;<span class="preprocessor">               G_ACMUX_##Aa0, G_ACMUX_##Ac0) |          \</span></div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;<span class="preprocessor">           GCCc1w0(G_CCMUX_##a1, G_CCMUX_##c1), 0, 24),     \</span></div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;<span class="preprocessor">    (unsigned int)(GCCc0w1(G_CCMUX_##b0, G_CCMUX_##d0,      \</span></div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;<span class="preprocessor">                   G_ACMUX_##Ab0, G_ACMUX_##Ad0) |      \</span></div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;<span class="preprocessor">               GCCc1w1(G_CCMUX_##b1, G_ACMUX_##Aa1,     \</span></div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;<span class="preprocessor">                   G_ACMUX_##Ac1, G_CCMUX_##d1,     \</span></div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;<span class="preprocessor">                   G_ACMUX_##Ab1, G_ACMUX_##Ad1))       \</span></div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="comment"> * SetCombineMode macros are NOT redunant. It allow the C preprocessor</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;<span class="comment"> * to substitute single parameter which includes commas in the token and</span></div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;<span class="comment"> * rescan for higher parameter count macro substitution.</span></div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;<span class="comment"> * eg.  gsDPSetCombineMode(G_CC_MODULATE, G_CC_MODULATE) turns into</span></div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;<span class="comment"> *  gsDPSetCombineLERP(TEXEL0, 0, SHADE, 0, TEXEL0, 0, SHADE, 0,</span></div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;<span class="comment"> *      TEXEL0, 0, SHADE, 0, TEXEL0, 0, SHADE, 0)</span></div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;<span class="preprocessor">#define gDPSetCombineMode(pkt, a, b)    gDPSetCombineLERP(pkt, a, b)</span></div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="preprocessor">#define gsDPSetCombineMode(a, b)    gsDPSetCombineLERP(a, b)</span></div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;<span class="preprocessor">#define gDPSetColor(pkt, c, d)                      \</span></div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(c, 24, 8);               \</span></div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(d);               \</span></div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;<span class="preprocessor">#define gsDPSetColor(c, d)                      \</span></div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;<span class="preprocessor">    _SHIFTL(c, 24, 8), (unsigned int)(d)                \</span></div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;<span class="preprocessor">#define DPRGBColor(pkt, cmd, r, g, b, a)                \</span></div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;<span class="preprocessor">            gDPSetColor(pkt, cmd,                   \</span></div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;<span class="preprocessor">            (_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) |    \</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="preprocessor">             _SHIFTL(b, 8, 8) | _SHIFTL(a, 0, 8)))</span></div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;<span class="preprocessor">#define sDPRGBColor(cmd, r, g, b, a)                    \</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;<span class="preprocessor">        gsDPSetColor(cmd,                       \</span></div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="preprocessor">             (_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) |   \</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;<span class="preprocessor">              _SHIFTL(b, 8, 8) | _SHIFTL(a, 0, 8)))</span></div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;<span class="preprocessor">#define gDPSetEnvColor(pkt, r, g, b, a)                 \</span></div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;<span class="preprocessor">            DPRGBColor(pkt, G_SETENVCOLOR, r,g,b,a)</span></div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;<span class="preprocessor">#define gsDPSetEnvColor(r, g, b, a)                 \</span></div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;<span class="preprocessor">            sDPRGBColor(G_SETENVCOLOR, r,g,b,a)</span></div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;<span class="preprocessor">#define gDPSetBlendColor(pkt, r, g, b, a)               \</span></div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;<span class="preprocessor">            DPRGBColor(pkt, G_SETBLENDCOLOR, r,g,b,a)</span></div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;<span class="preprocessor">#define gsDPSetBlendColor(r, g, b, a)                   \</span></div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;<span class="preprocessor">            sDPRGBColor(G_SETBLENDCOLOR, r,g,b,a)</span></div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;<span class="preprocessor">#define gDPSetFogColor(pkt, r, g, b, a)                 \</span></div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;<span class="preprocessor">            DPRGBColor(pkt, G_SETFOGCOLOR, r,g,b,a)</span></div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;<span class="preprocessor">#define gsDPSetFogColor(r, g, b, a)                 \</span></div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;<span class="preprocessor">            sDPRGBColor(G_SETFOGCOLOR, r,g,b,a)</span></div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;<span class="preprocessor">#define gDPSetFillColor(pkt, d)                     \</span></div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;<span class="preprocessor">            gDPSetColor(pkt, G_SETFILLCOLOR, (d))</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<span class="preprocessor">#define gsDPSetFillColor(d)                     \</span></div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;<span class="preprocessor">            gsDPSetColor(G_SETFILLCOLOR, (d))</span></div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;<span class="preprocessor">#define gDPSetPrimDepth(pkt, z, dz)                 \</span></div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;<span class="preprocessor">        gDPSetColor(pkt, G_SETPRIMDEPTH,            \</span></div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;<span class="preprocessor">                _SHIFTL(z, 16, 16) | _SHIFTL(dz, 0, 16))</span></div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;<span class="preprocessor">#define gsDPSetPrimDepth(z, dz)                     \</span></div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;<span class="preprocessor">        gsDPSetColor(G_SETPRIMDEPTH, _SHIFTL(z, 16, 16) |   \</span></div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;<span class="preprocessor">                 _SHIFTL(dz, 0, 16))</span></div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;<span class="preprocessor">#define gDPSetPrimColor(pkt, m, l, r, g, b, a)              \</span></div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 =  (_SHIFTL(G_SETPRIMCOLOR, 24, 8) |       \</span></div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;<span class="preprocessor">             _SHIFTL(m, 8, 8) | _SHIFTL(l, 0, 8));      \</span></div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 =  (_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) |    \</span></div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;<span class="preprocessor">             _SHIFTL(b, 8, 8) | _SHIFTL(a, 0, 8));      \</span></div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;<span class="preprocessor">#define gsDPSetPrimColor(m, l, r, g, b, a)              \</span></div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;<span class="preprocessor">    (_SHIFTL(G_SETPRIMCOLOR, 24, 8) | _SHIFTL(m, 8, 8) |        \</span></div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;<span class="preprocessor">     _SHIFTL(l, 0, 8)),                     \</span></div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;<span class="preprocessor">    (_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) | _SHIFTL(b, 8, 8) | \</span></div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;<span class="preprocessor">     _SHIFTL(a, 0, 8))                      \</span></div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;<span class="comment"> * gDPSetOtherMode (This is for expert user.)</span></div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;<span class="comment"> * This command makes all othermode parameters set.</span></div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;<span class="comment"> * Do not use this command in the same DL with another g*SPSetOtherMode DLs.</span></div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;<span class="comment"> * [Usage]</span></div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;<span class="comment"> *  gDPSetOtherMode(pkt, modeA, modeB)</span></div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;<span class="comment"> *      &#39;modeA&#39; is described all parameters of GroupA GBI command.</span></div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;<span class="comment"> *      &#39;modeB&#39; is also described all parameters of GroupB GBI command.</span></div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment"> *  GroupA:</span></div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;<span class="comment"> *    gDPPipelineMode, gDPSetCycleType, gSPSetTexturePersp,</span></div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;<span class="comment"> *    gDPSetTextureDetail, gDPSetTextureLOD, gDPSetTextureLUT,</span></div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;<span class="comment"> *    gDPSetTextureFilter, gDPSetTextureConvert, gDPSetCombineKey,</span></div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;<span class="comment"> *    gDPSetColorDither, gDPSetAlphaDither</span></div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;<span class="comment"> *  GroupB:</span></div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;<span class="comment"> *    gDPSetAlphaCompare, gDPSetDepthSource, gDPSetRenderMode</span></div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;<span class="comment"> *  Use &#39;OR&#39; operation to get modeA and modeB.</span></div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;<span class="comment"> *  modeA = G_PM_* | G_CYC_* | G_TP_* | G_TD_* | G_TL_* | G_TT_* | G_TF_*</span></div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;<span class="comment"> *      G_TC_* | G_CK_*  | G_CD_* | G_AD_*;</span></div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;<span class="comment"> *  modeB = G_AC_* | G_ZS_*  | G_RM_* | G_RM_*2;</span></div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;<span class="preprocessor">#define gDPSetOtherMode(pkt, mode0, mode1)              \</span></div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_RDPSETOTHERMODE,24,8)|_SHIFTL(mode0,0,24);\</span></div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (unsigned int)(mode1);               \</span></div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;<span class="preprocessor">#define gsDPSetOtherMode(mode0, mode1)                  \</span></div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;<span class="preprocessor">    _SHIFTL(G_RDPSETOTHERMODE,24,8)|_SHIFTL(mode0,0,24),        \</span></div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;<span class="preprocessor">    (unsigned int)(mode1)                       \</span></div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;<span class="comment"> * Texturing macros</span></div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;<span class="comment">/* These are also defined defined above for Sprite Microcode */</span></div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;<span class="preprocessor">#define G_TX_LOADTILE   7</span></div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;<span class="preprocessor">#define G_TX_RENDERTILE 0</span></div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;<span class="preprocessor">#define G_TX_NOMIRROR   0</span></div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;<span class="preprocessor">#define G_TX_WRAP   0</span></div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;<span class="preprocessor">#define G_TX_MIRROR 0x1</span></div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;<span class="preprocessor">#define G_TX_CLAMP  0x2</span></div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;<span class="preprocessor">#define G_TX_NOMASK 0</span></div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;<span class="preprocessor">#define G_TX_NOLOD  0</span></div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;<span class="preprocessor">#ifndef MAX</span></div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;<span class="preprocessor">#define MAX(a, b)               ((a) &gt; (b) ? (a) : (b))</span></div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;<span class="preprocessor">#ifndef MIN</span></div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;<span class="preprocessor">#define MIN(a, b)               ((a) &lt; (b) ? (a) : (b))</span></div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;<span class="comment"> *  Dxt is the inverse of the number of 64-bit words in a line of</span></div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;<span class="comment"> *  the texture being loaded using the load_block command.  If</span></div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;<span class="comment"> *  there are any 1&#39;s to the right of the 11th fractional bit,</span></div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;<span class="comment"> *  dxt should be rounded up.  The following macros accomplish</span></div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;<span class="comment"> *  this.  The 4b macros are a special case since 4-bit textures</span></div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;<span class="comment"> *  are loaded as 8-bit textures.  Dxt is fixed point 1.11. RJM</span></div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;<span class="preprocessor">#define G_TX_DXT_FRAC   11</span></div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;<span class="comment"> *  For RCP 2.0, the maximum number of texels that can be loaded</span></div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;<span class="comment"> *  using a load_block command is 2048.  In order to load the total</span></div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;<span class="comment"> *  4kB of Tmem, change the texel size when loading to be G_IM_SIZ_16b,</span></div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;<span class="comment"> *  then change the tile to the proper texel size after the load.</span></div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;<span class="comment"> *  The g*DPLoadTextureBlock macros already do this, so this change</span></div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;<span class="comment"> *  will be transparent if you use these macros.  If you use</span></div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;<span class="comment"> *  the g*DPLoadBlock macros directly, you will need to handle this</span></div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;<span class="comment"> *  tile manipulation yourself.  RJM.</span></div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;<span class="preprocessor">#ifdef _HW_VERSION_1</span></div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;<span class="preprocessor">#define G_TX_LDBLK_MAX_TXL  4095</span></div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;<span class="preprocessor">#define G_TX_LDBLK_MAX_TXL  2047</span></div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _HW_VERSION_1 */</span><span class="preprocessor"></span></div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;<span class="preprocessor">#define TXL2WORDS(txls, b_txl)  MAX(1, ((txls)*(b_txl)/8))</span></div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;<span class="preprocessor">#define CALC_DXT(width, b_txl)  \</span></div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;<span class="preprocessor">        (((1 &lt;&lt; G_TX_DXT_FRAC) + TXL2WORDS(width, b_txl) - 1) / \</span></div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;<span class="preprocessor">                    TXL2WORDS(width, b_txl))</span></div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;<span class="preprocessor">#define TXL2WORDS_4b(txls)  MAX(1, ((txls)/16))</span></div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;<span class="preprocessor">#define CALC_DXT_4b(width)  \</span></div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<span class="preprocessor">        (((1 &lt;&lt; G_TX_DXT_FRAC) + TXL2WORDS_4b(width) - 1) / \</span></div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;<span class="preprocessor">                    TXL2WORDS_4b(width))</span></div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;<span class="preprocessor">#define gDPLoadTileGeneric(pkt, c, tile, uls, ult, lrs, lrt)        \</span></div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(c, 24, 8) | _SHIFTL(uls, 12, 12) |   \</span></div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;<span class="preprocessor">              _SHIFTL(ult, 0, 12);              \</span></div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = _SHIFTL(tile, 24, 3) | _SHIFTL(lrs, 12, 12) |    \</span></div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;<span class="preprocessor">              _SHIFTL(lrt, 0, 12);              \</span></div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;<span class="preprocessor">#define gsDPLoadTileGeneric(c, tile, uls, ult, lrs, lrt)        \</span></div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;<span class="preprocessor">    _SHIFTL(c, 24, 8) | _SHIFTL(uls, 12, 12) | _SHIFTL(ult, 0, 12), \</span></div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;<span class="preprocessor">    _SHIFTL(tile, 24, 3) | _SHIFTL(lrs, 12, 12) | _SHIFTL(lrt, 0, 12)\</span></div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;<span class="preprocessor">#define gDPSetTileSize(pkt, t, uls, ult, lrs, lrt)          \</span></div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;<span class="preprocessor">        gDPLoadTileGeneric(pkt, G_SETTILESIZE, t, uls, ult, lrs, lrt)</span></div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;<span class="preprocessor">#define gsDPSetTileSize(t, uls, ult, lrs, lrt)              \</span></div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;<span class="preprocessor">        gsDPLoadTileGeneric(G_SETTILESIZE, t, uls, ult, lrs, lrt)</span></div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;<span class="preprocessor">#define gDPLoadTile(pkt, t, uls, ult, lrs, lrt)             \</span></div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;<span class="preprocessor">        gDPLoadTileGeneric(pkt, G_LOADTILE, t, uls, ult, lrs, lrt)</span></div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;<span class="preprocessor">#define gsDPLoadTile(t, uls, ult, lrs, lrt)             \</span></div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;<span class="preprocessor">        gsDPLoadTileGeneric(G_LOADTILE, t, uls, ult, lrs, lrt)</span></div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;<span class="preprocessor">#define gDPSetTile(pkt, fmt, siz, line, tmem, tile, palette, cmt,   \</span></div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts)          \</span></div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_SETTILE, 24, 8) | _SHIFTL(fmt, 21, 3) |\</span></div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;<span class="preprocessor">               _SHIFTL(siz, 19, 2) | _SHIFTL(line, 9, 9) |  \</span></div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;<span class="preprocessor">               _SHIFTL(tmem, 0, 9);             \</span></div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = _SHIFTL(tile, 24, 3) | _SHIFTL(palette, 20, 4) | \</span></div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;<span class="preprocessor">               _SHIFTL(cmt, 18, 2) | _SHIFTL(maskt, 14, 4) |    \</span></div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;<span class="preprocessor">               _SHIFTL(shiftt, 10, 4) |_SHIFTL(cms, 8, 2) | \</span></div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;<span class="preprocessor">               _SHIFTL(masks, 4, 4) | _SHIFTL(shifts, 0, 4);    \</span></div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;<span class="preprocessor">#define gsDPSetTile(fmt, siz, line, tmem, tile, palette, cmt,       \</span></div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts)          \</span></div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;<span class="preprocessor">    (_SHIFTL(G_SETTILE, 24, 8) | _SHIFTL(fmt, 21, 3) |      \</span></div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;<span class="preprocessor">     _SHIFTL(siz, 19, 2) | _SHIFTL(line, 9, 9) | _SHIFTL(tmem, 0, 9)),\</span></div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;<span class="preprocessor">        (_SHIFTL(tile, 24, 3) | _SHIFTL(palette, 20, 4) |       \</span></div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;<span class="preprocessor">     _SHIFTL(cmt, 18, 2) | _SHIFTL(maskt, 14, 4) |          \</span></div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;<span class="preprocessor">     _SHIFTL(shiftt, 10, 4) | _SHIFTL(cms, 8, 2) |          \</span></div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;<span class="preprocessor">     _SHIFTL(masks, 4, 4) | _SHIFTL(shifts, 0, 4))          \</span></div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;<span class="comment"> *  For RCP 2.0, the maximum number of texels that can be loaded</span></div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;<span class="comment"> *  using a load_block command is 2048.  In order to load the total</span></div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;<span class="comment"> *  4kB of Tmem, change the texel size when loading to be G_IM_SIZ_16b,</span></div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;<span class="comment"> *  then change the tile to the proper texel size after the load.</span></div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;<span class="comment"> *  The g*DPLoadTextureBlock macros already do this, so this change</span></div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;<span class="comment"> *  will be transparent if you use these macros.  If you use</span></div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;<span class="comment"> *  the g*DPLoadBlock macros directly, you will need to handle this</span></div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;<span class="comment"> *  tile manipulation yourself.  RJM.</span></div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;<span class="preprocessor">#define gDPLoadBlock(pkt, tile, uls, ult, lrs, dxt)         \</span></div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_LOADBLOCK, 24, 8) |           \</span></div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;<span class="preprocessor">            _SHIFTL(uls, 12, 12) | _SHIFTL(ult, 0, 12));    \</span></div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(tile, 24, 3) |              \</span></div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;<span class="preprocessor">            _SHIFTL((MIN(lrs,G_TX_LDBLK_MAX_TXL)), 12, 12) |\</span></div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;<span class="preprocessor">            _SHIFTL(dxt, 0, 12));               \</span></div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;<span class="preprocessor">#define gsDPLoadBlock(tile, uls, ult, lrs, dxt)             \</span></div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;<span class="preprocessor">    (_SHIFTL(G_LOADBLOCK, 24, 8) | _SHIFTL(uls, 12, 12) |       \</span></div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;<span class="preprocessor">     _SHIFTL(ult, 0, 12)),                      \</span></div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;<span class="preprocessor">    (_SHIFTL(tile, 24, 3) |                     \</span></div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;<span class="preprocessor">     _SHIFTL((MIN(lrs,G_TX_LDBLK_MAX_TXL)), 12, 12) |       \</span></div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;<span class="preprocessor">     _SHIFTL(dxt, 0, 12))                       \</span></div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;<span class="preprocessor">#define gDPLoadTLUTCmd(pkt, tile, count)                \</span></div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)pkt;                       \</span></div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_LOADTLUT, 24, 8);          \</span></div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = _SHIFTL((tile), 24, 3) | _SHIFTL((count), 14, 10);\</span></div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;<span class="preprocessor">#define gsDPLoadTLUTCmd(tile, count)                    \</span></div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;<span class="preprocessor">    _SHIFTL(G_LOADTLUT, 24, 8),                 \</span></div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;<span class="preprocessor">    _SHIFTL((tile), 24, 3) | _SHIFTL((count), 14, 10)       \</span></div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;<span class="preprocessor">#define gDPLoadTextureBlock(pkt, timg, fmt, siz, width, height,     \</span></div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);    \</span></div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE,     \</span></div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;<span class="preprocessor">        0 , cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT) -1,    \</span></div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;<span class="preprocessor">        CALC_DXT(width, siz##_BYTES));              \</span></div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz,                   \</span></div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;<span class="preprocessor">        (((width) * siz##_LINE_BYTES)+7)&gt;&gt;3, 0,         \</span></div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,          \</span></div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;<span class="preprocessor">#define gDPLoadTextureBlockYuv(pkt, timg, fmt, siz, width, height,  \</span></div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);    \</span></div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE,     \</span></div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;<span class="preprocessor">        0 , cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT) -1,    \</span></div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;<span class="preprocessor">        CALC_DXT(width, siz##_BYTES));              \</span></div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz,                   \</span></div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;<span class="preprocessor">        (((width) * 1)+7)&gt;&gt;3, 0,                \</span></div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,          \</span></div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;<span class="comment">/* Load fix rww 27jun95 */</span></div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="comment">/* The S at the end means odd lines are already word Swapped */</span></div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;<span class="preprocessor">#define gDPLoadTextureBlockS(pkt, timg, fmt, siz, width, height,    \</span></div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);    \</span></div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE,     \</span></div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;<span class="preprocessor">        0 , cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1,0);  \</span></div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz,                   \</span></div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;<span class="preprocessor">        (((width) * siz##_LINE_BYTES)+7)&gt;&gt;3, 0,         \</span></div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,          \</span></div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;<span class="comment">/* </span></div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;<span class="comment"> *  Allow tmem address and render tile to be specified.</span></div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;<span class="comment"> *  The S at the end means odd lines are already word Swapped </span></div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;<span class="preprocessor">#define gDPLoadMultiBlockS(pkt, timg, tmem, rtile, fmt, siz, width,     \</span></div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;<span class="preprocessor">           height, pal, cms, cmt, masks, maskt, shifts, shiftt) \</span></div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);    \</span></div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE,  \</span></div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;<span class="preprocessor">        0 , cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1,0);  \</span></div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz,                   \</span></div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;<span class="preprocessor">        (((width) * siz##_LINE_BYTES)+7)&gt;&gt;3, tmem,      \</span></div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;<span class="preprocessor">        rtile, pal, cmt, maskt, shiftt, cms, masks,     \</span></div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, rtile, 0, 0,                \</span></div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;<span class="preprocessor">#define gDPLoadTextureBlockYuvS(pkt, timg, fmt, siz, width, height, \</span></div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);    \</span></div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE,     \</span></div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;<span class="preprocessor">        0 , cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1,0);  \</span></div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz,                   \</span></div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;<span class="preprocessor">        (((width) * 1)+7)&gt;&gt;3, 0,                \</span></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,          \</span></div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;<span class="comment"> *  allows tmem address to be specified</span></div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;<span class="preprocessor">#define _gDPLoadTextureBlock(pkt, timg, tmem, fmt, siz, width, height,  \</span></div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);    \</span></div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE,  \</span></div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;<span class="preprocessor">        0, cmt, maskt, shiftt, cms, masks, shifts);     \</span></div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1, \</span></div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;<span class="preprocessor">        CALC_DXT(width, siz##_BYTES));              \</span></div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz, (((width) * siz##_LINE_BYTES)+7)&gt;&gt;3,  \</span></div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;<span class="preprocessor">        tmem, G_TX_RENDERTILE, pal, cmt,            \</span></div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts);         \</span></div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,          \</span></div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;<span class="comment"> *  allows tmem address and render tile to be specified</span></div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;<span class="preprocessor">#define _gDPLoadTextureBlockTile(pkt, timg, tmem, rtile, fmt, siz, width,  \</span></div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;<span class="preprocessor">        height, pal, cms, cmt, masks, maskt, shifts, shiftt)    \</span></div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);    \</span></div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 0,\</span></div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;<span class="preprocessor">        cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1, \</span></div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;<span class="preprocessor">        CALC_DXT(width, siz##_BYTES));              \</span></div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz, (((width) * siz##_LINE_BYTES)+7)&gt;&gt;3,  \</span></div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;<span class="preprocessor">        tmem, rtile, pal, cmt,                  \</span></div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts);         \</span></div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, rtile, 0, 0,                \</span></div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;<span class="comment"> *  allows tmem address and render tile to be specified</span></div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;<span class="preprocessor">#define gDPLoadMultiBlock(pkt, timg, tmem, rtile, fmt, siz, width,      \</span></div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;<span class="preprocessor">        height, pal, cms, cmt, masks, maskt, shifts, shiftt)    \</span></div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);    \</span></div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 0,\</span></div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;<span class="preprocessor">        cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1, \</span></div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;<span class="preprocessor">        CALC_DXT(width, siz##_BYTES));              \</span></div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz, (((width) * siz##_LINE_BYTES)+7)&gt;&gt;3,  \</span></div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;<span class="preprocessor">        tmem, rtile, pal, cmt,                  \</span></div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts);         \</span></div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, rtile, 0, 0,                \</span></div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;<span class="preprocessor">#define gsDPLoadTextureBlock(timg, fmt, siz, width, height,     \</span></div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),        \</span></div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, 0,            \</span></div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;<span class="preprocessor">        G_TX_LOADTILE,  0 , cmt, maskt, shiftt, cms,        \</span></div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;<span class="preprocessor">        masks, shifts),                     \</span></div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1, \</span></div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;<span class="preprocessor">        CALC_DXT(width, siz##_BYTES)),              \</span></div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz, ((((width) * siz##_LINE_BYTES)+7)&gt;&gt;3), 0, \</span></div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;<span class="preprocessor">    gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,              \</span></div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;<span class="comment">/* Here is the static form of the pre-swapped texture block loading */</span></div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;<span class="comment">/* See gDPLoadTextureBlockS() for reference.  Basically, just don&#39;t</span></div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;<span class="comment">   calculate DxT, use 0 */</span></div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;<span class="preprocessor">#define gsDPLoadTextureBlockS(timg, fmt, siz, width, height,        \</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),        \</span></div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 0 ,     \</span></div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;<span class="preprocessor">        cmt, maskt,shiftt, cms, masks, shifts),         \</span></div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1, 0 ),\</span></div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz, ((((width) * siz##_LINE_BYTES)+7)&gt;&gt;3), 0, \</span></div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;<span class="preprocessor">    gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,              \</span></div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;<span class="comment"> *  Allow tmem address to be specified</span></div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;<span class="preprocessor">#define _gsDPLoadTextureBlock(timg, tmem, fmt, siz, width, height,  \</span></div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),        \</span></div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE,  \</span></div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;<span class="preprocessor">        0 , cmt, maskt, shiftt, cms, masks, shifts),        \</span></div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1, \</span></div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;<span class="preprocessor">        CALC_DXT(width, siz##_BYTES)),              \</span></div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz,                       \</span></div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;<span class="preprocessor">        ((((width) * siz##_LINE_BYTES)+7)&gt;&gt;3), tmem,        \</span></div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;<span class="preprocessor">    gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,              \</span></div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;<span class="comment"> *  Allow tmem address and render_tile to be specified</span></div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;<span class="preprocessor">#define _gsDPLoadTextureBlockTile(timg, tmem, rtile, fmt, siz, width,   \</span></div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;<span class="preprocessor">        height, pal, cms, cmt, masks, maskt, shifts, shiftt)    \</span></div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),        \</span></div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE,  \</span></div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;<span class="preprocessor">        0 , cmt, maskt, shiftt, cms, masks, shifts),        \</span></div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1, \</span></div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;<span class="preprocessor">        CALC_DXT(width, siz##_BYTES)),              \</span></div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz,                       \</span></div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;<span class="preprocessor">        ((((width) * siz##_LINE_BYTES)+7)&gt;&gt;3), tmem,        \</span></div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;<span class="preprocessor">        rtile, pal, cmt, maskt, shiftt, cms, masks,     \</span></div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;<span class="preprocessor">    gsDPSetTileSize(rtile, 0, 0,                    \</span></div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;<span class="comment"> *  Allow tmem address and render_tile to be specified, useful when loading</span></div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;<span class="comment"> *  mutilple tiles at a time.</span></div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;<span class="preprocessor">#define gsDPLoadMultiBlock(timg, tmem, rtile, fmt, siz, width,      \</span></div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;<span class="preprocessor">        height, pal, cms, cmt, masks, maskt, shifts, shiftt)    \</span></div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),        \</span></div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE,  \</span></div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;<span class="preprocessor">        0 , cmt, maskt, shiftt, cms, masks, shifts),        \</span></div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1, \</span></div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;<span class="preprocessor">        CALC_DXT(width, siz##_BYTES)),              \</span></div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz,                       \</span></div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;<span class="preprocessor">        ((((width) * siz##_LINE_BYTES)+7)&gt;&gt;3), tmem,        \</span></div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;<span class="preprocessor">        rtile, pal, cmt, maskt, shiftt, cms, masks,     \</span></div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;<span class="preprocessor">    gsDPSetTileSize(rtile, 0, 0,                    \</span></div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;<span class="comment">/* </span></div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;<span class="comment"> *  Allows tmem and render tile to be specified.  Useful when loading</span></div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;<span class="comment"> *  several tiles at a time.</span></div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;<span class="comment"> *  Here is the static form of the pre-swapped texture block loading</span></div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;<span class="comment"> *  See gDPLoadTextureBlockS() for reference.  Basically, just don&#39;t</span></div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;<span class="comment"> *  calculate DxT, use 0 </span></div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;<span class="preprocessor">#define gsDPLoadMultiBlockS(timg, tmem, rtile, fmt, siz, width, height, \</span></div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),        \</span></div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 0 ,  \</span></div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;<span class="preprocessor">        cmt, maskt,shiftt, cms, masks, shifts),         \</span></div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;<span class="preprocessor">        (((width)*(height) + siz##_INCR) &gt;&gt; siz##_SHIFT)-1, 0 ),\</span></div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz, ((((width) * siz##_LINE_BYTES)+7)&gt;&gt;3), tmem,\</span></div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;<span class="preprocessor">        rtile, pal, cmt, maskt, shiftt, cms, masks,     \</span></div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;<span class="preprocessor">    gsDPSetTileSize(rtile, 0, 0,                    \</span></div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;<span class="preprocessor">#define gDPLoadTextureBlock_4b(pkt, timg, fmt, width, height,       \</span></div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);        \</span></div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0,  \</span></div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;<span class="preprocessor">        cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;<span class="preprocessor">        (((width)*(height)+3)&gt;&gt;2)-1,                \</span></div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;<span class="preprocessor">        CALC_DXT_4b(width));                    \</span></div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), 0, \</span></div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,          \</span></div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;<span class="comment">/* Load fix rww 27jun95 */</span></div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;<span class="comment">/* The S at the end means odd lines are already word Swapped */</span></div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;<span class="preprocessor">#define gDPLoadTextureBlock_4bS(pkt, timg, fmt, width, height,      \</span></div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);        \</span></div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0,  \</span></div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;<span class="preprocessor">        cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;<span class="preprocessor">        (((width)*(height)+3)&gt;&gt;2)-1, 0 );           \</span></div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), 0, \</span></div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,          \</span></div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;<span class="comment"> *  4-bit load block.  Useful when loading multiple tiles</span></div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;<span class="preprocessor">#define gDPLoadMultiBlock_4b(pkt, timg, tmem, rtile, fmt, width, height,\</span></div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);        \</span></div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0,   \</span></div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;<span class="preprocessor">        cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;<span class="preprocessor">        (((width)*(height)+3)&gt;&gt;2)-1,                \</span></div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;<span class="preprocessor">        CALC_DXT_4b(width));                    \</span></div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), tmem,  \</span></div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;<span class="preprocessor">        rtile, pal, cmt, maskt, shiftt, cms, masks,     \</span></div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, rtile, 0, 0,                \</span></div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;<span class="comment"> *  4-bit load block.  Allows tmem and render tile to be specified.  Useful when  </span></div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;<span class="comment"> *  loading multiple tiles.  The S means odd lines are already word swapped.</span></div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;<span class="preprocessor">#define gDPLoadMultiBlock_4bS(pkt, timg, tmem, rtile, fmt, width, height,\</span></div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);        \</span></div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0,   \</span></div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;<span class="preprocessor">        cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;<span class="preprocessor">        (((width)*(height)+3)&gt;&gt;2)-1, 0 );           \</span></div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), tmem,  \</span></div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;<span class="preprocessor">        rtile, pal, cmt, maskt, shiftt, cms, masks,     \</span></div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, rtile, 0, 0,                \</span></div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;<span class="preprocessor">#define _gDPLoadTextureBlock_4b(pkt, timg, tmem, fmt, width, height,    \</span></div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);        \</span></div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0,   \</span></div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;<span class="preprocessor">        cmt, maskt, shiftt, cms, masks, shifts);        \</span></div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;<span class="preprocessor">    gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,              \</span></div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;<span class="preprocessor">        (((width)*(height)+3)&gt;&gt;2)-1,                \</span></div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;<span class="preprocessor">        CALC_DXT_4b(width));                    \</span></div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), tmem,  \</span></div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,          \</span></div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)           \</span></div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;<span class="preprocessor">#define gsDPLoadTextureBlock_4b(timg, fmt, width, height,       \</span></div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),        \</span></div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0 , cmt,    \</span></div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts),         \</span></div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)&gt;&gt;2)-1, \</span></div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;<span class="preprocessor">        CALC_DXT_4b(width)),                    \</span></div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), 0,     \</span></div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;<span class="preprocessor">    gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,              \</span></div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;<span class="preprocessor">#define gsDPLoadTextureBlock_4bS(timg, fmt, width, height,      \</span></div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),        \</span></div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0 , cmt,    \</span></div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts),         \</span></div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)&gt;&gt;2)-1,0),\</span></div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), 0,     \</span></div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;<span class="preprocessor">    gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,              \</span></div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;<span class="comment"> *  4-bit load block.  Allows tmem address and render tile to be specified.</span></div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;<span class="comment"> *  Useful when loading multiple tiles.</span></div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;<span class="preprocessor">#define gsDPLoadMultiBlock_4b(timg, tmem, rtile, fmt, width, height,    \</span></div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),        \</span></div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0 , cmt, \</span></div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts),         \</span></div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)&gt;&gt;2)-1, \</span></div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;<span class="preprocessor">        CALC_DXT_4b(width)),                    \</span></div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), tmem,  \</span></div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;<span class="preprocessor">        rtile, pal, cmt, maskt, shiftt, cms, masks,     \</span></div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;<span class="preprocessor">    gsDPSetTileSize(rtile, 0, 0,                    \</span></div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;<span class="comment"> *  4-bit load block.  Allows tmem address and render tile to be specified.</span></div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;<span class="comment"> *  Useful when loading multiple tiles.  S means odd lines are already swapped.</span></div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;<span class="preprocessor">#define gsDPLoadMultiBlock_4bS(timg, tmem, rtile, fmt, width, height,   \</span></div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),        \</span></div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0 , cmt, \</span></div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts),         \</span></div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)&gt;&gt;2)-1,0),\</span></div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), tmem,  \</span></div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;<span class="preprocessor">        rtile, pal, cmt, maskt, shiftt, cms, masks,     \</span></div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;<span class="preprocessor">    gsDPSetTileSize(rtile, 0, 0,                    \</span></div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;<span class="comment"> *  Allows tmem address to be specified</span></div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;<span class="preprocessor">#define _gsDPLoadTextureBlock_4b(timg, tmem, fmt, width, height,    \</span></div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;<span class="preprocessor">        pal, cms, cmt, masks, maskt, shifts, shiftt)        \</span></div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),        \</span></div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0 , cmt, \</span></div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;<span class="preprocessor">        maskt, shiftt, cms, masks, shifts),         \</span></div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;<span class="preprocessor">    gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)&gt;&gt;2)-1, \</span></div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;<span class="preprocessor">        CALC_DXT_4b(width)),                    \</span></div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)&gt;&gt;1)+7)&gt;&gt;3), tmem,  \</span></div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;<span class="preprocessor">    gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,              \</span></div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;<span class="preprocessor">        ((width)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;<span class="preprocessor">        ((height)-1) &lt;&lt; G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;<span class="preprocessor">#define gDPLoadTextureTile(pkt, timg, fmt, siz, width, height,      \</span></div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;<span class="preprocessor">        uls, ult, lrs, lrt, pal,                \</span></div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;<span class="preprocessor">        cms, cmt, masks, maskt, shifts, shiftt)         \</span></div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz, width, timg);         \</span></div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz,                   \</span></div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;<span class="preprocessor">        (((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)&gt;&gt;3), 0,   \</span></div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;<span class="preprocessor">        G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,  \</span></div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;<span class="preprocessor">    gDPLoadTile(    pkt, G_TX_LOADTILE,             \</span></div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC);           \</span></div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz,                   \</span></div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;<span class="preprocessor">        (((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)&gt;&gt;3), 0,   \</span></div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE,                \</span></div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC)            \</span></div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;<span class="preprocessor">#else </span><span class="comment">/******** WORKAROUND hw 1 load tile bug ********/</span><span class="preprocessor"></span></div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;<span class="preprocessor">#define gDPLoadTextureTile(pkt, timg, fmt, siz, width, height,      \</span></div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;<span class="preprocessor">        uls, ult, lrs, lrt, pal,                \</span></div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;<span class="preprocessor">        cms, cmt, masks, maskt, shifts, shiftt)         \</span></div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;<span class="preprocessor">    int _loadtile_i, _loadtile_nw; Gfx *_loadtile_temp = pkt;   \</span></div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;<span class="preprocessor">    guDPLoadTextureTile(_loadtile_temp, timg, fmt, siz,         \</span></div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;<span class="preprocessor">        width, height,                          \</span></div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;<span class="preprocessor">                uls, ult, lrs, lrt, pal,                                \</span></div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;<span class="preprocessor">                cms, cmt, masks, maskt, shifts, shiftt);        \</span></div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;<span class="preprocessor">    _loadtile_nw = guGetDPLoadTextureTileSz(ult, lrt) - 1;      \</span></div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;<span class="preprocessor">    for(_loadtile_i = 0; _loadtile_i &lt; _loadtile_nw; _loadtile_i++) \</span></div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;<span class="preprocessor">      pkt;                              \</span></div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HW_VERSION_1 */</span><span class="preprocessor"></span></div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;<span class="comment"> *  Load texture tile.  Allows tmem address and render tile to be specified.</span></div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;<span class="comment"> *  Useful for loading multiple tiles.</span></div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;<span class="preprocessor">#define gDPLoadMultiTile(pkt, timg, tmem, rtile, fmt, siz, width, height,\</span></div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;<span class="preprocessor">        uls, ult, lrs, lrt, pal,                \</span></div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;<span class="preprocessor">        cms, cmt, masks, maskt, shifts, shiftt)         \</span></div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, siz, width, timg);         \</span></div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz,                   \</span></div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;<span class="preprocessor">        (((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)&gt;&gt;3), tmem,    \</span></div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;<span class="preprocessor">        G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,  \</span></div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;<span class="preprocessor">    gDPLoadTile(    pkt, G_TX_LOADTILE,             \</span></div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC);           \</span></div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, siz,                   \</span></div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;<span class="preprocessor">        (((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)&gt;&gt;3), tmem,    \</span></div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;<span class="preprocessor">        rtile, pal, cmt, maskt, shiftt, cms, masks,     \</span></div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;<span class="preprocessor">        shifts);                        \</span></div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, rtile,                  \</span></div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC)            \</span></div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;<span class="preprocessor">#define gsDPLoadTextureTile(timg, fmt, siz, width, height,      \</span></div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;<span class="preprocessor">        uls, ult, lrs, lrt, pal,                \</span></div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;<span class="preprocessor">        cms, cmt, masks, maskt, shifts, shiftt)         \</span></div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, siz, width, timg),         \</span></div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz,                       \</span></div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;<span class="preprocessor">            (((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)&gt;&gt;3), 0,   \</span></div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;<span class="preprocessor">            G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,  \</span></div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;<span class="preprocessor">            shifts),                        \</span></div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;<span class="preprocessor">    gsDPLoadTile(   G_TX_LOADTILE,                  \</span></div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC),           \</span></div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz,                       \</span></div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;<span class="preprocessor">            (((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)&gt;&gt;3), 0,   \</span></div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;<span class="preprocessor">            G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,\</span></div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;<span class="preprocessor">            shifts),                        \</span></div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;<span class="preprocessor">    gsDPSetTileSize(G_TX_RENDERTILE,                \</span></div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;<span class="comment"> *  Load texture tile.  Allows tmem address and render tile to be specified.</span></div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;<span class="comment"> *  Useful for loading multiple tiles.</span></div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;<span class="preprocessor">#define gsDPLoadMultiTile(timg, tmem, rtile, fmt, siz, width, height,   \</span></div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;<span class="preprocessor">        uls, ult, lrs, lrt, pal,                \</span></div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;<span class="preprocessor">        cms, cmt, masks, maskt, shifts, shiftt)         \</span></div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, siz, width, timg),         \</span></div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz,                       \</span></div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;<span class="preprocessor">            (((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)&gt;&gt;3),  \</span></div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;<span class="preprocessor">            tmem, G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms,   \</span></div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;<span class="preprocessor">            masks, shifts),                 \</span></div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;<span class="preprocessor">    gsDPLoadTile(   G_TX_LOADTILE,                  \</span></div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC),           \</span></div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, siz,                       \</span></div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;<span class="preprocessor">            (((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)&gt;&gt;3),  \</span></div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;<span class="preprocessor">            tmem, rtile, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;<span class="preprocessor">            shifts),                        \</span></div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;<span class="preprocessor">    gsDPSetTileSize(rtile,                      \</span></div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;<span class="preprocessor">#define gDPLoadTextureTile_4b(pkt, timg, fmt, width, height,        \</span></div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;<span class="preprocessor">        uls, ult, lrs, lrt, pal,                \</span></div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;<span class="preprocessor">        cms, cmt, masks, maskt, shifts, shiftt)         \</span></div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, G_IM_SIZ_8b, ((width)&gt;&gt;1), timg);  \</span></div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_8b,               \</span></div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;<span class="preprocessor">           (((((lrs)-(uls)+1)&gt;&gt;1)+7)&gt;&gt;3), 0,            \</span></div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;<span class="preprocessor">           G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;<span class="preprocessor">           shifts);                     \</span></div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;<span class="preprocessor">    gDPLoadTile(    pkt, G_TX_LOADTILE,             \</span></div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;(G_TEXTURE_IMAGE_FRAC-1),        \</span></div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;(G_TEXTURE_IMAGE_FRAC),          \</span></div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;(G_TEXTURE_IMAGE_FRAC-1),        \</span></div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;(G_TEXTURE_IMAGE_FRAC));         \</span></div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_4b,               \</span></div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;<span class="preprocessor">           (((((lrs)-(uls)+1)&gt;&gt;1)+7)&gt;&gt;3), 0,            \</span></div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;<span class="preprocessor">           G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms,   \</span></div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;<span class="preprocessor">           masks, shifts);                  \</span></div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, G_TX_RENDERTILE,                \</span></div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC)            \</span></div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;<span class="comment"> *  Load texture tile.  Allows tmem address and render tile to be specified.</span></div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;<span class="comment"> *  Useful for loading multiple tiles.</span></div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;<span class="preprocessor">#define gDPLoadMultiTile_4b(pkt, timg, tmem, rtile, fmt, width, height, \</span></div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;<span class="preprocessor">        uls, ult, lrs, lrt, pal,                \</span></div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;<span class="preprocessor">        cms, cmt, masks, maskt, shifts, shiftt)         \</span></div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, fmt, G_IM_SIZ_8b, ((width)&gt;&gt;1), timg);  \</span></div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_8b,                   \</span></div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;<span class="preprocessor">           (((((lrs)-(uls)+1)&gt;&gt;1)+7)&gt;&gt;3), tmem,         \</span></div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;<span class="preprocessor">           G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;<span class="preprocessor">           shifts);                     \</span></div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;<span class="preprocessor">    gDPLoadTile(    pkt, G_TX_LOADTILE,             \</span></div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;(G_TEXTURE_IMAGE_FRAC-1),        \</span></div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;(G_TEXTURE_IMAGE_FRAC),          \</span></div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;(G_TEXTURE_IMAGE_FRAC-1),        \</span></div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;(G_TEXTURE_IMAGE_FRAC));         \</span></div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, fmt, G_IM_SIZ_4b,               \</span></div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;<span class="preprocessor">           (((((lrs)-(uls)+1)&gt;&gt;1)+7)&gt;&gt;3), tmem,         \</span></div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;<span class="preprocessor">           rtile, pal, cmt, maskt, shiftt, cms, masks,      \</span></div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;<span class="preprocessor">           shifts);                     \</span></div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;<span class="preprocessor">    gDPSetTileSize(pkt, rtile,                  \</span></div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC)            \</span></div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;<span class="preprocessor">#define gsDPLoadTextureTile_4b(timg, fmt, width, height,        \</span></div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;<span class="preprocessor">        uls, ult, lrs, lrt, pal,                \</span></div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;<span class="preprocessor">        cms, cmt, masks, maskt, shifts, shiftt)         \</span></div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, G_IM_SIZ_8b, ((width)&gt;&gt;1), timg),  \</span></div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_8b, (((((lrs)-(uls)+1)&gt;&gt;1)+7)&gt;&gt;3), 0, \</span></div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;<span class="preprocessor">        G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,  \</span></div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;<span class="preprocessor">    gsDPLoadTile(   G_TX_LOADTILE,                  \</span></div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;(G_TEXTURE_IMAGE_FRAC-1),        \</span></div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;(G_TEXTURE_IMAGE_FRAC),          \</span></div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;(G_TEXTURE_IMAGE_FRAC-1),        \</span></div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;(G_TEXTURE_IMAGE_FRAC)),         \</span></div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_4b, (((((lrs)-(uls)+1)&gt;&gt;1)+7)&gt;&gt;3), 0, \</span></div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;<span class="preprocessor">        G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;<span class="preprocessor">        shifts),                        \</span></div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;<span class="preprocessor">    gsDPSetTileSize(G_TX_RENDERTILE,                \</span></div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;<span class="comment"> *  Load texture tile.  Allows tmem address and render tile to be specified.</span></div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;<span class="comment"> *  Useful for loading multiple tiles.</span></div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;<span class="preprocessor">#define gsDPLoadMultiTile_4b(timg, tmem, rtile, fmt, width, height, \</span></div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;<span class="preprocessor">        uls, ult, lrs, lrt, pal,                \</span></div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;<span class="preprocessor">        cms, cmt, masks, maskt, shifts, shiftt)         \</span></div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(fmt, G_IM_SIZ_8b, ((width)&gt;&gt;1), timg),  \</span></div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_8b, (((((lrs)-(uls)+1)&gt;&gt;1)+7)&gt;&gt;3),    \</span></div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;<span class="preprocessor">            tmem, G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms,   \</span></div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;<span class="preprocessor">            masks, shifts),                 \</span></div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;<span class="preprocessor">    gsDPLoadTile(   G_TX_LOADTILE,                  \</span></div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;(G_TEXTURE_IMAGE_FRAC-1),        \</span></div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;(G_TEXTURE_IMAGE_FRAC),          \</span></div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;(G_TEXTURE_IMAGE_FRAC-1),        \</span></div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;(G_TEXTURE_IMAGE_FRAC)),         \</span></div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;<span class="preprocessor">    gsDPPipeSync(),                         \</span></div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;<span class="preprocessor">    gsDPSetTile(fmt, G_IM_SIZ_4b, (((((lrs)-(uls)+1)&gt;&gt;1)+7)&gt;&gt;3),    \</span></div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;<span class="preprocessor">            tmem, rtile, pal, cmt, maskt, shiftt, cms, masks,   \</span></div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;<span class="preprocessor">            shifts),                        \</span></div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;<span class="preprocessor">    gsDPSetTileSize(rtile,                      \</span></div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;<span class="preprocessor">            (uls)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;<span class="preprocessor">            (ult)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;<span class="preprocessor">            (lrs)&lt;&lt;G_TEXTURE_IMAGE_FRAC,            \</span></div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;<span class="preprocessor">            (lrt)&lt;&lt;G_TEXTURE_IMAGE_FRAC)</span></div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;<span class="comment"> *  Load a 16-entry palette (for 4-bit CI textures)</span></div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;<span class="comment"> *  Assumes a 16 entry tlut is being loaded, palette # is 0-15</span></div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;<span class="preprocessor">#define gDPLoadTLUT_pal16(pkt, pal, dram)               \</span></div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram);  \</span></div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;<span class="preprocessor">    gDPTileSync(pkt);                       \</span></div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, 0, 0, 0, (256+(((pal)&amp;0xf)*16)),        \</span></div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;<span class="preprocessor">        G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0);           \</span></div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;<span class="preprocessor">    gDPLoadTLUTCmd(pkt, G_TX_LOADTILE, 15);             \</span></div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt)                        \</span></div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* **** WORKAROUND hardware 1 load_tlut bug ****** */</span><span class="preprocessor"></span></div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;<span class="preprocessor">#define gDPLoadTLUT_pal16(pkt, pal, dram)               \</span></div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;<span class="preprocessor">        _gDPLoadTextureBlock(pkt, dram, (256+(((pal)&amp;0xf)*16)),     \</span></div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;<span class="preprocessor">        G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*16, 1,           \</span></div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;<span class="preprocessor">        pal, 0, 0, 0, 0, 0, 0)</span></div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _HW_VERSION_1 */</span><span class="preprocessor"></span></div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;<span class="comment"> *  Load a 16-entry palette (for 4-bit CI textures)</span></div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;<span class="comment"> *  Assumes a 16 entry tlut is being loaded, palette # is 0-15</span></div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;<span class="preprocessor">#define gsDPLoadTLUT_pal16(pal, dram)                   \</span></div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram),  \</span></div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;<span class="preprocessor">    gsDPTileSync(),                         \</span></div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;<span class="preprocessor">    gsDPSetTile(0, 0, 0, (256+(((pal)&amp;0xf)*16)),            \</span></div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;<span class="preprocessor">        G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0),           \</span></div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;<span class="preprocessor">    gsDPLoadTLUTCmd(G_TX_LOADTILE, 15),             \</span></div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;<span class="preprocessor">    gsDPPipeSync()</span></div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* **** WORKAROUND hardware 1 load_tlut bug ****** */</span><span class="preprocessor"></span></div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;<span class="preprocessor">#define gsDPLoadTLUT_pal16(pal, dram)                                   \</span></div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;<span class="preprocessor">    _gsDPLoadTextureBlock(dram, (256+(((pal)&amp;0xf)*16)),             \</span></div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;<span class="preprocessor">                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*16, 1,                   \</span></div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;<span class="preprocessor">                pal, 0, 0, 0, 0, 0, 0)</span></div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _HW_VERSION_1 */</span><span class="preprocessor"> </span></div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;<span class="comment"> *  Load a 256-entry palette (for 8-bit CI textures)</span></div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;<span class="comment"> *  Assumes a 256 entry tlut is being loaded, palette # is not used</span></div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;<span class="preprocessor">#define gDPLoadTLUT_pal256(pkt, dram)                   \</span></div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram);  \</span></div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;<span class="preprocessor">    gDPTileSync(pkt);                       \</span></div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, 0, 0, 0, 256,                   \</span></div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;<span class="preprocessor">        G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0);           \</span></div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;<span class="preprocessor">    gDPLoadTLUTCmd(pkt, G_TX_LOADTILE, 255);            \</span></div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt)                        \</span></div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* **** WORKAROUND hardware 1 load_tlut bug ****** */</span><span class="preprocessor"></span></div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;<span class="preprocessor">#define gDPLoadTLUT_pal256(pkt, dram)                                   \</span></div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;<span class="preprocessor">                                                                    \</span></div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;<span class="preprocessor">    _gDPLoadTextureBlock(pkt, dram, 256,                    \</span></div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;<span class="preprocessor">                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*256, 1,          \</span></div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;<span class="preprocessor">                0, 0, 0, 0, 0, 0, 0)</span></div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _HW_VERSION_1 */</span><span class="preprocessor"></span></div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;<span class="preprocessor">#define gsDPLoadTLUT_pal256(dram)                   \</span></div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram),  \</span></div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;<span class="preprocessor">    gsDPTileSync(),                         \</span></div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;<span class="preprocessor">    gsDPSetTile(0, 0, 0, 256,                   \</span></div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;<span class="preprocessor">        G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0),           \</span></div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;<span class="preprocessor">    gsDPLoadTLUTCmd(G_TX_LOADTILE, 255),                \</span></div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;<span class="preprocessor">    gsDPPipeSync()</span></div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160; </div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* **** WORKAROUND hardware 1 load_tlut bug ****** */</span><span class="preprocessor"></span></div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;<span class="preprocessor">#define gsDPLoadTLUT_pal256(dram)                                       \</span></div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;<span class="preprocessor">    _gsDPLoadTextureBlock(dram, 256,                                \</span></div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;<span class="preprocessor">                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*256, 1,                  \</span></div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;<span class="preprocessor">                0, 0, 0, 0, 0, 0, 0)</span></div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _HW_VERSION_1 */</span><span class="preprocessor"></span></div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;<span class="preprocessor">#define gDPLoadTLUT(pkt, count, tmemaddr, dram)             \</span></div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;<span class="preprocessor">    gDPSetTextureImage(pkt, G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram);  \</span></div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;<span class="preprocessor">    gDPTileSync(pkt);                       \</span></div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;<span class="preprocessor">    gDPSetTile(pkt, 0, 0, 0, tmemaddr,              \</span></div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;<span class="preprocessor">        G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0);           \</span></div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;<span class="preprocessor">    gDPLoadSync(pkt);                       \</span></div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;<span class="preprocessor">    gDPLoadTLUTCmd(pkt, G_TX_LOADTILE, ((count)-1));        \</span></div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;<span class="preprocessor">    gDPPipeSync(pkt);                       \</span></div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* **** WORKAROUND hardware 1 load_tlut bug ****** */</span><span class="preprocessor"></span></div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;<span class="preprocessor">#define gDPLoadTLUT(pkt, count, tmemaddr, dram)                         \</span></div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;<span class="preprocessor">        _gDPLoadTextureBlock(pkt, dram, tmemaddr,                       \</span></div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;<span class="preprocessor">                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4, count,                  \</span></div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;<span class="preprocessor">                0, 0, 0, 0, 0, 0, 0)</span></div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _HW_VERSION_1 */</span><span class="preprocessor"></span></div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;<span class="preprocessor">#ifndef _HW_VERSION_1</span></div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;<span class="preprocessor">#define gsDPLoadTLUT(count, tmemaddr, dram)             \</span></div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;<span class="preprocessor">    gsDPSetTextureImage(G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram),  \</span></div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;<span class="preprocessor">    gsDPTileSync(),                         \</span></div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;<span class="preprocessor">    gsDPSetTile(0, 0, 0, tmemaddr,                  \</span></div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;<span class="preprocessor">        G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0),           \</span></div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;<span class="preprocessor">    gsDPLoadSync(),                         \</span></div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;<span class="preprocessor">    gsDPLoadTLUTCmd(G_TX_LOADTILE, ((count)-1)),            \</span></div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;<span class="preprocessor">    gsDPPipeSync()</span></div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* **** WORKAROUND hardware 1 load_tlut bug ****** */</span><span class="preprocessor"></span></div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;<span class="preprocessor">#define gsDPLoadTLUT(count, tmemaddr, dram)                             \</span></div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;<span class="preprocessor">        _gsDPLoadTextureBlock(dram, tmemaddr,                           \</span></div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;<span class="preprocessor">                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4, count,                  \</span></div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;<span class="preprocessor">                0, 0, 0, 0, 0, 0, 0)</span></div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _HW_VERSION_1 */</span><span class="preprocessor"> </span></div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;<span class="preprocessor">#define gDPSetScissor(pkt, mode, ulx, uly, lrx, lry)            \</span></div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)pkt;                       \</span></div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_SETSCISSOR, 24, 8) |           \</span></div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;<span class="preprocessor">               _SHIFTL((int)((float)(ulx)*4.0F), 12, 12) |  \</span></div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;<span class="preprocessor">                       _SHIFTL((int)((float)(uly)*4.0F), 0, 12);    \</span></div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = _SHIFTL(mode, 24, 2) |               \</span></div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;<span class="preprocessor">               _SHIFTL((int)((float)(lrx)*4.0F), 12, 12) |  \</span></div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;<span class="preprocessor">                       _SHIFTL((int)((float)(lry)*4.0F), 0, 12);    \</span></div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;<span class="preprocessor">#define gDPSetScissorFrac(pkt, mode, ulx, uly, lrx, lry)        \</span></div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)pkt;                       \</span></div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_SETSCISSOR, 24, 8) |           \</span></div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;<span class="preprocessor">               _SHIFTL((int)((ulx)), 12, 12) |          \</span></div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;<span class="preprocessor">                       _SHIFTL((int)((uly)), 0, 12);            \</span></div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = _SHIFTL(mode, 24, 2) |               \</span></div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;<span class="preprocessor">               _SHIFTL((int)((lrx)), 12, 12) |          \</span></div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;<span class="preprocessor">                       _SHIFTL((int)((lry)), 0, 12);            \</span></div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;<span class="preprocessor">#define gsDPSetScissor(mode, ulx, uly, lrx, lry)            \</span></div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;<span class="preprocessor">    _SHIFTL(G_SETSCISSOR, 24, 8) |                  \</span></div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;<span class="preprocessor">    _SHIFTL((int)((float)(ulx)*4.0F), 12, 12) |         \</span></div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;<span class="preprocessor">    _SHIFTL((int)((float)(uly)*4.0F), 0, 12),           \</span></div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;<span class="preprocessor">    _SHIFTL(mode, 24, 2) |                      \</span></div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;<span class="preprocessor">    _SHIFTL((int)((float)(lrx)*4.0F), 12, 12) |         \</span></div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;<span class="preprocessor">    _SHIFTL((int)((float)(lry)*4.0F), 0, 12)            \</span></div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;<span class="preprocessor">#define gsDPSetScissorFrac(mode, ulx, uly, lrx, lry)            \</span></div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;<span class="preprocessor">    _SHIFTL(G_SETSCISSOR, 24, 8) |                  \</span></div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;<span class="preprocessor">    _SHIFTL((int)((ulx)), 12, 12) |                 \</span></div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;<span class="preprocessor">    _SHIFTL((int)((uly)), 0, 12),                   \</span></div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;<span class="preprocessor">    _SHIFTL(mode, 24, 2) |                      \</span></div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;<span class="preprocessor">    _SHIFTL((int)(lrx), 12, 12) |                   \</span></div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;<span class="preprocessor">    _SHIFTL((int)(lry), 0, 12)                  \</span></div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;<span class="comment">/* Fraction never used in fill */</span></div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;<span class="preprocessor">#define gDPFillRectangle(pkt, ulx, uly, lrx, lry)           \</span></div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_FILLRECT, 24, 8) |            \</span></div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;<span class="preprocessor">            _SHIFTL((lrx), 14, 10) | _SHIFTL((lry), 2, 10));\</span></div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL((ulx), 14, 10) | _SHIFTL((uly), 2, 10));\</span></div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;<span class="preprocessor">#define gsDPFillRectangle(ulx, uly, lrx, lry)               \</span></div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;<span class="preprocessor">    (_SHIFTL(G_FILLRECT, 24, 8) | _SHIFTL((lrx), 14, 10) |      \</span></div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;<span class="preprocessor">     _SHIFTL((lry), 2, 10)),                    \</span></div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;<span class="preprocessor">    (_SHIFTL((ulx), 14, 10) | _SHIFTL((uly), 2, 10))        \</span></div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;<span class="comment">/* like gDPFillRectangle but accepts negative arguments */</span></div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;<span class="preprocessor">#define gDPScisFillRectangle(pkt, ulx, uly, lrx, lry)           \</span></div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_FILLRECT, 24, 8) |            \</span></div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;<span class="preprocessor">            _SHIFTL(MAX((lrx),0), 14, 10) |         \</span></div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;<span class="preprocessor">            _SHIFTL(MAX((lry),0), 2, 10));          \</span></div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(MAX((ulx),0), 14, 10) |         \</span></div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;<span class="preprocessor">            _SHIFTL(MAX((uly),0), 2, 10));          \</span></div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;<span class="preprocessor">#define gDPSetConvert(pkt, k0, k1, k2, k3, k4, k5)          \</span></div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_SETCONVERT, 24, 8) |          \</span></div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;<span class="preprocessor">            _SHIFTL(k0, 13, 9) | _SHIFTL(k1, 4, 9) |    \</span></div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;<span class="preprocessor">            _SHIFTR(k2, 5, 4));             \</span></div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(k2, 27, 5) | _SHIFTL(k3, 18, 9) |   \</span></div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;<span class="preprocessor">            _SHIFTL(k4, 9, 9) | _SHIFTL(k5, 0, 9));     \</span></div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;<span class="preprocessor">#define gsDPSetConvert(k0, k1, k2, k3, k4, k5)              \</span></div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;<span class="preprocessor">    (_SHIFTL(G_SETCONVERT, 24, 8) |                 \</span></div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;<span class="preprocessor">     _SHIFTL(k0, 13, 9) | _SHIFTL(k1, 4, 9) | _SHIFTR(k2, 5, 4)),   \</span></div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;<span class="preprocessor">    (_SHIFTL(k2, 27, 5) | _SHIFTL(k3, 18, 9) | _SHIFTL(k4, 9, 9) |  \</span></div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;<span class="preprocessor">     _SHIFTL(k5, 0, 9))                     \</span></div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;<span class="preprocessor">#define gDPSetKeyR(pkt, cR, sR, wR)                 \</span></div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(G_SETKEYR, 24, 8);           \</span></div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(wR, 16, 12) | _SHIFTL(cR, 8, 8) |   \</span></div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;<span class="preprocessor">            _SHIFTL(sR, 0, 8));             \</span></div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;<span class="preprocessor">#define gsDPSetKeyR(cR, sR, wR)                     \</span></div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;<span class="preprocessor">    _SHIFTL(G_SETKEYR, 24, 8),                  \</span></div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;<span class="preprocessor">    _SHIFTL(wR, 16, 12) | _SHIFTL(cR, 8, 8) | _SHIFTL(sR, 0, 8) \</span></div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;<span class="preprocessor">#define gDPSetKeyGB(pkt, cG, sG, wG, cB, sB, wB)            \</span></div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_SETKEYGB, 24, 8) |            \</span></div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;<span class="preprocessor">            _SHIFTL(wG, 12, 12) | _SHIFTL(wB, 0, 12));  \</span></div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(cG, 24, 8) | _SHIFTL(sG, 16, 8) |   \</span></div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;<span class="preprocessor">             _SHIFTL(cB, 8, 8) | _SHIFTL(sB, 0, 8));    \</span></div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;<span class="preprocessor">#define gsDPSetKeyGB(cG, sG, wG, cB, sB, wB)                \</span></div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;<span class="preprocessor">    (_SHIFTL(G_SETKEYGB, 24, 8) | _SHIFTL(wG, 12, 12) |     \</span></div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;<span class="preprocessor">     _SHIFTL(wB, 0, 12)),                       \</span></div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;<span class="preprocessor">    (_SHIFTL(cG, 24, 8) | _SHIFTL(sG, 16, 8) | _SHIFTL(cB, 8, 8) |  \</span></div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;<span class="preprocessor">     _SHIFTL(sB, 0, 8))                     \</span></div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;<span class="preprocessor">#define gDPNoParam(pkt, cmd)                        \</span></div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(cmd, 24, 8);             \</span></div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = 0;                       \</span></div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;<span class="preprocessor">#define gsDPNoParam(cmd)                        \</span></div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;<span class="preprocessor">    _SHIFTL(cmd, 24, 8), 0                      \</span></div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;<span class="preprocessor">#define gDPParam(pkt, cmd, param)                   \</span></div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = _SHIFTL(cmd, 24, 8);             \</span></div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (param);                     \</span></div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;<span class="preprocessor">#define gsDPParam(cmd, param)                       \</span></div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;<span class="preprocessor">    _SHIFTL(cmd, 24, 8), (param)                    \</span></div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;<span class="comment">/* Notice that textured rectangles are 128-bit commands, therefore</span></div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;<span class="comment"> * gsDPTextureRectangle() should not be used in display lists </span></div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;<span class="comment"> * under normal circumstances (use gsSPTextureRectangle()).</span></div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;<span class="comment"> * That is also why there is no gDPTextureRectangle() macros.</span></div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;<span class="preprocessor">#define gsDPTextureRectangle(xl, yl, xh, yh, tile, s, t, dsdx, dtdy)    \</span></div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;<span class="preprocessor">    (_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) |          \</span></div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;<span class="preprocessor">     _SHIFTL(yh, 0, 12)),                       \</span></div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;<span class="preprocessor">    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12)),  \</span></div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;<span class="preprocessor">}},                                 \</span></div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;<span class="preprocessor">    _SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16),             \</span></div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;<span class="preprocessor">    _SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)            \</span></div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;<span class="preprocessor">#define gDPTextureRectangle(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy)\</span></div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;<span class="preprocessor">    if (pkt);                               \</span></div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) |   \</span></div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;<span class="preprocessor">            _SHIFTL(yh, 0, 12));                    \</span></div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |    \</span></div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;<span class="preprocessor">            _SHIFTL(yl, 0, 12));                \</span></div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;<span class="preprocessor">    _g ++;                              \</span></div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16));        \</span></div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16));  \</span></div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;<span class="preprocessor">#define gsDPTextureRectangleFlip(xl, yl, xh, yh, tile, s, t, dsdx, dtdy) \</span></div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;<span class="preprocessor">    (_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) |      \</span></div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;<span class="preprocessor">     _SHIFTL(yh, 0, 12)),                       \</span></div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;<span class="preprocessor">    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12)),  \</span></div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;<span class="preprocessor">}},                                 \</span></div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;<span class="preprocessor">{{                                  \</span></div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;<span class="preprocessor">    _SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16),             \</span></div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;<span class="preprocessor">    _SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)            \</span></div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;<span class="preprocessor">}}</span></div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;<span class="preprocessor">#define gDPTextureRectangleFlip(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy)\</span></div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;<span class="preprocessor">    if (pkt);                               \</span></div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) | \</span></div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;<span class="preprocessor">            _SHIFTL(yh, 0, 12));                    \</span></div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |    \</span></div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;<span class="preprocessor">            _SHIFTL(yl, 0, 12));                \</span></div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;<span class="preprocessor">    _g ++;                              \</span></div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16));        \</span></div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16));  \</span></div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;<span class="preprocessor">#define gsSPTextureRectangle(xl, yl, xh, yh, tile, s, t, dsdx, dtdy)    \</span></div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;<span class="preprocessor">    {{(_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) | _SHIFTL(yh, 0, 12)),\</span></div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;<span class="preprocessor">    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12))}},    \</span></div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;<span class="preprocessor">    gsImmp1(G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16))), \</span></div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;<span class="preprocessor">    gsImmp1(G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)))</span></div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;<span class="preprocessor">#define gSPTextureRectangle(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy)\</span></div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;<span class="preprocessor">{                                   \</span></div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                     \</span></div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;<span class="preprocessor">                                    \</span></div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) |   \</span></div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;<span class="preprocessor">            _SHIFTL(yh, 0, 12));                    \</span></div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |    \</span></div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;<span class="preprocessor">            _SHIFTL(yl, 0, 12));                \</span></div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;<span class="preprocessor">    gImmp1(pkt, G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16))); \</span></div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;<span class="preprocessor">    gImmp1(pkt, G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)));\</span></div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;<span class="comment">/* like gSPTextureRectangle but accepts negative position arguments */</span></div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;<span class="preprocessor">#define gSPScisTextureRectangle(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy) \</span></div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;<span class="preprocessor">{                                                                            \</span></div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                                                  \</span></div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;<span class="preprocessor">                                                                             \</span></div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TEXRECT, 24, 8) |                              \</span></div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;<span class="preprocessor">                    _SHIFTL(MAX((s16)(xh),0), 12, 12) |                      \</span></div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;<span class="preprocessor">                    _SHIFTL(MAX((s16)(yh),0), 0, 12));                       \</span></div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL((tile), 24, 3) |                                 \</span></div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;<span class="preprocessor">                    _SHIFTL(MAX((s16)(xl),0), 12, 12) |                      \</span></div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;<span class="preprocessor">                    _SHIFTL(MAX((s16)(yl),0), 0, 12));                       \</span></div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;<span class="preprocessor">    gImmp1(pkt, G_RDPHALF_1,                                                 \</span></div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;<span class="preprocessor">                (_SHIFTL(((s) -                                              \</span></div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;<span class="preprocessor">                          (((s16)(xl) &lt; 0) ?                                 \</span></div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;<span class="preprocessor">                           (((s16)(dsdx) &lt; 0) ?                              \</span></div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;<span class="preprocessor">                            (MAX((((s16)(xl)*(s16)(dsdx))&gt;&gt;7),0)) :          \</span></div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;<span class="preprocessor">                (MIN((((s16)(xl)*(s16)(dsdx))&gt;&gt;7),0))) : 0)),    \</span></div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;<span class="preprocessor">             16, 16) |                                           \</span></div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;<span class="preprocessor">                 _SHIFTL(((t) -                                              \</span></div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;<span class="preprocessor">                          (((yl) &lt; 0) ?                                      \</span></div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;<span class="preprocessor">                           (((s16)(dtdy) &lt; 0) ?                              \</span></div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;<span class="preprocessor">                            (MAX((((s16)(yl)*(s16)(dtdy))&gt;&gt;7),0)) :          \</span></div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;<span class="preprocessor">                            (MIN((((s16)(yl)*(s16)(dtdy))&gt;&gt;7),0))) : 0)),    \</span></div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;<span class="preprocessor">             0, 16)));                                           \</span></div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;<span class="preprocessor">    gImmp1(pkt, G_RDPHALF_2, (_SHIFTL((dsdx), 16, 16) |                      \</span></div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;<span class="preprocessor">                              _SHIFTL((dtdy), 0, 16)));                      \</span></div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;<span class="preprocessor">#define gsSPTextureRectangleFlip(xl, yl, xh, yh, tile, s, t, dsdx, dtdy) \</span></div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;<span class="preprocessor">    {{(_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) |        \</span></div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;<span class="preprocessor">     _SHIFTL(yh, 0, 12)),                       \</span></div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;<span class="preprocessor">    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12))}},    \</span></div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;<span class="preprocessor">    gsImmp1(G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16))), \</span></div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;<span class="preprocessor">    gsImmp1(G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)))</span></div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;<span class="preprocessor">#define gSPTextureRectangleFlip(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy) \</span></div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;<span class="preprocessor">{                                       \</span></div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);                         \</span></div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;<span class="preprocessor">                                     \</span></div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;<span class="preprocessor">    _g-&gt;words.w0 = (_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) |\</span></div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;<span class="preprocessor">            _SHIFTL(yh, 0, 12));                \</span></div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;<span class="preprocessor">    _g-&gt;words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |    \</span></div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;<span class="preprocessor">            _SHIFTL(yl, 0, 12));                \</span></div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;<span class="preprocessor">    gImmp1(pkt, G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16))); \</span></div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;<span class="preprocessor">    gImmp1(pkt, G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16))); \</span></div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;<span class="preprocessor">#define gsDPWord(wordhi, wordlo)            \</span></div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;<span class="preprocessor">    gsImmp1(G_RDPHALF_1, (unsigned int)(wordhi)),   \</span></div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;<span class="preprocessor">    gsImmp1(G_RDPHALF_2, (unsigned int)(wordlo))</span></div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;<span class="preprocessor">#define gDPWord(pkt, wordhi, wordlo)            \</span></div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;<span class="preprocessor">{                           \</span></div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;<span class="preprocessor">    Gfx *_g = (Gfx *)(pkt);             \</span></div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;<span class="preprocessor">                            \</span></div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;<span class="preprocessor">    gImmp1(pkt, G_RDPHALF_1, (unsigned int)(wordhi));   \</span></div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;<span class="preprocessor">    gImmp1(pkt, G_RDPHALF_2, (unsigned int)(wordlo));   \</span></div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;<span class="preprocessor">}</span></div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;<span class="preprocessor">#define gDPFullSync(pkt)    gDPNoParam(pkt, G_RDPFULLSYNC)</span></div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;<span class="preprocessor">#define gsDPFullSync()      gsDPNoParam(G_RDPFULLSYNC)</span></div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;<span class="preprocessor">#define gDPTileSync(pkt)    gDPNoParam(pkt, G_RDPTILESYNC)</span></div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;<span class="preprocessor">#define gsDPTileSync()      gsDPNoParam(G_RDPTILESYNC)</span></div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;<span class="preprocessor">#define gDPPipeSync(pkt)    gDPNoParam(pkt, G_RDPPIPESYNC)</span></div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;<span class="preprocessor">#define gsDPPipeSync()      gsDPNoParam(G_RDPPIPESYNC)</span></div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;<span class="preprocessor">#define gDPLoadSync(pkt)    gDPNoParam(pkt, G_RDPLOADSYNC)</span></div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;<span class="preprocessor">#define gsDPLoadSync()      gsDPNoParam(G_RDPLOADSYNC)</span></div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;<span class="preprocessor">#define gDPNoOp(pkt)        gDPNoParam(pkt, G_NOOP)</span></div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;<span class="preprocessor">#define gsDPNoOp()      gsDPNoParam(G_NOOP)</span></div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;<span class="preprocessor">#define gDPNoOpTag(pkt, tag)    gDPParam(pkt, G_NOOP, tag)</span></div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;<span class="preprocessor">#define gsDPNoOpTag(tag)    gsDPParam(G_NOOP, tag)</span></div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _LANGUAGE_C */</span><span class="preprocessor"></span></div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _GBI_H_ */</span><span class="preprocessor"></span></div><div class="ttc" id="structLookAt_html"><div class="ttname"><a href="../../d4/d94/structLookAt.html">LookAt</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:1128</div></div>
<div class="ttc" id="unionGfx_html"><div class="ttname"><a href="../../d9/d0b/unionGfx.html">Gfx</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:59</div></div>
<div class="ttc" id="structLights4_html"><div class="ttname"><a href="../../d3/da1/structLights4.html">Lights4</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:1123</div></div>
<div class="ttc" id="gbi__old_8h_html_a337d3271dded333fc80aa798bf36efe3"><div class="ttname"><a href="../../d5/dff/gbi__old_8h.html#a337d3271dded333fc80aa798bf36efe3">Mtx_t</a></div><div class="ttdeci">long int Mtx_t[4][4]</div><div class="ttdef"><b>Definition:</b> gbi_old.h:45</div></div>
<div class="ttc" id="unionAmbient_html"><div class="ttname"><a href="../../dc/d9c/unionAmbient.html">Ambient</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:1113</div></div>
<div class="ttc" id="structVtx__tn_html"><div class="ttname"><a href="../../d8/df9/structVtx__tn.html">Vtx_tn</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:16</div></div>
<div class="ttc" id="structVtx__t_html"><div class="ttname"><a href="../../d8/d8e/structVtx__t.html">Vtx_t</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:7</div></div>
<div class="ttc" id="err_8english_8cc_html_a94eb816e27f68e8e043135af829de926"><div class="ttname"><a href="../../d9/d0b/err_8english_8cc.html#a94eb816e27f68e8e043135af829de926">a</a></div><div class="ttdeci">at end of structure union member declaration In standard C each member declaration must be terminated by a</div><div class="ttdef"><b>Definition:</b> err.english.cc:690</div></div>
<div class="ttc" id="structHilite__t_html"><div class="ttname"><a href="../../dc/d9d/structHilite__t.html">Hilite_t</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:1132</div></div>
<div class="ttc" id="err_8english_8cc_html_af4ea43c8cfd3b8c343d776bed09719b9"><div class="ttname"><a href="../../d9/d0b/err_8english_8cc.html#af4ea43c8cfd3b8c343d776bed09719b9">s</a></div><div class="ttdeci">input is a non tagged type Internal error in function gen_type_str not a type tree s Cannot open file s Prototype should be moved after tag or a typedef declaration Please look for comments in the extracted header file The extracted header file includes prototypes static for which should be if you wish to include the header in a source file other than the originator ANSI C requires formal parameter before This extension is meant to be used for compatibility with varargs h(35) syntax error cannot initialize Was the struct ever after argument a legal assembly string The float option will be ignored in ANSI mode The float option is since otherwise program semantics would violate the ANSI standard In fp constants are always double with ANSI while with float the type of fp constants will depend on the context and may be float ANSI C support unavailable with C compiler bundled with RISC os The C compiler bundled with RISC os does not support ANSI C ANSI C support requires a separate license Ignored invalid warning s s ! Warning numbers must be in the range s to s The set of warning numbers in cfe is disjoint from the set of warning numbers in since accom warnings cannot be mapped one to one to cfe warnings s not handled as an intrinsic due to incompatible argument types __unalign only qualifies pointers __unalign indicates the object pointed at by pointer is but unlike both cannot qualify a base type index expression is an anachronism ANSI C doesn t support array index expressions in delete member cannot be of function or incomplete s</div><div class="ttdef"><b>Definition:</b> err.english.cc:1194</div></div>
<div class="ttc" id="unionMtx_html"><div class="ttname"><a href="../../d6/d4c/unionMtx.html">Mtx</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:46</div></div>
<div class="ttc" id="unionVtx_html"><div class="ttname"><a href="../../d9/d31/unionVtx.html">Vtx</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:25</div></div>
<div class="ttc" id="err_8english_8cc_html_abc23ab6cce18438940dbc3ddeaa74270"><div class="ttname"><a href="../../d9/d0b/err_8english_8cc.html#abc23ab6cce18438940dbc3ddeaa74270">number</a></div><div class="ttdeci">input is a non tagged type Internal error in function gen_type_str not a type tree s Cannot open file s Prototype should be moved after tag or a typedef declaration Please look for comments in the extracted header file The extracted header file includes prototypes static for which should be if you wish to include the header in a source file other than the originator ANSI C requires formal parameter before This extension is meant to be used for compatibility with varargs h(35) syntax error cannot initialize Was the struct ever after argument a legal assembly string The float option will be ignored in ANSI mode The float option is since otherwise program semantics would violate the ANSI standard In fp constants are always double with ANSI while with float the type of fp constants will depend on the context and may be float ANSI C support unavailable with C compiler bundled with RISC os The C compiler bundled with RISC os does not support ANSI C ANSI C support requires a separate license Ignored invalid warning number(s) in -woff option</div></div>
<div class="ttc" id="unionLight_html"><div class="ttname"><a href="../../db/d72/unionLight.html">Light</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:1118</div></div>
<div class="ttc" id="structVp__t_html"><div class="ttname"><a href="../../d1/d33/structVp__t.html">Vp_t</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:33</div></div>
<div class="ttc" id="dma_8c_html_a511ae0b1c13f95e5f08f1a0dd3da3d93"><div class="ttname"><a href="../../d8/d51/dma_8c.html#a511ae0b1c13f95e5f08f1a0dd3da3d93">data</a></div><div class="ttdeci">u8 * data</div><div class="ttdef"><b>Definition:</b> dma.c:977</div></div>
<div class="ttc" id="unionVp_html"><div class="ttname"><a href="../../d9/d00/unionVp.html">Vp</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:39</div></div>
<div class="ttc" id="structGwords_html"><div class="ttname"><a href="../../dc/db8/structGwords.html">Gwords</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:52</div></div>
<div class="ttc" id="structAmbient__t_html"><div class="ttname"><a href="../../d9/d41/structAmbient__t.html">Ambient_t</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:1106</div></div>
<div class="ttc" id="unionHilite_html"><div class="ttname"><a href="../../dd/dd6/unionHilite.html">Hilite</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:1136</div></div>
<div class="ttc" id="ultratypes_8h_html"><div class="ttname"><a href="../../dd/da7/ultratypes_8h.html">ultratypes.h</a></div></div>
<div class="ttc" id="structLight__t_html"><div class="ttname"><a href="../../d1/d7d/structLight__t.html">Light_t</a></div><div class="ttdef"><b>Definition:</b> gbi_old.h:1097</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
